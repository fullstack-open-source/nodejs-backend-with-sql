{
	"info": {
		"_postman_id": "50285861-11918d16-52fa-486e-ab9d-9fa5f9e8be25",
		"name": "NodeJs - Backend",
		"description": "# ğŸš€ Node.js Backend API\n\n> **Enterprise-Grade Node.js Backend API with Advanced Features** \n  \n\nNode.js Backend is a comprehensive, production-ready RESTful API built with Express.js, featuring JWT authentication, role-based access control, real-time activity logging, advanced security middleware, and comprehensive monitoring capabilities.\n\n**Repository**: [https://github.com/fullstack-open-source/nodejs-backend-with-sql](https://github.com/fullstack-open-source/nodejs-backend-with-sql)\n\n## ğŸ“‹ Table of Contents\n\n- [ğŸš€ Features](#-features)\n    \n- [ğŸ—ï¸ Architecture](#ï¸-architecture)\n    - [System Architecture](#system-architecture)\n        \n    - [Request Flow](#request-flow)\n        \n    - [Middleware Stack](#middleware-stack)\n        \n    - [Database Architecture](#database-architecture)\n        \n    - [Module Structure](#module-structure)\n        \n- [ğŸ“¦ Installation &amp; Setup](#-installation--setup)\n    - [Prerequisites](#prerequisites)\n        \n    - [Quick Start](#quick-start)\n        \n    - [Development Setup](#development-setup)\n        \n    - [Production Setup](#production-setup)\n        \n    - [Docker Setup](#docker-setup)\n        \n- [ğŸ”„ Complete Project Workflow](#-complete-project-workflow)\n    - [Service Connection Architecture](#service-connection-architecture)\n        \n    - [Service Startup Order](#service-startup-order)\n        \n    - [Connection Flow](#connection-flow)\n        \n\n## ğŸš€ Features\n\n### ğŸ¯ Core Capabilities\n\n- **RESTful API**: Comprehensive REST API with Express.js framework\n    \n- **JWT Authentication**: Secure token-based authentication system\n    \n- **Role-Based Access Control**: Flexible permission system with groups and permissions\n    \n- **Activity Logging**: Comprehensive audit trail with detailed metadata\n    \n- **File Upload**: Google Cloud Storage integration for media files\n    \n- **Email & SMS**: Twilio and Nodemailer integration for notifications\n    \n- **Error Tracking**: Sentry integration for production monitoring and error tracking\n    \n- **API Documentation**: Auto-generated Swagger/OpenAPI documentation\n    \n- **Request Queue**: Rate limiting and request queuing for traffic management\n    \n- **Worker Pool**: CPU-intensive task processing with worker threads\n    \n- **Docker Ready**: Production-ready containerization with multi-stage builds\n    \n- **PM2 Support**: Process management with cluster mode for high availability\n    \n\n### ğŸ”§ Technical Features\n\n- **Express.js 4.18+**: Modern web framework for building APIs\n    \n- **PostgreSQL 16+**: Robust relational database with advanced features\n    \n- **Prisma ORM**: Type-safe database access with connection pooling\n    \n- **Redis**: Caching and session management for improved performance\n    \n- **JWT**: Secure token-based authentication and authorization\n    \n- **Winston**: Professional logging system with file rotation\n    \n- **Helmet**: Security headers for protection against common vulnerabilities\n    \n- **Rate Limiting**: Request throttling to prevent abuse\n    \n- **Compression**: Response compression for optimized bandwidth usage\n    \n- **CORS**: Cross-origin resource sharing with whitelist validation\n    \n- **Swagger**: Interactive API documentation with Swagger UI\n    \n- **Nginx Reverse Proxy**: Production-ready reverse proxy configuration\n    \n\n## ğŸ—ï¸ Architecture\n\n### System Architecture\n\nThe system follows a layered architecture with clear separation of concerns:\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                        External Proxy                         â”‚\nâ”‚                    (api.example.com)                          â”‚\nâ”‚                    SSL/TLS Termination                        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                              â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    Internal Nginx Proxy                        â”‚\nâ”‚                    (Port 9080:80)                              â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚  Security Layer:                                         â”‚  â”‚\nâ”‚  â”‚  - Rate Limiting (200 req/min per IP)                    â”‚  â”‚\nâ”‚  â”‚  - Request Size Validation (15MB max)                     â”‚  â”‚\nâ”‚  â”‚  - Attack Pattern Detection                               â”‚  â”‚\nâ”‚  â”‚  - Content Security Policy                               â”‚  â”‚\nâ”‚  â”‚  - DDoS Protection                                        â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€-â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    Express.js Application                      â”‚\nâ”‚                    (Port 3000)                                 â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚  Middleware Stack:                                       â”‚  â”‚\nâ”‚  â”‚  1. Sentry Request Handler                                â”‚  â”‚\nâ”‚  â”‚  2. Helmet (Security Headers)                            â”‚  â”‚\nâ”‚  â”‚  3. CORS (Cross-Origin)                                   â”‚  â”‚\nâ”‚  â”‚  4. Body Parser (JSON/URL-encoded)                       â”‚  â”‚\nâ”‚  â”‚  5. Compression                                           â”‚  â”‚\nâ”‚  â”‚  6. Morgan (Request Logging)                              â”‚  â”‚\nâ”‚  â”‚  7. Request Logger (Custom)                               â”‚  â”‚\nâ”‚  â”‚  8. Rate Limiter                                          â”‚  â”‚\nâ”‚  â”‚  9. Security Middleware (Custom)                          â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚  Application Modules:                                    â”‚  â”‚\nâ”‚  â”‚  - Authentication (JWT, OTP, Login)                      â”‚  â”‚\nâ”‚  â”‚  - Profile Management                                    â”‚  â”‚\nâ”‚  â”‚  - Permissions (Groups, Permissions)                     â”‚  â”‚\nâ”‚  â”‚  - Dashboard (Analytics)                                 â”‚  â”‚\nâ”‚  â”‚  - Activity Logging                                       â”‚  â”‚\nâ”‚  â”‚  - File Upload (GCS)                                      â”‚  â”‚\nâ”‚  â”‚  - Health Monitoring                                      â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€-â”€â”€â”€â”€â”˜\n                             â”‚\n                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                â–¼                          â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   PostgreSQL Database    â”‚   â”‚   Redis Cache            â”‚\nâ”‚   (Prisma ORM)           â”‚   â”‚   (Sessions, Cache)      â”‚\nâ”‚   - User Data            â”‚   â”‚   - Session Storage      â”‚\nâ”‚   - Permissions          â”‚   â”‚   - OTP Cache            â”‚\nâ”‚   - Activity Logs        â”‚   â”‚   - Rate Limiting        â”‚\nâ”‚   - Groups               â”‚   â”‚   - Temporary Data       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚\n                â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   Google Cloud Storage   â”‚\nâ”‚   (Media & Static Files) â”‚\nâ”‚   - User Uploads         â”‚\nâ”‚   - Generated Content    â”‚\nâ”‚   - Static Assets        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n ```\n\n### Request Flow\n\n```\n1. Client Request\n   â”‚\n   â”œâ”€â–º External Proxy (api.example.com)\n   â”‚\n   â”œâ”€â–º Internal Nginx (Port 9080)\n   â”‚   â”œâ”€â–º Security Checks (Rate Limiting, Attack Detection)\n   â”‚   â”œâ”€â–º Request Size Validation\n   â”‚   â”œâ”€â–º Content Security Policy Headers\n   â”‚   â””â”€â–º Proxy to Express (http://api:3000)\n   â”‚\n   â”œâ”€â–º Express Middleware Stack\n   â”‚   â”œâ”€â–º Sentry Request Handler\n   â”‚   â”‚   â””â”€â–º Request Context Capture\n   â”‚   â”‚\n   â”‚   â”œâ”€â–º Helmet\n   â”‚   â”‚   â””â”€â–º Security Headers\n   â”‚   â”‚\n   â”‚   â”œâ”€â–º CORS\n   â”‚   â”‚   â””â”€â–º Origin Validation\n   â”‚   â”‚\n   â”‚   â”œâ”€â–º Body Parser\n   â”‚   â”‚   â”œâ”€â–º JSON Parsing (15MB limit)\n   â”‚   â”‚   â””â”€â–º URL-encoded Parsing\n   â”‚   â”‚\n   â”‚   â”œâ”€â–º Compression\n   â”‚   â”‚   â””â”€â–º Response Compression\n   â”‚   â”‚\n   â”‚   â”œâ”€â–º Morgan + Request Logger\n   â”‚   â”‚   â””â”€â–º Request Logging\n   â”‚   â”‚\n   â”‚   â”œâ”€â–º Rate Limiter\n   â”‚   â”‚   â””â”€â–º Request Throttling (200/min)\n   â”‚   â”‚\n   â”‚   â””â”€â–º Security Middleware\n   â”‚       â”œâ”€â–º Input Sanitization\n   â”‚       â”œâ”€â–º SQL Injection Detection\n   â”‚       â”œâ”€â–º XSS Detection\n   â”‚       â””â”€â–º Command Injection Detection\n   â”‚\n   â”œâ”€â–º Route Handler\n   â”‚   â”œâ”€â–º JWT Authentication (if required)\n   â”‚   â”œâ”€â–º Permission Check (if required)\n   â”‚   â”œâ”€â–º Request Validation\n   â”‚   â”œâ”€â–º Business Logic\n   â”‚   â”œâ”€â–º Database Operations (Prisma)\n   â”‚   â””â”€â–º Response Formatting\n   â”‚\n   â”œâ”€â–º Activity Logging\n   â”‚   â””â”€â–º Log to Database\n   â”‚\n   â””â”€â–º Response\n       â”œâ”€â–º Error Handling (if any)\n       â”œâ”€â–º Sentry Error Capture (if error)\n       â”œâ”€â–º Security Headers\n       â””â”€â–º Client Response\n\n ```\n\n### Middleware Stack\n\nThe middleware stack processes requests in a specific order to ensure security, performance, and reliability:\n\n1. **Sentry Request Handler** - Captures request context for error tracking and performance monitoring\n    \n2. **Helmet** - Sets security headers including X-Content-Type-Options, X-Frame-Options, and X-XSS-Protection\n    \n3. **CORS** - Handles cross-origin requests with whitelist validation for allowed origins\n    \n4. **Body Parser** - Parses JSON and URL-encoded request bodies with 15MB size limit\n    \n5. **Compression** - Compresses responses using gzip algorithm for bandwidth optimization\n    \n6. **Morgan + Request Logger** - Logs HTTP requests with detailed metadata including IP, method, path, and response time\n    \n7. **Rate Limiter** - Throttles requests to 200 requests per minute per IP address\n    \n8. **Security Middleware** - Sanitizes input data and detects attack patterns including SQL injection, XSS, and command injection\n    \n9. **Route Handlers** - Application-specific logic execution\n    \n10. **Error Handler** - Catches and formats errors with appropriate status codes\n    \n11. **Sentry Error Handler** - Captures errors for monitoring and alerting\n    \n\n### Database Architecture\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    PostgreSQL Database                      â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                             â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚  User Model                                           â”‚   â”‚\nâ”‚  â”‚  - user_id (UUID, Primary Key)                        â”‚   â”‚\nâ”‚  â”‚  - email, phone_number, user_name                     â”‚   â”‚\nâ”‚  â”‚  - password, auth_type                                â”‚   â”‚\nâ”‚  â”‚  - is_email_verified, is_phone_verified              â”‚   â”‚\nâ”‚  â”‚  - status, is_active, is_verified                    â”‚   â”‚\nâ”‚  â”‚  - profile_picture_url, bio                           â”‚   â”‚\nâ”‚  â”‚  - Relationships: UserGroup[], ActivityLog[]          â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                                             â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚  Permission Model                                     â”‚   â”‚\nâ”‚  â”‚  - permission_id (UUID, Primary Key)                 â”‚   â”‚\nâ”‚  â”‚  - name, codename (unique)                           â”‚   â”‚\nâ”‚  â”‚  - description, category                              â”‚   â”‚\nâ”‚  â”‚  - Relationships: GroupPermission[]                   â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                                             â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚  Group Model                                          â”‚   â”‚\nâ”‚  â”‚  - group_id (UUID, Primary Key)                       â”‚   â”‚\nâ”‚  â”‚  - name, codename (unique)                           â”‚   â”‚\nâ”‚  â”‚  - description, is_system, is_active                 â”‚   â”‚\nâ”‚  â”‚  - Relationships: GroupPermission[], UserGroup[]      â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                                             â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚  GroupPermission Model (Many-to-Many)                 â”‚   â”‚\nâ”‚  â”‚  - id (UUID, Primary Key)                            â”‚   â”‚\nâ”‚  â”‚  - group_id (FK â†’ Group)                             â”‚   â”‚\nâ”‚  â”‚  - permission_id (FK â†’ Permission)                   â”‚   â”‚\nâ”‚  â”‚  - Unique constraint: (group_id, permission_id)       â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                                             â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚  UserGroup Model (Many-to-Many)                       â”‚   â”‚\nâ”‚  â”‚  - id (UUID, Primary Key)                            â”‚   â”‚\nâ”‚  â”‚  - user_id (FK â†’ User)                               â”‚   â”‚\nâ”‚  â”‚  - group_id (FK â†’ Group)                             â”‚   â”‚\nâ”‚  â”‚  - assigned_at, assigned_by_user_id                  â”‚   â”‚\nâ”‚  â”‚  - Unique constraint: (user_id, group_id)             â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                                             â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚  ActivityLog Model                                    â”‚   â”‚\nâ”‚  â”‚  - log_id (UUID, Primary Key)                        â”‚   â”‚\nâ”‚  â”‚  - user_id (FK â†’ User, nullable)                     â”‚   â”‚\nâ”‚  â”‚  - level, message, action, module                    â”‚   â”‚\nâ”‚  â”‚  - ip_address, user_agent, device, browser, os       â”‚   â”‚\nâ”‚  â”‚  - endpoint, method, status_code                      â”‚   â”‚\nâ”‚  â”‚  - request_id, session_id                             â”‚   â”‚\nâ”‚  â”‚  - metadata, error_details (JSONB)                    â”‚   â”‚\nâ”‚  â”‚  - duration_ms, created_at                           â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n ```\n\n### Module Structure\n\n```\nNodeJs Backend API\nâ”œâ”€â”€ ğŸ“ api/                              # Main application directory\nâ”‚   â”œâ”€â”€ ğŸ“„ server.js                     # Express server entry point\nâ”‚   â”œâ”€â”€ ğŸ“„ Dockerfile                    # Multi-stage Docker build\nâ”‚   â”œâ”€â”€ ğŸ“„ ecosystem.config.js           # PM2 configuration\nâ”‚   â”œâ”€â”€ ğŸ“„ package.json                  # Dependencies and scripts\nâ”‚   â”œâ”€â”€ ğŸ“„ start.sh                      # Container startup script\nâ”‚   â”‚\nâ”‚   â”œâ”€â”€ ğŸ“ router/                       # API route handlers\nâ”‚   â”‚   â”œâ”€â”€ ğŸ” authenticate/              # Authentication routes\nâ”‚   â”‚   â”‚   â”œâ”€â”€ authenticate.js          # Login, OTP, token management\nâ”‚   â”‚   â”‚   â”œâ”€â”€ profile.js               # User profile management\nâ”‚   â”‚   â”‚   â”œâ”€â”€ models.js                # Request validation schemas\nâ”‚   â”‚   â”‚   â”œâ”€â”€ query.js                 # Database queries\nâ”‚   â”‚   â”‚   â””â”€â”€ utils.js                 # Helper functions\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ“Š dashboard/                # Dashboard routes\nâ”‚   â”‚   â”‚   â””â”€â”€ api.js                   # Analytics and statistics\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ”‘ permissions/              # Permission management\nâ”‚   â”‚   â”‚   â””â”€â”€ api.js                   # Groups, permissions, users\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ“ activity/                 # Activity logging\nâ”‚   â”‚   â”‚   â””â”€â”€ api.js                   # Activity log endpoints\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ“¤ upload/                   # File upload\nâ”‚   â”‚   â”‚   â””â”€â”€ api.js                   # Media upload endpoints\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â””â”€â”€ â¤ï¸ health/                   # Health monitoring\nâ”‚   â”‚       â”œâ”€â”€ api.js                   # Health check endpoints\nâ”‚   â”‚       â””â”€â”€ test-sentry.js           # Sentry test endpoint\nâ”‚   â”‚\nâ”‚   â”œâ”€â”€ ğŸ“ src/                          # Source code modules\nâ”‚   â”‚   â”œâ”€â”€ ğŸ” authenticate/             # Authentication logic\nâ”‚   â”‚   â”‚   â”œâ”€â”€ authenticate.js          # JWT validation\nâ”‚   â”‚   â”‚   â”œâ”€â”€ checkpoint.js            # User authentication\nâ”‚   â”‚   â”‚   â”œâ”€â”€ models.js                # User models\nâ”‚   â”‚   â”‚   â””â”€â”€ otp_cache.js             # OTP management\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ“Š activity/                 # Activity logging\nâ”‚   â”‚   â”‚   â””â”€â”€ activityLog.js          # Activity log service\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ’¾ cache/                    # Caching layer\nâ”‚   â”‚   â”‚   â””â”€â”€ cache.js                # Redis cache utilities\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ âš™ï¸ config/                   # Configuration\nâ”‚   â”‚   â”‚   â””â”€â”€ swagger.js               # Swagger/OpenAPI config\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ—„ï¸ db/                       # Database layer\nâ”‚   â”‚   â”‚   â”œâ”€â”€ prisma.js                # Prisma client setup\nâ”‚   â”‚   â”‚   â”œâ”€â”€ index.js                 # Database utilities\nâ”‚   â”‚   â”‚   â””â”€â”€ postgres/                # PostgreSQL utilities\nâ”‚   â”‚   â”‚       â”œâ”€â”€ postgres.js          # Connection pool\nâ”‚   â”‚   â”‚       â””â”€â”€ initTriggers.js      # Database triggers\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ“§ email/                    # Email service\nâ”‚   â”‚   â”‚   â”œâ”€â”€ email.js                 # Email sending\nâ”‚   â”‚   â”‚   â””â”€â”€ template.js              # Email templates\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ“‹ enum/                     # Enumerations\nâ”‚   â”‚   â”‚   â””â”€â”€ enum.js                  # Application enums\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ“ logger/                   # Logging system\nâ”‚   â”‚   â”‚   â””â”€â”€ logger.js                # Winston logger\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ›¡ï¸ middleware/               # Express middleware\nâ”‚   â”‚   â”‚   â”œâ”€â”€ errorHandler.js          # Global error handler\nâ”‚   â”‚   â”‚   â”œâ”€â”€ permissionMiddleware.js   # Permission checking\nâ”‚   â”‚   â”‚   â”œâ”€â”€ requestLogger.js         # Request logging\nâ”‚   â”‚   â”‚   â”œâ”€â”€ requestQueue.js          # Request queuing\nâ”‚   â”‚   â”‚   â””â”€â”€ securityMiddleware.js    # Security checks\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ”‘ permissions/               # Permission system\nâ”‚   â”‚   â”‚   â””â”€â”€ permissions.js            # Permission utilities\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ“¤ response/                  # Response handlers\nâ”‚   â”‚   â”‚   â”œâ”€â”€ success.js               # Success responses\nâ”‚   â”‚   â”‚   â”œâ”€â”€ error.js                 # Error responses\nâ”‚   â”‚   â”‚   â””â”€â”€ map.js                   # Response mapping\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ› sentry/                    # Error tracking\nâ”‚   â”‚   â”‚   â””â”€â”€ sentry.js                # Sentry configuration\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ“± sms/                       # SMS service\nâ”‚   â”‚   â”‚   â””â”€â”€ sms.js                   # Twilio integration\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ’¾ storage/                   # File storage\nâ”‚   â”‚   â”‚   â””â”€â”€ storage.js               # Google Cloud Storage\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â”œâ”€â”€ ğŸ› ï¸ utils/                     # Utilities\nâ”‚   â”‚   â”‚   â”œâ”€â”€ debug.js                 # Debug utilities\nâ”‚   â”‚   â”‚   â””â”€â”€ workerUtils.js           # Worker pool utilities\nâ”‚   â”‚   â”‚\nâ”‚   â”‚   â””â”€â”€ ğŸ‘· workers/                   # Worker threads\nâ”‚   â”‚       â”œâ”€â”€ workerPool.js            # Worker pool manager\nâ”‚   â”‚       â””â”€â”€ cpuTaskWorker.js         # CPU task worker\nâ”‚   â”‚\nâ”‚   â”œâ”€â”€ ğŸ“ prisma/                        # Prisma ORM\nâ”‚   â”‚   â”œâ”€â”€ schema.prisma                # Database schema\nâ”‚   â”‚   â”œâ”€â”€ seed.js                      # Database seeding\nâ”‚   â”‚   â””â”€â”€ seed-defaults.js             # Default seed data\nâ”‚   â”‚\nâ”‚   â”œâ”€â”€ ğŸ“ credentials/                   # Service credentials\nâ”‚   â”‚   â””â”€â”€ google-backend-master.json   # GCS credentials\nâ”‚   â”‚\nâ”‚   â”œâ”€â”€ ğŸ“ logs/                          # Application logs\nâ”‚   â”‚   â”œâ”€â”€ errors-server.log            # Error logs\nâ”‚   â”‚   â””â”€â”€ success-server.log           # Success logs\nâ”‚   â”‚\nâ”‚   â””â”€â”€ ğŸ“ scripts/                       # Utility scripts\nâ”‚       â”œâ”€â”€ kill-port.sh                 # Port cleanup\nâ”‚       â””â”€â”€ db-sync.sh                   # Database sync\nâ”‚\nâ”œâ”€â”€ ğŸ“ nginx/                             # Nginx configuration\nâ”‚   â”œâ”€â”€ nginx.conf                        # Main nginx config\nâ”‚   â”œâ”€â”€ proxy.conf                        # Proxy settings\nâ”‚   â”œâ”€â”€ security.conf                    # Security headers\nâ”‚   â””â”€â”€ conf.d/                          # Additional configs\nâ”‚       â”œâ”€â”€ default.conf                 # Default server config\nâ”‚       â””â”€â”€ security.conf                # Security rules\nâ”‚\nâ”œâ”€â”€ ğŸ“„ docker-compose.yaml                # Docker Compose config\nâ”œâ”€â”€ ğŸ“„ reload.sh                          # Deployment script\nâ””â”€â”€ ğŸ“„ README.md                          # This file\n\n ```\n\n## ğŸ“¦ Installation & Setup\n\n### Prerequisites\n\n**System Requirements:**\n\n- **OS**: Linux (Ubuntu 20.04+), macOS, or Windows with WSL2\n    \n- **Node.js**: 18.0 or higher\n    \n- **npm**: 9.0 or higher\n    \n- **PostgreSQL**: 12+ (for production)\n    \n- **Redis**: 6+ (optional, for caching)\n    \n- **Docker**: 20.10+ (for containerized deployment)\n    \n- **Docker Compose**: 2.0+ (for multi-container orchestration)\n    \n- **Google Cloud Storage**: Account and bucket (for media files)\n    \n\n**Development Tools:**\n\n- Git 2.30+\n    \n- Code editor (VS Code recommended)\n    \n- Postman or similar API testing tool\n    \n\n### Quick Start\n\n#### Step 1: Clone Repository\n\n``` bash\ngit clone https://github.com/fullstack-open-source/nodejs-backend-with-sql.git\ncd nodejs-backend\n\n ```\n\n#### Step 2: Setup Environment\n\n``` bash\n# Copy example environment file\ncp example.env .env\n# Edit .env file with your configuration\nnano .env\n\n ```\n\n#### Step 3: Start Services with Docker Compose\n\n``` bash\n# Create Docker network (if not exists)\ndocker network create nodejs_backend_with_postgresql_network\n# Start all services\ndocker compose up -d\n# Check service status\ndocker compose ps\n# View logs\ndocker compose logs -f api\n\n ```\n\n#### Step 4: Setup Database Schema\n\n``` bash\n# Generate Prisma Client\ndocker compose exec api npm run prisma:generate\n# Push schema to database\ndocker compose exec api npm run db:push\n# Seed database (optional)\ndocker compose exec api npm run db:seed\n\n ```\n\n#### Step 5: Access Services\n\n- **API Base**: [http://localhost:9080](http://localhost:9080)\n    \n- **API Docs**: [http://localhost:9080/api-docs](http://localhost:9080/api-docs)\n    \n- **Health Check**: [http://localhost:9080/health](http://localhost:9080/health) (no prefix) or [http://localhost:9080/{MODE}/health](http://localhost:9080/{MODE}/health)\n    \n- **API Routes**: [http://localhost:9080/{MODE}/](http://localhost:9080/{MODE}/)\\* (e.g., /prod/v1/authenticate, /dev/v1/token)\n    \n- **pgAdmin**: [http://localhost:5050](http://localhost:5050) (if enabled)\n    \n\n**Note:** Replace `{MODE}` with your configured MODE value (e.g., `prod/v1` or `dev/v1`)\n\n### API Route Prefix (MODE)\n\nAll API routes are prefixed with the `MODE` environment variable. This allows you to version your API and separate environments.\n\n**Configuration in** **`.env`****:**\n\n``` bash\nMODE=prod/v1    # For production API version 1\n# or\nMODE=dev/v1     # For development API version 1\n\n ```\n\n**API Route Examples:**\n\nIf `MODE=prod/v1`, all routes will be prefixed with `/prod/v1/`:\n\n- Health Check: `http://localhost:9080/prod/v1/health`\n    \n- Authentication: `http://localhost:9080/prod/v1/authenticate`\n    \n- Login: `http://localhost:9080/prod/v1/token`\n    \n- Profile: `http://localhost:9080/prod/v1/settings`\n    \n- Dashboard: `http://localhost:9080/prod/v1/dashboard`\n    \n- Permissions: `http://localhost:9080/prod/v1/permissions`\n    \n- Activity: `http://localhost:9080/prod/v1/activity`\n    \n\nIf `MODE=dev/v1`, all routes will be prefixed with `/dev/v1/`:\n\n- Health Check: `http://localhost:9080/dev/v1/health`\n    \n- Authentication: `http://localhost:9080/dev/v1/authenticate`\n    \n- Login: `http://localhost:9080/dev/v1/token`\n    \n- Profile: `http://localhost:9080/dev/v1/settings`\n    \n- Dashboard: `http://localhost:9080/dev/v1/dashboard`\n    \n- Permissions: `http://localhost:9080/dev/v1/permissions`\n    \n- Activity: `http://localhost:9080/dev/v1/activity`\n    \n\n**Note:** The `/health` endpoint is available without the MODE prefix for health checks:\n\n- Direct Health Check: `http://localhost:9080/health` (no prefix)\n    \n\n### Development Setup\n\n#### Step 1: System Preparation\n\n``` bash\n# Update system packages\nsudo apt update && sudo apt upgrade -y\n# Install Node.js 18+\ncurl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -\nsudo apt install -y nodejs\n# Install Docker (optional, for containerized development)\ncurl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\nsudo apt install docker-compose-plugin -y\n\n ```\n\n#### Step 2: Project Setup\n\n``` bash\n# Clone repository\ngit clone https://github.com/fullstack-open-source/nodejs-backend-with-sql.git\ncd nodejs-backend/api\n# Install dependencies\nnpm install\n\n ```\n\n#### Step 3: Environment Configuration\n\n``` bash\n# Copy example environment file\ncp ../example.env ../.env\n# Edit .env file with your settings\nnano ../.env\n\n ```\n\n#### Step 4: Database Setup (Local PostgreSQL)\n\n``` bash\n# Install PostgreSQL\nsudo apt install postgresql postgresql-contrib -y\n# Create database and user\nsudo -u postgres psql << EOF\nCREATE DATABASE nodejs_backend;\nCREATE USER nodejs_user WITH PASSWORD 'your_password';\nGRANT ALL PRIVILEGES ON DATABASE nodejs_backend TO nodejs_user;\n\\q\nEOF\n# Update .env with local database connection\n# DATABASE_URL=postgresql://nodejs_user:your_password@localhost:5432/nodejs_backend\n\n ```\n\n#### Step 5: Prisma Setup\n\n``` bash\n# Generate Prisma Client\nnpm run prisma:generate\n# Push schema to database\nnpm run db:push\n# Open Prisma Studio (optional)\nnpm run prisma:studio\n\n ```\n\n#### Step 6: Seed Database (Optional)\n\n``` bash\n# Seed with default data\nnpm run db:seed\n\n ```\n\n#### Step 7: Start Development Server\n\n``` bash\n# Development mode with auto-reload\nnpm run dev\n# Or start directly\nnpm start\n\n ```\n\n#### Step 8: Access Application\n\n- **API Base**: [http://localhost:3000](http://localhost:3000)\n    \n- **API Docs**: [http://localhost:3000/api-docs](http://localhost:3000/api-docs)\n    \n- **Health Check**: [http://localhost:3000/health](http://localhost:3000/health) (no prefix) or [http://localhost:3000/{MODE}/health](http://localhost:3000/{MODE}/health)\n    \n- **API Routes**: [http://localhost:3000/{MODE}/](http://localhost:3000/{MODE}/)\\* (e.g., /prod/v1/authenticate, /dev/v1/token)\n    \n- **Prisma Studio**: [http://localhost:5555](http://localhost:5555) (if running)\n    \n\n**Note:** Replace `{MODE}` with your configured MODE value (e.g., `prod/v1` or `dev/v1`)\n\n### Production Setup\n\n#### Step 1: Server Preparation\n\n``` bash\n# Update system\nsudo apt update && sudo apt upgrade -y\n# Install Node.js 18+\ncurl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -\nsudo apt install -y nodejs\n# Install PM2\nnpm install -g pm2\n# Install Docker\ncurl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\nsudo apt install docker-compose-plugin -y\n\n ```\n\n#### Step 2: Clone and Setup Project\n\n``` bash\n# Clone repository\ngit clone https://github.com/fullstack-open-source/nodejs-backend-with-sql.git\ncd nodejs-backend\n# Create production .env file\ncp example.env .env\n# Edit .env file with production settings\nnano .env\n\n ```\n\n**Important**: Update `.env` file with production values:\n\n- Set `NODE_ENV=production`\n    \n- Set `API_MODE=production`\n    \n- Set `DEBUG_MODE=false`\n    \n- Configure production database credentials\n    \n- Set strong JWT secret (generate with: `openssl rand -base64 32`)\n    \n- Configure production Redis, Sentry, and other services\n    \n\n#### Step 3: Deploy with Docker (Recommended)\n\n``` bash\n# Build and start services\ndocker compose build\ndocker compose up -d\n# Check status\ndocker compose ps\n# View logs\ndocker compose logs -f api\n# Run migrations\ndocker compose exec api npm run db:push\n\n ```\n\n#### Step 4: Or Deploy with PM2\n\n``` bash\ncd api\n# Generate Prisma Client\nnpm run prisma:generate\n# Start with PM2\nnpm run pm2:start\n# Check status\npm2 status\n# View logs\npm2 logs\n# Monitor\npm2 monit\n\n ```\n\n#### Step 5: Configure External Proxy (Nginx)\n\n``` bash\n# Install Nginx\nsudo apt install nginx -y\n# Create Nginx config\nsudo nano /etc/nginx/sites-available/api.example.com\n\n ```\n\nAdd configuration:\n\n``` nginx\nserver {\n    listen 80;\n    server_name api.example.com;\n    location / {\n        proxy_pass http://localhost:9080;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n}\n\n ```\n\n``` bash\n# Enable site\nsudo ln -s /etc/nginx/sites-available/api.example.com /etc/nginx/sites-enabled/\nsudo nginx -t\nsudo systemctl reload nginx\n\n ```\n\n### Docker Setup\n\n#### Step 1: Prerequisites\n\n``` bash\n# Check Docker version\ndocker --version\ndocker compose version\n# Install Docker if needed\ncurl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\nsudo apt install docker-compose-plugin -y\n\n ```\n\n#### Step 2: Docker Compose Services\n\nThe `docker-compose.yaml` includes:\n\n- **api**: Node.js application (Express server)\n    \n- **db**: PostgreSQL database\n    \n- **redis**: Redis cache and session store\n    \n- **nginx**: Internal reverse proxy\n    \n- **pgadmin**: PostgreSQL admin interface\n    \n\n#### Step 3: Build and Start Services\n\n``` bash\n# Create Docker network\ndocker network create nodejs_backend_with_postgresql_network\n# Build images\ndocker compose build\n# Start all services\ndocker compose up -d\n# View all logs\ndocker compose logs -f\n# View specific service logs\ndocker compose logs -f api\ndocker compose logs -f nginx\n\n ```\n\n#### Step 4: Service Management\n\n``` bash\n# Stop services\ndocker compose stop\n# Start services\ndocker compose start\n# Restart services\ndocker compose restart\n# Restart specific service\ndocker compose restart api\n# Stop and remove containers\ndocker compose down\n# Stop, remove containers, and volumes\ndocker compose down -v\n\n ```\n\n#### Step 5: Execute Commands in Containers\n\n``` bash\n# Run Prisma migrations\ndocker compose exec api npm run db:push\n# Generate Prisma Client\ndocker compose exec api npm run prisma:generate\n# Access container shell\ndocker compose exec api sh\n# Run database seed\ndocker compose exec api npm run db:seed\n# Access PostgreSQL\ndocker compose exec db psql -U postgres -d postgres\n\n ```\n\n#### Step 6: Health Checks\n\n``` bash\n# Check service health\ndocker compose ps\n# Test API health endpoint\ncurl http://localhost:8900/health\n# Test Nginx health endpoint\ncurl http://localhost:9080/health\n# Check database connection\ndocker compose exec api npm run prisma:studio\n\n ```\n\n#### Step 7: Network Configuration\n\n``` bash\n# Create network (if not exists)\ndocker network create nodejs_backend_with_postgresql_network\n# Verify network\ndocker network ls\n# Inspect network\ndocker network inspect nodejs_backend_with_postgresql_network\n\n ```\n\n## ğŸ”„ Complete Project Workflow\n\n### Service Connection Architecture\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    Docker Network                                â”‚\nâ”‚              (nodejs_backend_with_postgresql_network)            â”‚\nâ”‚                                                                  â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚\nâ”‚  â”‚   Client     â”‚                                               â”‚\nâ”‚  â”‚  (Browser)   â”‚                                               â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚\nâ”‚         â”‚                                                        â”‚\nâ”‚         â”‚ HTTP/HTTPS (Port 9080)                                â”‚\nâ”‚         â–¼                                                        â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚  Nginx Service                                           â”‚   â”‚\nâ”‚  â”‚  Container: nodejs-backend-nginx                        â”‚   â”‚\nâ”‚  â”‚  Port: 9080:80 (host:container)                         â”‚   â”‚\nâ”‚  â”‚  Config: ./nginx/nginx.conf                             â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚         â”‚                                                        â”‚\nâ”‚         â”‚ Proxy to http://api:3000                              â”‚\nâ”‚         â–¼                                                        â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚  API Service (Node.js/Express)                          â”‚   â”‚\nâ”‚  â”‚  Container: nodejs-backend                              â”‚   â”‚\nâ”‚  â”‚  Port: 3000 (internal only)                             â”‚   â”‚\nâ”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚\nâ”‚  â”‚  â”‚  Prisma Client                                    â”‚ â”‚   â”‚\nâ”‚  â”‚  â”‚  - Reads schema.prisma                            â”‚ â”‚   â”‚\nâ”‚  â”‚  â”‚  - Generates type-safe queries                    â”‚ â”‚   â”‚\nâ”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚            â”‚                                                    â”‚\nâ”‚            â”‚ PostgreSQL Connection                              â”‚\nâ”‚            â”‚ (postgresql://postgres:postgres@                   â”‚\nâ”‚            â”‚  nodejs-backend-db:5432/postgres)                 â”‚\nâ”‚            â–¼                                                    â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚  PostgreSQL Service                                     â”‚   â”‚\nâ”‚  â”‚  Container: nodejs-backend-db                          â”‚   â”‚\nâ”‚  â”‚  Port: 5432 (internal only)                             â”‚   â”‚\nâ”‚  â”‚  Volume: postgres_data (persistent)                    â”‚   â”‚\nâ”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚\nâ”‚  â”‚  â”‚  Database: postgres                                 â”‚ â”‚   â”‚\nâ”‚  â”‚  â”‚  - User table                                       â”‚ â”‚   â”‚\nâ”‚  â”‚  â”‚  - Permission table                                 â”‚ â”‚   â”‚\nâ”‚  â”‚  â”‚  - Group table                                      â”‚ â”‚   â”‚\nâ”‚  â”‚  â”‚  - ActivityLog table                                â”‚ â”‚   â”‚\nâ”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚            â–²                                                    â”‚\nâ”‚            â”‚                                                    â”‚\nâ”‚            â”‚ Redis Connection                                   â”‚\nâ”‚            â”‚ (redis://nodejs-backend-redis:6379)                â”‚\nâ”‚            â”‚                                                    â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚  Redis Service                                        â”‚   â”‚\nâ”‚  â”‚  Container: nodejs-backend-redis                     â”‚   â”‚\nâ”‚  â”‚  Port: 6379 (internal only)                          â”‚   â”‚\nâ”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚\nâ”‚  â”‚  â”‚  Cache Storage                                  â”‚ â”‚   â”‚\nâ”‚  â”‚  â”‚  - OTP cache                                    â”‚ â”‚   â”‚\nâ”‚  â”‚  â”‚  - Session storage                              â”‚ â”‚   â”‚\nâ”‚  â”‚  â”‚  - Rate limiting data                          â”‚ â”‚   â”‚\nâ”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ”‚                                                                  â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚\nâ”‚  â”‚  pgAdmin Service (Optional)                             â”‚   â”‚\nâ”‚  â”‚  Container: nodejs-backend-pgadmin                     â”‚   â”‚\nâ”‚  â”‚  Port: 5050:80 (host:container)                        â”‚   â”‚\nâ”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚\nâ”‚  â”‚  â”‚  Web Interface                                    â”‚ â”‚   â”‚\nâ”‚  â”‚  â”‚  - Database management                            â”‚ â”‚   â”‚\nâ”‚  â”‚  â”‚  - Query execution                                â”‚ â”‚   â”‚\nâ”‚  â”‚  â”‚  - Schema visualization                           â”‚ â”‚   â”‚\nâ”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚\nâ”‚  â”‚         â”‚                                                â”‚   â”‚\nâ”‚  â”‚         â”‚ PostgreSQL Connection                          â”‚   â”‚\nâ”‚  â”‚         â”‚ (nodejs-backend-db:5432)                      â”‚   â”‚\nâ”‚  â”‚         â–¼                                                â”‚   â”‚\nâ”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚\nâ”‚  â”‚  â”‚  Connects to PostgreSQL Service                 â”‚   â”‚   â”‚\nâ”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n ```\n\n### Service Startup Order\n\n```\n1. Docker Network\n   â””â”€â–º nodejs_backend_with_postgresql_network\n2. Database Services (Start First)\n   â”œâ”€â–º PostgreSQL (nodejs-backend-db:5432)\n   â””â”€â–º Redis (nodejs-backend-redis:6379)\n3. API Service (Waits for Database Health Checks)\n   â”œâ”€â–º Connects to PostgreSQL via Prisma\n   â””â”€â–º Connects to Redis for Cache\n4. Nginx Service (Waits for API Health Check)\n   â””â”€â–º Proxies to API (http://api:3000)\n5. pgAdmin Service (Optional, Waits for Database)\n   â””â”€â–º Connects to PostgreSQL\n\n ```\n\n### Connection Flow\n\n```\nClient Request\n    â”‚\n    â–¼\nPort 9080 (Host) â”€â”€â–º Nginx â”€â”€â–º Port 3000 â”€â”€â–º API Service\n                                         â”‚\n                                         â”œâ”€â–º PostgreSQL (Port 5432)\n                                         â””â”€â–º Redis (Port 6379)\n\n ```\n\n---\n\n## ğŸ“„ License & Open Source\n\nThis project is **open source** and **free to use** for all purposes with **no restrictions**.\n\n### ğŸ¯ Open Source License\n\nThis project is released under the **ISC License**, which means:\n\n- âœ… **Free to use** for any purpose (commercial or personal)\n    \n- âœ… **No restrictions** on usage, modification, or distribution\n    \n- âœ… **No warranty** provided\n    \n- âœ… **Attribution** is appreciated but not required\n    \n\n### ğŸ™ Technologies & Acknowledgments\n\nThis project is built with amazing open-source technologies. Special thanks to:\n\n#### Core Framework & Runtime\n\n- [<b>Node.js</b>](https://nodejs.org/) - JavaScript runtime built on Chrome's V8 engine\n    \n- [<b>Express.js</b>](https://expressjs.com/) - Fast, unopinionated web framework for Node.js\n    \n\n#### Database & ORM\n\n- [<b>PostgreSQL</b>](https://www.postgresql.org/) - Advanced open-source relational database\n    \n- [<b>Prisma</b>](https://www.prisma.io/) - Next-generation ORM for Node.js and TypeScript\n    \n- [<b>Redis</b>](https://redis.io/) - In-memory data structure store\n    \n\n#### Security & Authentication\n\n- [<b>JWT (jsonwebtoken)</b>](https://github.com/auth0/node-jsonwebtoken) - JSON Web Token implementation\n    \n- [<b>bcryptjs</b>](https://github.com/dcodeIO/bcrypt.js) - Password hashing library\n    \n- [<b>Helmet</b>](https://helmetjs.github.io/) - Security middleware for Express\n    \n\n#### Monitoring & Logging\n\n- [<b>Winston</b>](https://github.com/winstonjs/winston) - Logging library for Node.js\n    \n- [<b>Sentry</b>](https://sentry.io/) - Error tracking and performance monitoring\n    \n- [<b>Morgan</b>](https://github.com/expressjs/morgan) - HTTP request logger middleware\n    \n\n#### API Documentation\n\n- [<b>Swagger</b>](https://swagger.io/) - API documentation and testing tools\n    \n- [<b>swagger-jsdoc</b>](https://github.com/Swaagie/swagger-jsdoc) - Swagger specification generator\n    \n- [<b>swagger-ui-express</b>](https://github.com/scottie1984/swagger-ui-express) - Swagger UI for Express\n    \n\n#### Utilities & Middleware\n\n- [<b>CORS</b>](https://github.com/expressjs/cors) - Cross-Origin Resource Sharing middleware\n    \n- [<b>compression</b>](https://github.com/expressjs/compression) - Response compression middleware\n    \n- [<b>express-rate-limit</b>](https://github.com/expressjs/express-rate-limit) - Rate limiting middleware\n    \n- [<b>express-validator</b>](https://express-validator.github.io/) - Request validation middleware\n    \n- [<b>Joi</b>](https://joi.dev/) - Schema validation library\n    \n\n#### Communication Services\n\n- [<b>Nodemailer</b>](https://nodemailer.com/) - Email sending library\n    \n- [<b>Twilio</b>](https://www.twilio.com/) - Cloud communications platform\n    \n\n#### Storage\n\n- [<b>Google Cloud Storage</b>](https://cloud.google.com/storage) - Object storage service\n    \n- [<b>Multer</b>](https://github.com/expressjs/multer) - File upload middleware\n    \n\n#### Process Management\n\n- [<b>PM2</b>](https://pm2.keymetrics.io/) - Production process manager for Node.js\n    \n\n#### Containerization\n\n- [<b>Docker</b>](https://www.docker.com/) - Containerization platform\n    \n- [<b>Docker Compose</b>](https://docs.docker.com/compose/) - Multi-container Docker application tool\n    \n\n#### Web Server\n\n- [<b>Nginx</b>](https://www.nginx.com/) - High-performance web server and reverse proxy\n    \n\n### ğŸŒŸ Contributing\n\nContributions are welcome! This is an open-source project, and we encourage:\n\n- ğŸ› Bug reports\n    \n- ğŸ’¡ Feature requests\n    \n- ğŸ“ Documentation improvements\n    \n- ğŸ”§ Code contributions\n    \n- â­ Starring the repository\n    \n\n### ğŸ“ Support\n\nFor issues, questions, or contributions, please visit:\n\n- **Repository**: [https://github.com/fullstack-open-source/nodejs-backend-with-sql](https://github.com/fullstack-open-source/nodejs-backend-with-sql)\n    \n- **Issues**: Open an issue on GitHub\n    \n\n---\n\n**Made with â¤ï¸ using open-source technologies**\n\n_This project is free to use, modify, and distribute for any purpose without restrictions._",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "token",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "ee8c08d2-2ed7-488d-b099-b926b161ebb4",
								"exec": [
									"const response = pm.response.json();",
									"",
									"// Check if the response succeeded",
									"if (response.success && response.data) {",
									"    if (response.data.access_token) {",
									"        pm.environment.set(\"access_token\", response.data.access_token);",
									"        console.log(\"Access token updated:\", response.data.access_token);",
									"    }",
									"",
									"    if (response.data.refresh_token) {",
									"        pm.environment.set(\"refresh_token\", response.data.refresh_token);",
									"        console.log(\"Refresh token updated:\", response.data.refresh_token);",
									"    }",
									"} else {",
									"    console.log(\"No token found in response:\", response);",
									"}",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "55e4de5f-c498-49aa-99ab-3d939901a1c3",
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"id": "50285861-59f57d76-988c-4738-8bed-fce9ed027390",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"mrdasdeveloper2@gmail.com\",\n  \"password\": \"Admin@404!!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/token",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"token"
							]
						}
					},
					"response": []
				},
				{
					"name": "login-with-password",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9da54e2d-88f7-4052-b537-17901a7deb21",
								"exec": [
									"const response = pm.response.json();",
									"",
									"// Check if the response succeeded",
									"if (response.success && response.data) {",
									"    if (response.data.access_token) {",
									"        pm.environment.set(\"access_token\", response.data.access_token);",
									"        console.log(\"Access token updated:\", response.data.access_token);",
									"    }",
									"",
									"    if (response.data.refresh_token) {",
									"        pm.environment.set(\"refresh_token\", response.data.refresh_token);",
									"        console.log(\"Refresh token updated:\", response.data.refresh_token);",
									"    }",
									"} else {",
									"    console.log(\"No token found in response:\", response);",
									"}",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "667bea99-b73c-4c1b-b60b-fbafce058078",
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"id": "50285861-338431cf-addb-48fc-9bc2-5a0340974aa3",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"mrdasdeveloper2@gmail.com\",\n  \"password\": \"Admin@404!!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/login-with-password",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"login-with-password"
							]
						}
					},
					"response": [
						{
							"id": "50285861-ddcfd2a0-ce0f-4748-a390-635742c8b5f9",
							"name": "success",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "username",
											"value": "admin@gmail.com",
											"type": "text",
											"disabled": true
										},
										{
											"key": "password",
											"value": "Admin@404!!",
											"type": "text",
											"disabled": true
										},
										{
											"key": "username",
											"value": "+96555139166",
											"type": "text",
											"disabled": true
										},
										{
											"key": "password",
											"value": "Mrdasdeveloper@2021!!",
											"type": "text",
											"disabled": true
										},
										{
											"key": "username",
											"value": "mrdas4321@gmail.com",
											"type": "text",
											"disabled": true
										},
										{
											"key": "password",
											"value": "Qwer4321!",
											"type": "text"
										},
										{
											"key": "username",
											"value": "+96598379785",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/auth/login-with-password",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"auth",
										"login-with-password"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Thu, 13 Nov 2025 06:43:28 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "1882"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"f39942d1-3fd8-4c7f-a910-589c46cfa15b\",\n    \"message\": \"Login successful\",\n    \"data\": {\n        \"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxYTFhMTcyOC05MTkwLTQ1YWUtODUyZC00ZDVmYWNiMDY2MGUiLCJ1c2VybmFtZSI6Ijk2NTk4Mzc5Nzg1IiwiZmlyc3RfbmFtZSI6ImFhIiwibGFzdF9uYW1lIjoiYWEiLCJlbWFpbCI6bnVsbCwiZXhwIjoxNzYzMDE5ODA4LCJpYXQiOjE3NjMwMTYyMDgsImp0aSI6ImU2Yzg3ZGNjLTA5NzYtNGE0Yi05MTk0LTdiZTM3Njg4OGEyYiIsInR5cGUiOiJhY2Nlc3MiLCJ1c2VyX3Byb2ZpbGUiOnsidXNlcl9pZCI6IjFhMWExNzI4LTkxOTAtNDVhZS04NTJkLTRkNWZhY2IwNjYwZSIsImVtYWlsIjpudWxsLCJmaXJzdF9uYW1lIjoiYWEiLCJsYXN0X25hbWUiOiJhYSIsInVzZXJfbmFtZSI6Ijk2NTk4Mzc5Nzg1IiwicGhvbmVfbnVtYmVyIjp7InBob25lIjoiKzk2NTk4Mzc5Nzg1In0sImNvdW50cnkiOm51bGwsImRvYiI6bnVsbCwicHJvZmlsZV9waWN0dXJlX3VybCI6bnVsbCwiYmlvIjpudWxsLCJwb3J0Zm9saW9fdXJsIjpudWxsLCJzaG93X2tsaWt5X3dhdGVybWFyayI6dHJ1ZSwiYWRzX3Nob3dfdHlwZSI6InB1YmxpYyIsImF1dGhfdHlwZSI6InBob25lIiwidGhlbWUiOiJsaWdodCIsInByb2ZpbGVfYWNjZXNzaWJpbGl0eSI6InB1YmxpYyIsInVzZXJfdHlwZSI6ImN1c3RvbWVyIiwibGFuZ3VhZ2UiOiJlbiIsImlzX2RyYWZ0IjpmYWxzZSwiaXNfZGVsZXRlZCI6ZmFsc2UsInN0YXR1cyI6IkFjdGl2ZSIsInJvbGVfaWQiOm51bGwsInRpbWV6b25lIjpudWxsLCJpbnZpdGVkX2J5X3VzZXJfaWQiOm51bGwsImlzX3Byb3RlY3RlZCI6ZmFsc2UsImlzX3RyYXNoZWQiOmZhbHNlLCJsYXN0X3NpZ25faW5fYXQiOiIyMDI1LTExLTEzVDA2OjIzOjI5LjI3MzE3NyswMDowMCIsImVtYWlsX3ZlcmlmaWVkX2F0IjpudWxsLCJjcmVhdGVkX2F0IjoiMjAyNS0xMS0xM1QwNjoyMzoyNi4zODk4NDcrMDA6MDAiLCJsYXN0X3VwZGF0ZWQiOiIyMDI1LTExLTEzVDA2OjIzOjU1LjA3Mzg4NyswMDowMCJ9LCJwZXJtaXNzaW9ucyI6eyJpc19zdXBlcnVzZXIiOmZhbHNlLCJpc19hZG1pbiI6ZmFsc2UsImlzX2J1c2luZXNzIjpmYWxzZSwiaXNfYWNjb3VudGFudCI6ZmFsc2UsImlzX2RldmVsb3BlciI6ZmFsc2UsImlzX3VzZXIiOnRydWUsImlzX2FjdGl2ZSI6dHJ1ZSwiaXNfdmVyaWZpZWQiOnRydWV9LCJhdWQiOiJhdXRoZW50aWNhdGVkIiwib3JpZ2luIjoiaHR0cHM6Ly92My5zdGFnaW5nLndpbnN0YS5wcm8ifQ.K2Sm0FUHg8Tj2mYaa0i1Ak9lRt2sd07ZHcrh1b30MfU\",\n        \"token_type\": \"bearer\"\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-13T06:43:28.980740Z\"\n}"
						}
					]
				},
				{
					"name": "login-with-otp",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9da54e2d-88f7-4052-b537-17901a7deb21",
								"exec": [
									"const response = pm.response.json();",
									"",
									"// Check if the response succeeded",
									"if (response.success && response.data) {",
									"    if (response.data.access_token) {",
									"        pm.environment.set(\"access_token\", response.data.access_token);",
									"        console.log(\"Access token updated:\", response.data.access_token);",
									"    }",
									"",
									"    if (response.data.refresh_token) {",
									"        pm.environment.set(\"refresh_token\", response.data.refresh_token);",
									"        console.log(\"Refresh token updated:\", response.data.refresh_token);",
									"    }",
									"} else {",
									"    console.log(\"No token found in response:\", response);",
									"}",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "667bea99-b73c-4c1b-b60b-fbafce058078",
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"id": "50285861-e8fba3dd-3cb1-4a6f-abe4-c3363254a749",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"user_id\": \"mrdasdeveloper2@gmail.com\",\n  \"channel\": \"email\",\n  \"otp\": \"123456\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/login-with-otp",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"login-with-otp"
							]
						}
					},
					"response": [
						{
							"id": "50285861-e5077a64-fde2-41bc-8378-3542809e2ec6",
							"name": "success",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "username",
											"value": "admin@gmail.com",
											"type": "text",
											"disabled": true
										},
										{
											"key": "password",
											"value": "Admin@404!!",
											"type": "text",
											"disabled": true
										},
										{
											"key": "username",
											"value": "+96555139166",
											"type": "text",
											"disabled": true
										},
										{
											"key": "password",
											"value": "Mrdasdeveloper@2021!!",
											"type": "text",
											"disabled": true
										},
										{
											"key": "username",
											"value": "mrdas4321@gmail.com",
											"type": "text",
											"disabled": true
										},
										{
											"key": "password",
											"value": "Qwer4321!",
											"type": "text"
										},
										{
											"key": "username",
											"value": "+96598379785",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/auth/login-with-password",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"auth",
										"login-with-password"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Thu, 13 Nov 2025 06:43:28 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "1882"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"f39942d1-3fd8-4c7f-a910-589c46cfa15b\",\n    \"message\": \"Login successful\",\n    \"data\": {\n        \"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxYTFhMTcyOC05MTkwLTQ1YWUtODUyZC00ZDVmYWNiMDY2MGUiLCJ1c2VybmFtZSI6Ijk2NTk4Mzc5Nzg1IiwiZmlyc3RfbmFtZSI6ImFhIiwibGFzdF9uYW1lIjoiYWEiLCJlbWFpbCI6bnVsbCwiZXhwIjoxNzYzMDE5ODA4LCJpYXQiOjE3NjMwMTYyMDgsImp0aSI6ImU2Yzg3ZGNjLTA5NzYtNGE0Yi05MTk0LTdiZTM3Njg4OGEyYiIsInR5cGUiOiJhY2Nlc3MiLCJ1c2VyX3Byb2ZpbGUiOnsidXNlcl9pZCI6IjFhMWExNzI4LTkxOTAtNDVhZS04NTJkLTRkNWZhY2IwNjYwZSIsImVtYWlsIjpudWxsLCJmaXJzdF9uYW1lIjoiYWEiLCJsYXN0X25hbWUiOiJhYSIsInVzZXJfbmFtZSI6Ijk2NTk4Mzc5Nzg1IiwicGhvbmVfbnVtYmVyIjp7InBob25lIjoiKzk2NTk4Mzc5Nzg1In0sImNvdW50cnkiOm51bGwsImRvYiI6bnVsbCwicHJvZmlsZV9waWN0dXJlX3VybCI6bnVsbCwiYmlvIjpudWxsLCJwb3J0Zm9saW9fdXJsIjpudWxsLCJzaG93X2tsaWt5X3dhdGVybWFyayI6dHJ1ZSwiYWRzX3Nob3dfdHlwZSI6InB1YmxpYyIsImF1dGhfdHlwZSI6InBob25lIiwidGhlbWUiOiJsaWdodCIsInByb2ZpbGVfYWNjZXNzaWJpbGl0eSI6InB1YmxpYyIsInVzZXJfdHlwZSI6ImN1c3RvbWVyIiwibGFuZ3VhZ2UiOiJlbiIsImlzX2RyYWZ0IjpmYWxzZSwiaXNfZGVsZXRlZCI6ZmFsc2UsInN0YXR1cyI6IkFjdGl2ZSIsInJvbGVfaWQiOm51bGwsInRpbWV6b25lIjpudWxsLCJpbnZpdGVkX2J5X3VzZXJfaWQiOm51bGwsImlzX3Byb3RlY3RlZCI6ZmFsc2UsImlzX3RyYXNoZWQiOmZhbHNlLCJsYXN0X3NpZ25faW5fYXQiOiIyMDI1LTExLTEzVDA2OjIzOjI5LjI3MzE3NyswMDowMCIsImVtYWlsX3ZlcmlmaWVkX2F0IjpudWxsLCJjcmVhdGVkX2F0IjoiMjAyNS0xMS0xM1QwNjoyMzoyNi4zODk4NDcrMDA6MDAiLCJsYXN0X3VwZGF0ZWQiOiIyMDI1LTExLTEzVDA2OjIzOjU1LjA3Mzg4NyswMDowMCJ9LCJwZXJtaXNzaW9ucyI6eyJpc19zdXBlcnVzZXIiOmZhbHNlLCJpc19hZG1pbiI6ZmFsc2UsImlzX2J1c2luZXNzIjpmYWxzZSwiaXNfYWNjb3VudGFudCI6ZmFsc2UsImlzX2RldmVsb3BlciI6ZmFsc2UsImlzX3VzZXIiOnRydWUsImlzX2FjdGl2ZSI6dHJ1ZSwiaXNfdmVyaWZpZWQiOnRydWV9LCJhdWQiOiJhdXRoZW50aWNhdGVkIiwib3JpZ2luIjoiaHR0cHM6Ly92My5zdGFnaW5nLndpbnN0YS5wcm8ifQ.K2Sm0FUHg8Tj2mYaa0i1Ak9lRt2sd07ZHcrh1b30MfU\",\n        \"token_type\": \"bearer\"\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-13T06:43:28.980740Z\"\n}"
						}
					]
				},
				{
					"name": "check-user-availability",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();",
									"",
									"// Check if the response succeeded",
									"if (response.success && response.data) {",
									"    if (response.data.access_token) {",
									"        pm.environment.set(\"access_token\", response.data.access_token);",
									"        console.log(\"Access token updated:\", response.data.access_token);",
									"    }",
									"",
									"    if (response.data.refresh_token) {",
									"        pm.environment.set(\"refresh_token\", response.data.refresh_token);",
									"        console.log(\"Refresh token updated:\", response.data.refresh_token);",
									"    }",
									"} else {",
									"    console.log(\"No token found in response:\", response);",
									"}",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {},
								"id": "d04dca64-d801-4e01-8422-3d0e89a80afa"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {},
								"id": "dfcc3792-3016-448b-a864-84d7a11685a0"
							}
						}
					],
					"id": "50285861-947516d3-9163-4e50-9ae3-e9cca0ef56d4",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"user_id\": \"admin@gmail.com\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/check-user-availability",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"check-user-availability"
							]
						}
					},
					"response": [
						{
							"id": "50285861-67737252-9a75-42a0-96ad-e758b223d291",
							"name": "success",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"user_id\": \"+96598379785\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/auth/check-user-availability",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"auth",
										"check-user-availability"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "Text",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Tue, 18 Nov 2025 05:44:58 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "Content-Length",
									"value": "221"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"ae60ef2a-af4a-4eb0-bc25-fffc1ce08d10\",\n    \"message\": \"User is not available\",\n    \"data\": {\n        \"available\": false,\n        \"first_name\": null,\n        \"last_name\": null\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-18T05:44:58.600406Z\"\n}"
						}
					]
				},
				{
					"name": "send-one-time-password",
					"id": "50285861-37e01f89-848a-4be5-a855-ea5e15609d52",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"user_id\": \"mrdasdeveloper@gmail.com\",\n  \"channel\": \"email\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/send-one-time-password",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"send-one-time-password"
							]
						}
					},
					"response": [
						{
							"id": "50285861-50b76049-f280-453e-abf4-4e6b06b1d96b",
							"name": "success",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"user_id\": \"+96598379784\",\n  \"channel\": \"sms\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/auth/send-one-time-password",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"auth",
										"send-one-time-password"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "Text",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Thu, 13 Nov 2025 06:21:20 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "Content-Length",
									"value": "202"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"48d6631f-d79c-46cf-ba49-6c7fe2311997\",\n    \"message\": \"OTP sent successfully\",\n    \"data\": {\n        \"message\": \"OTP sent successfully\"\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-13T06:21:20.628884Z\"\n}"
						}
					]
				},
				{
					"name": "verify-one-time-password",
					"id": "50285861-15fd2bb3-aa07-456a-80a1-ce604a8c738c",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"user_id\": \"+96598379782\",\n  \"channel\": \"sms\",\n  \"otp\": \"123456\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/verify-one-time-password",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"verify-one-time-password"
							]
						}
					},
					"response": [
						{
							"id": "50285861-27b80c77-ce53-4bd8-83d2-9d9796c7ab23",
							"name": "success",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"user_id\": \"+96598379785\",\n  \"channel\": \"sms\",\n  \"otp\": \"473245\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/auth/verify-one-time-password",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"auth",
										"verify-one-time-password"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "Text",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Thu, 13 Nov 2025 08:05:22 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "Content-Length",
									"value": "223"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"94e5ae63-f091-44c1-b25e-9eebb540b387\",\n    \"message\": \"Verify Successfully\",\n    \"data\": {\n        \"user_id\": \"+96598379785\",\n        \"message\": \"Verify Successfully\"\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-13T08:05:22.776751Z\"\n}"
						}
					]
				},
				{
					"name": "Verify Signup",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "40c58a56-18e9-406d-a359-e4fbb3b81b0c",
								"exec": [
									"const response = pm.response.json();",
									"",
									"// Check if the response succeeded",
									"if (response.success && response.data) {",
									"    if (response.data.access_token) {",
									"        pm.environment.set(\"access_token\", response.data.access_token);",
									"        console.log(\"Access token updated:\", response.data.access_token);",
									"    }",
									"",
									"    if (response.data.refresh_token) {",
									"        pm.environment.set(\"refresh_token\", response.data.refresh_token);",
									"        console.log(\"Refresh token updated:\", response.data.refresh_token);",
									"    }",
									"} else {",
									"    console.log(\"No token found in response:\", response);",
									"}",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "ceed1457-28c6-4cd7-89f4-568299864ed5",
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"id": "50285861-8310d9a1-7227-4e8a-8277-b380233e685b",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"user_id\": \"mrdasdeveloper1@gmail.com\",\n  \"channel\": \"email\",\n  \"otp\": \"123456\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/verify",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"verify"
							]
						}
					},
					"response": [
						{
							"id": "50285861-553ebb0e-da8e-4127-8921-055ed7b5a051",
							"name": "success",
							"originalRequest": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"user_id\": \"+96598379784\",\n  \"channel\": \"sms\",\n  \"otp\": \"553916\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/auth/verify",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"auth",
										"verify"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Thu, 13 Nov 2025 06:21:51 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "2483"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"fcbd4a21-228b-44f4-948e-51d49e08f934\",\n    \"message\": \"Signup successful\",\n    \"data\": {\n        \"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI0MDYyMzc0ZS1mYzNkLTQ4NGEtODE3OC1jMGZhZDg2YTA3YjYiLCJ1c2VybmFtZSI6Ijk2NTk4Mzc5Nzg0IiwiZmlyc3RfbmFtZSI6bnVsbCwibGFzdF9uYW1lIjpudWxsLCJlbWFpbCI6bnVsbCwiZXhwIjoxNzYzMDE4NTExLCJpYXQiOjE3NjMwMTQ5MTEsImp0aSI6IjZlMTI1OWUyLWRkMmMtNDNhNS05YzQzLTJmYThjZTI4NDRiMCIsInR5cGUiOiJhY2Nlc3MiLCJ1c2VyX3Byb2ZpbGUiOnsidXNlcl9pZCI6IjQwNjIzNzRlLWZjM2QtNDg0YS04MTc4LWMwZmFkODZhMDdiNiIsImVtYWlsIjpudWxsLCJmaXJzdF9uYW1lIjpudWxsLCJsYXN0X25hbWUiOm51bGwsInVzZXJfbmFtZSI6Ijk2NTk4Mzc5Nzg0IiwicGhvbmVfbnVtYmVyIjp7InBob25lIjoiKzk2NTk4Mzc5Nzg0In0sImNvdW50cnkiOm51bGwsImRvYiI6bnVsbCwicHJvZmlsZV9waWN0dXJlX3VybCI6bnVsbCwiYmlvIjpudWxsLCJwb3J0Zm9saW9fdXJsIjpudWxsLCJzaG93X2tsaWt5X3dhdGVybWFyayI6dHJ1ZSwiYWRzX3Nob3dfdHlwZSI6InB1YmxpYyIsImF1dGhfdHlwZSI6InBob25lIiwidGhlbWUiOiJsaWdodCIsInByb2ZpbGVfYWNjZXNzaWJpbGl0eSI6InB1YmxpYyIsInVzZXJfdHlwZSI6ImN1c3RvbWVyIiwibGFuZ3VhZ2UiOiJlbiIsImlzX2RyYWZ0IjpmYWxzZSwiaXNfZGVsZXRlZCI6ZmFsc2UsInN0YXR1cyI6IkFjdGl2ZSIsInJvbGVfaWQiOm51bGwsInRpbWV6b25lIjpudWxsLCJpbnZpdGVkX2J5X3VzZXJfaWQiOm51bGwsImlzX3Byb3RlY3RlZCI6ZmFsc2UsImlzX3RyYXNoZWQiOmZhbHNlLCJsYXN0X3NpZ25faW5fYXQiOm51bGwsImVtYWlsX3ZlcmlmaWVkX2F0IjpudWxsLCJjcmVhdGVkX2F0IjoiMjAyNS0xMS0xM1QwNjoyMTo0Ny43ODc4MzgrMDA6MDAiLCJsYXN0X3VwZGF0ZWQiOiIyMDI1LTExLTEzVDA2OjIxOjQ3Ljc4NzgzOCswMDowMCJ9LCJwZXJtaXNzaW9ucyI6eyJpc19zdXBlcnVzZXIiOmZhbHNlLCJpc19hZG1pbiI6ZmFsc2UsImlzX2J1c2luZXNzIjpmYWxzZSwiaXNfYWNjb3VudGFudCI6ZmFsc2UsImlzX2RldmVsb3BlciI6ZmFsc2UsImlzX3VzZXIiOnRydWUsImlzX2FjdGl2ZSI6dHJ1ZSwiaXNfdmVyaWZpZWQiOnRydWV9LCJhdWQiOiJhdXRoZW50aWNhdGVkIiwib3JpZ2luIjoiaHR0cHM6Ly92My5zdGFnaW5nLndpbnN0YS5wcm8ifQ.m4bFg4EugMKOzGNweOH7pzj8jhnYY5bGpmJ0v1Pnvns\",\n        \"token_type\": \"bearer\",\n        \"user\": {\n            \"user_id\": \"4062374e-fc3d-484a-8178-c0fad86a07b6\",\n            \"phone_number\": {\n                \"phone\": \"+96598379784\"\n            },\n            \"user_name\": \"96598379784\",\n            \"show_kliky_watermark\": true,\n            \"ads_show_type\": \"public\",\n            \"auth_type\": \"phone\",\n            \"theme\": \"light\",\n            \"profile_accessibility\": \"public\",\n            \"user_type\": \"customer\",\n            \"language\": \"en\",\n            \"is_draft\": false,\n            \"is_active\": true,\n            \"is_verified\": true,\n            \"is_deleted\": false,\n            \"status\": \"Active\",\n            \"is_protected\": false,\n            \"is_trashed\": false,\n            \"created_at\": \"2025-11-13T06:21:47.787838+00:00\",\n            \"last_updated\": \"2025-11-13T06:21:47.787838+00:00\",\n            \"is_user\": true,\n            \"is_superuser\": false,\n            \"is_admin\": false,\n            \"is_business\": false,\n            \"is_accountant\": false,\n            \"is_developer\": false,\n            \"posts\": []\n        }\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-13T06:21:51.249808Z\"\n}"
						}
					]
				},
				{
					"name": "set-password",
					"id": "50285861-ddb20581-12de-4dbc-91ac-7d80e1850838",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"password\": \"Admin@404!!\",\n  \"confirm_password\": \"Admin@404!!\"\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/set-password",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"set-password"
							]
						}
					},
					"response": []
				},
				{
					"name": "change-password",
					"id": "50285861-37e43a41-a25d-4fef-b496-c2b35eb2b9ac",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "// {\n//   \"user_id\":\"klikyng3@gmail.com\",\n//   \"channel\": \"email\",  \n//   \"old_password\": \"Mrdasdeveloper@2021!!\",\n//   \"password\": \"Klikyng@2021!!\",\n//   \"confirm_password\": \"Klikyng@2021!!\"\n// }\n\n{\n  \"user_id\":\"+96598379555\",\n  \"channel\": \"sms\",  \n  \"old_password\": \"Mrdasdeveloper@2021!!\",\n  \"password\": \"Klikyng@2021!!\",\n  \"confirm_password\": \"Klikyng@2021!!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/change-password",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"change-password"
							]
						}
					},
					"response": []
				},
				{
					"name": "forget-password",
					"id": "50285861-24eddeb5-8ccf-47a0-ae6a-4655e053f128",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "\n{\n  \"user_id\":\"+96598379785\",\n  \"otp\":\"473245\",\n  \"password\": \"Klikyng@2021!!\",\n  \"confirm_password\": \"Klikyng@2021!!\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/forget-password",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"forget-password"
							]
						}
					},
					"response": []
				},
				{
					"name": "logout",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const response = pm.response.json();",
									"if (response.access_token) {",
									"    pm.environment.set(\"access_token\", response.access_token);",
									"    console.log(\"Access token updated:\", response.access_token);",
									"}",
									"",
									"if (response.refresh_token) {",
									"    pm.environment.set(\"refresh_token\", response.refresh_token);",
									"    console.log(\"Refresh token updated:\", response.refresh_token);",
									"}"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {},
								"id": "604b282f-aab8-4f23-a331-e075e414204a"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {},
								"id": "b4fd74c5-d5ab-435f-ac56-7aa9e2502435"
							}
						}
					],
					"id": "50285861-d6608eef-b7c4-4eb7-8380-7d7ed0cfabae",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"token\": \"{{access_token}}\"\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/logout",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"logout"
							]
						}
					},
					"response": []
				},
				{
					"name": "verify-email-and-phone",
					"id": "50285861-710632b0-b9a0-44c5-bf32-053cb6a107a3",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"user_id\": \"mahdi.mansournia@gmail.com\",\n  \"channel\": \"email\",\n  \"otp\": \"123456\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/verify-email-and-phone",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"verify-email-and-phone"
							]
						}
					},
					"response": []
				}
			],
			"id": "50285861-9818ab4d-73f9-4f00-a9e2-77877be017da",
			"description": "# Authentication Router\n\n> **Complete Documentation for User Authentication Endpoints** \n  \n\nThis router handles all user authentication operations including login, registration, password management, OTP verification, and user availability checks.\n\n## ğŸ“‹ Table of Contents\n\n- [Overview](#overview)\n    \n- [Endpoints](#endpoints)\n    \n    - [Login with Password](#login-with-password)\n        \n    - [Send OTP](#send-otp)\n        \n    - [Verify OTP](#verify-otp)\n        \n    - [Login with OTP](#login-with-otp)\n        \n    - [Signup/Register](#signupregister)\n        \n    - [Set Password](#set-password)\n        \n    - [Change Password](#change-password)\n        \n    - [Forget Password](#forget-password)\n        \n    - [Logout](#logout)\n        \n    - [Check User Availability](#check-user-availability)\n        \n    - [Verify Email and Phone](#verify-email-and-phone)\n        \n- [Workflows](#workflows)\n    \n- [Error Handling](#error-handling)\n    \n\n## Overview\n\nThe Authentication router provides comprehensive user authentication functionality including:\n\n- **Password-based Authentication**: Traditional email/phone + password login\n    \n- **OTP-based Authentication**: One-time password via email, SMS, or WhatsApp\n    \n- **User Registration**: Account creation with OTP verification\n    \n- **Password Management**: Set, change, and reset passwords\n    \n- **User Verification**: Email and phone number verification\n    \n\n**Base Path:** `/{MODE}/auth` or `/{MODE}/token` or `/{MODE}/logout`\n\n**Authentication:** Most endpoints do not require authentication (except password change and logout)\n\n## Endpoints\n\n### Login with Password\n\n**Endpoint:** `POST /{MODE}/token` or `POST /{MODE}/auth/login-with-password`\n\n**Description:** Authenticate user with email/phone and password. Returns JWT access token upon successful authentication.\n\n**Authentication:** Not required\n\n**Request Body:**\n\n``` json\n{\n  \"username\": \"user@example.com\",\n  \"password\": \"your-password\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Login successful\",\n  \"data\": {\n    \"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n    \"token_type\": \"bearer\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Client Request\n   â”‚\n   â”œâ”€â–º Validate Request Format\n   â”‚   â”œâ”€â–º Check username exists\n   â”‚   â””â”€â–º Check password exists\n   â”‚\n   â”œâ”€â–º Authenticate User\n   â”‚   â”œâ”€â–º Get User by Email/Phone\n   â”‚   â”œâ”€â–º Verify Password (bcrypt)\n   â”‚   â”œâ”€â–º Check User Status (is_active, is_verified)\n   â”‚   â””â”€â–º Update Last Sign-in\n   â”‚\n   â”œâ”€â–º Generate JWT Token\n   â”‚   â”œâ”€â–º Include User ID\n   â”‚   â”œâ”€â–º Include Permissions\n   â”‚   â”œâ”€â–º Set Expiration (JWT_EXPIRES_IN)\n   â”‚   â””â”€â–º Sign with JWT_SECRET\n   â”‚\n   â””â”€â–º Return Access Token\n\n ```\n\n**Use Cases:**\n\n- User login\n    \n- Session establishment\n    \n- API access token generation\n    \n\n---\n\n### Send OTP\n\n**Endpoint:** `POST /{MODE}/auth/send-one-time-password`\n\n**Description:** Send one-time password via email, SMS, or WhatsApp. OTP is valid for 10 minutes.\n\n**Authentication:** Not required\n\n**Request Body:**\n\n``` json\n{\n  \"user_id\": \"user@example.com\",\n  \"channel\": \"email\"\n}\n\n ```\n\n**Channel Options:**\n\n- `email`: Send OTP via email\n    \n- `sms`: Send OTP via SMS\n    \n- `whatsapp`: Send OTP via WhatsApp\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"OTP sent successfully\",\n  \"data\": {\n    \"message\": \"OTP sent successfully\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Client Request\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â”œâ”€â–º user_id required\n   â”‚   â””â”€â–º channel required (email/sms/whatsapp)\n   â”‚\n   â”œâ”€â–º Generate OTP\n   â”‚   â”œâ”€â–º Generate 6-digit code\n   â”‚   â””â”€â–º Store in Redis (600 seconds TTL)\n   â”‚\n   â”œâ”€â–º Send OTP via Channel\n   â”‚   â”œâ”€â–º email â†’ Send Email via Nodemailer\n   â”‚   â”œâ”€â–º sms â†’ Send SMS via Twilio\n   â”‚   â””â”€â–º whatsapp â†’ Send WhatsApp via Twilio\n   â”‚\n   â””â”€â–º Return Success Response\n\n ```\n\n**Use Cases:**\n\n- Password reset\n    \n- Email/phone verification\n    \n- Two-factor authentication\n    \n- Account recovery\n    \n\n---\n\n### Verify OTP\n\n**Endpoint:** `POST /{MODE}/auth/verify-one-time-password`\n\n**Description:** Verify one-time password without logging in. Used for verification purposes.\n\n**Authentication:** Not required\n\n**Request Body:**\n\n``` json\n{\n  \"user_id\": \"user@example.com\",\n  \"channel\": \"email\",\n  \"otp\": \"123456\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Verify Successfully\",\n  \"data\": {\n    \"user_id\": \"user@example.com\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Client Request\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â”œâ”€â–º user_id required\n   â”‚   â”œâ”€â–º channel required\n   â”‚   â””â”€â–º otp required\n   â”‚\n   â”œâ”€â–º Verify OTP\n   â”‚   â”œâ”€â–º Get OTP from Redis\n   â”‚   â”œâ”€â–º Compare with provided OTP\n   â”‚   â””â”€â–º Check expiration\n   â”‚\n   â””â”€â–º Return Verification Result\n       â””â”€â–º OTP not deleted (for reuse)\n\n ```\n\n**Use Cases:**\n\n- Email verification\n    \n- Phone verification\n    \n- Pre-login verification\n    \n\n---\n\n### Login with OTP\n\n**Endpoint:** `POST /{MODE}/auth/login-with-otp`\n\n**Description:** Verify OTP and login user. Returns access token upon successful verification. OTP is deleted after successful login.\n\n**Authentication:** Not required\n\n**Request Body:**\n\n``` json\n{\n  \"user_id\": \"user@example.com\",\n  \"channel\": \"email\",\n  \"otp\": \"123456\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Login successful\",\n  \"data\": {\n    \"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n    \"token_type\": \"bearer\",\n    \"user\": {\n      \"user_id\": \"uuid\",\n      \"email\": \"user@example.com\",\n      \"first_name\": \"John\",\n      \"last_name\": \"Doe\"\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Client Request\n   â”‚\n   â”œâ”€â–º Validate Request Format\n   â”‚   â”œâ”€â–º Validate email/phone format\n   â”‚   â””â”€â–º Check required fields\n   â”‚\n   â”œâ”€â–º Get User\n   â”‚   â””â”€â–º getUserByEmailOrPhone()\n   â”‚\n   â”œâ”€â–º Check User Status\n   â”‚   â”œâ”€â–º is_active = true\n   â”‚   â””â”€â–º is_verified = true\n   â”‚\n   â”œâ”€â–º Verify OTP\n   â”‚   â”œâ”€â–º Get OTP from Redis\n   â”‚   â”œâ”€â–º Compare with provided OTP\n   â”‚   â””â”€â–º Delete OTP (consume=true)\n   â”‚\n   â”œâ”€â–º Update Last Sign-in\n   â”‚   â””â”€â–º updateLastSignIn()\n   â”‚\n   â”œâ”€â–º Generate Access Token\n   â”‚   â””â”€â–º generateAccessToken()\n   â”‚\n   â””â”€â–º Return Token + User Data\n\n ```\n\n**Use Cases:**\n\n- Passwordless login\n    \n- Quick authentication\n    \n- Mobile app login\n    \n\n---\n\n### Signup/Register\n\n**Endpoint:** `POST /{MODE}/auth/verify`\n\n**Description:** Verify OTP and create new user account. Supports master OTP for admin account creation.\n\n**Authentication:** Not required\n\n**Request Body:**\n\n``` json\n{\n  \"user_id\": \"user@example.com\",\n  \"channel\": \"email\",\n  \"otp\": \"123456\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Signup successful\",\n  \"data\": {\n    \"access_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n    \"token_type\": \"bearer\",\n    \"user\": { ... }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Client Request\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â”œâ”€â–º user_id required\n   â”‚   â”œâ”€â–º channel required\n   â”‚   â””â”€â–º otp required\n   â”‚\n   â”œâ”€â–º Check Master OTP (if applicable)\n   â”‚   â””â”€â–º If master OTP, skip verification\n   â”‚\n   â”œâ”€â–º Verify OTP\n   â”‚   â””â”€â–º verifyOtp() (consume=false)\n   â”‚\n   â”œâ”€â–º Validate Email/Phone Format\n   â”‚   â”œâ”€â–º Email â†’ validateEmail()\n   â”‚   â””â”€â–º Phone â†’ validatePhone()\n   â”‚\n   â”œâ”€â–º Check User Exists\n   â”‚   â””â”€â–º getUserByEmailOrPhone()\n   â”‚\n   â”œâ”€â–º Create User Account\n   â”‚   â”œâ”€â–º Set Default Values\n   â”‚   â”‚   â”œâ”€â–º is_active: true\n   â”‚   â”‚   â”œâ”€â–º is_verified: true\n   â”‚   â”‚   â”œâ”€â–º profile_accessibility: public\n   â”‚   â”‚   â”œâ”€â–º theme: light\n   â”‚   â”‚   â”œâ”€â–º user_type: customer\n   â”‚   â”‚   â”œâ”€â–º language: en\n   â”‚   â”‚   â””â”€â–º status: ACTIVE\n   â”‚   â”œâ”€â–º Set Auth Type\n   â”‚   â”‚   â”œâ”€â–º email â†’ AuthTypeEnum.email\n   â”‚   â”‚   â””â”€â–º phone â†’ AuthTypeEnum.phone\n   â”‚   â””â”€â–º Set Verification Status\n   â”‚       â”œâ”€â–º Email verified if channel=email\n   â”‚       â””â”€â–º Phone verified if channel=sms/whatsapp\n   â”‚\n   â”œâ”€â–º Assign Groups (if master OTP)\n   â”‚   â””â”€â–º Assign admin group\n   â”‚\n   â”œâ”€â–º Authenticate User\n   â”‚   â””â”€â–º authenticateUserWithData()\n   â”‚\n   â”œâ”€â–º Delete OTP (if not master OTP)\n   â”‚   â””â”€â–º verifyOtp(consume=true)\n   â”‚\n   â””â”€â–º Return Access Token + User Data\n\n ```\n\n**Special Features:**\n\n- **Master OTP**: If `MASTER_OTP` environment variable matches, user is assigned admin group\n    \n- **Auto-verification**: Email/phone is automatically verified during signup\n    \n- **Default Settings**: New users get sensible defaults\n    \n\n**Use Cases:**\n\n- New user registration\n    \n- Account creation\n    \n- Onboarding flow\n    \n\n---\n\n### Set Password\n\n**Endpoint:** `POST /{MODE}/auth/set-password`\n\n**Description:** Set password for authenticated user (for users who signed up with OTP).\n\n**Authentication:** Required  \n**Permission:** `edit_profile`\n\n**Request Body:**\n\n``` json\n{\n  \"password\": \"new-password\",\n  \"confirm_password\": \"new-password\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Password set successfully\",\n  \"data\": {\n    \"message\": \"Password set successfully\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â”œâ”€â–º password required\n   â”‚   â”œâ”€â–º confirm_password required\n   â”‚   â””â”€â–º password === confirm_password\n   â”‚\n   â”œâ”€â–º Hash Password\n   â”‚   â””â”€â–º bcrypt.hash() (10 rounds)\n   â”‚\n   â”œâ”€â–º Update User Password\n   â”‚   â””â”€â–º updateUserPassword()\n   â”‚\n   â””â”€â–º Return Success Response\n\n ```\n\n**Use Cases:**\n\n- Initial password setup\n    \n- Passwordless signup completion\n    \n\n---\n\n### Change Password\n\n**Endpoint:** `POST /{MODE}/auth/change-password`\n\n**Description:** Change user's existing password. Requires old password verification.\n\n**Authentication:** Required  \n**Permission:** `edit_profile`\n\n**Request Body:**\n\n``` json\n{\n  \"user_id\": \"user@example.com\",\n  \"channel\": \"email\",\n  \"old_password\": \"current-password\",\n  \"password\": \"new-password\",\n  \"confirm_password\": \"new-password\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Password updated successfully\",\n  \"data\": {\n    \"message\": \"Password updated successfully\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â”œâ”€â–º user_id required\n   â”‚   â”œâ”€â–º old_password required\n   â”‚   â”œâ”€â–º password required\n   â”‚   â””â”€â–º confirm_password required\n   â”‚\n   â”œâ”€â–º Verify Old Password\n   â”‚   â”œâ”€â–º authenticateUser(user_id, old_password)\n   â”‚   â””â”€â–º Check if valid\n   â”‚\n   â”œâ”€â–º Hash New Password\n   â”‚   â””â”€â–º bcrypt.hash()\n   â”‚\n   â”œâ”€â–º Update User Password\n   â”‚   â””â”€â–º updateUserPassword(currentUserId, newPassword)\n   â”‚\n   â””â”€â–º Return Success Response\n\n ```\n\n**Use Cases:**\n\n- Password change\n    \n- Security updates\n    \n- Account security\n    \n\n---\n\n### Forget Password\n\n**Endpoint:** `POST /{MODE}/auth/forget-password`\n\n**Description:** Reset password after verifying OTP. Used for password recovery.\n\n**Authentication:** Not required\n\n**Request Body:**\n\n``` json\n{\n  \"user_id\": \"user@example.com\",\n  \"otp\": \"123456\",\n  \"password\": \"new-password\",\n  \"confirm_password\": \"new-password\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Password updated successfully\",\n  \"data\": {\n    \"message\": \"Password updated successfully\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Client Request\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â”œâ”€â–º user_id required\n   â”‚   â”œâ”€â–º otp required\n   â”‚   â”œâ”€â–º password required\n   â”‚   â””â”€â–º confirm_password required\n   â”‚\n   â”œâ”€â–º Verify OTP\n   â”‚   â””â”€â–º verifyOtp(user_id, otp)\n   â”‚\n   â”œâ”€â–º Validate Email/Phone Format\n   â”‚   â””â”€â–º validateEmail() or validatePhone()\n   â”‚\n   â”œâ”€â–º Get User\n   â”‚   â””â”€â–º getUserByEmailOrPhone()\n   â”‚\n   â”œâ”€â–º Hash New Password\n   â”‚   â””â”€â–º bcrypt.hash()\n   â”‚\n   â”œâ”€â–º Update User Password\n   â”‚   â””â”€â–º updateUserPassword()\n   â”‚\n   â””â”€â–º Return Success Response\n\n ```\n\n**Use Cases:**\n\n- Password recovery\n    \n- Account reset\n    \n- Security recovery\n    \n\n---\n\n### Logout\n\n**Endpoint:** `POST /{MODE}/logout`\n\n**Description:** Logout user. Returns user data (token invalidation handled client-side).\n\n**Authentication:** Required  \n**Permission:** `view_profile`\n\n**Request Body:** None\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Successfully fetched user data\",\n  \"data\": {\n    \"user_id\": \"uuid\",\n    \"email\": \"user@example.com\",\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Serialize User Data\n   â”‚   â””â”€â–º serializeUserData(req.user)\n   â”‚\n   â””â”€â–º Return User Data\n\n ```\n\n**Note:** JWT tokens are stateless. Token invalidation should be handled client-side by removing the token from storage.\n\n**Use Cases:**\n\n- User logout\n    \n- Session termination\n    \n- Security logout\n    \n\n---\n\n### Check User Availability\n\n**Endpoint:** `POST /{MODE}/auth/check-user-availability`\n\n**Description:** Check if email or phone number is available for registration.\n\n**Authentication:** Not required\n\n**Request Body:**\n\n``` json\n{\n  \"user_id\": \"user@example.com\"\n}\n\n ```\n\n**Alternative:**\n\n``` json\n{\n  \"email\": \"user@example.com\"\n}\n\n ```\n\nor\n\n``` json\n{\n  \"phone\": \"+1234567890\"\n}\n\n ```\n\n**Response (Available):**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User is not available\",\n  \"data\": {\n    \"available\": false,\n    \"first_name\": null,\n    \"last_name\": null\n  }\n}\n\n ```\n\n**Response (Not Available):**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User is available\",\n  \"data\": {\n    \"available\": true,\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Client Request\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â”œâ”€â–º user_id OR email OR phone required\n   â”‚   â””â”€â–º Validate format (email or phone)\n   â”‚\n   â”œâ”€â–º Get User\n   â”‚   â””â”€â–º getUserByEmailOrPhone(identifier)\n   â”‚\n   â”œâ”€â–º Check Availability\n   â”‚   â”œâ”€â–º If user exists â†’ available: false\n   â”‚   â””â”€â–º If user not exists â†’ available: true\n   â”‚\n   â””â”€â–º Return Availability Status\n       â””â”€â–º Include user name if exists\n\n ```\n\n**Use Cases:**\n\n- Registration form validation\n    \n- Username/email availability check\n    \n- Phone number availability check\n    \n\n---\n\n### Verify Email and Phone\n\n**Endpoint:** `POST /{MODE}/auth/verify-email-and-phone`\n\n**Description:** Verify email or phone number with OTP.\n\n**Authentication:** Not required\n\n**Request Body:**\n\n``` json\n{\n  \"user_id\": \"user@example.com\",\n  \"channel\": \"email\",\n  \"otp\": \"123456\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Email/Phone verified successfully\",\n  \"data\": { ... }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Client Request\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â”œâ”€â–º user_id required\n   â”‚   â”œâ”€â–º channel required (email or sms)\n   â”‚   â””â”€â–º otp required\n   â”‚\n   â”œâ”€â–º Validate Channel\n   â”‚   â””â”€â–º Must be \"email\" or \"sms\"\n   â”‚\n   â”œâ”€â–º Validate Format\n   â”‚   â”œâ”€â–º Email â†’ validateEmail()\n   â”‚   â””â”€â–º Phone â†’ validatePhone()\n   â”‚\n   â”œâ”€â–º Verify OTP\n   â”‚   â””â”€â–º verifyOtp(user_id, otp, consume=false)\n   â”‚\n   â””â”€â–º Return Success Response\n\n ```\n\n**Use Cases:**\n\n- Email verification\n    \n- Phone verification\n    \n- Account verification\n    \n\n---\n\n## Workflows\n\n### Complete Authentication Flow\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚              User Authentication Flow                       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                              â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚  Registration?  â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                â”‚                         â”‚\n                â–¼                         â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚   Signup      â”‚         â”‚    Login      â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                         â”‚\n                â–¼                         â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚  Send OTP     â”‚         â”‚ Password/OTP  â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                         â”‚\n                â–¼                         â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚  Verify OTP   â”‚         â”‚ Authenticate  â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                         â”‚\n                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ Generate Token  â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚  Return Token   â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n ```\n\n### Password Reset Flow\n\n``` bash\n1. User Requests Password Reset\n   â”‚\n   â”œâ”€â–º POST /auth/send-one-time-password\n   â”‚   â””â”€â–º OTP sent to email/phone\n   â”‚\n   â”œâ”€â–º User Receives OTP\n   â”‚\n   â”œâ”€â–º POST /auth/forget-password\n   â”‚   â”œâ”€â–º Verify OTP\n   â”‚   â”œâ”€â–º Validate new password\n   â”‚   â””â”€â–º Update password\n   â”‚\n   â””â”€â–º Password Reset Complete\n\n ```\n\n## Error Handling\n\n### Common Error Responses\n\n**400 Bad Request - Invalid Payload:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Invalid request payload\",\n  \"error\": \"Validation error details\",\n  \"statusCode\": 400\n}\n\n ```\n\n**401 Unauthorized - Invalid Credentials:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Invalid credentials\",\n  \"error\": \"Email/phone or password is incorrect\",\n  \"statusCode\": 401\n}\n\n ```\n\n**401 Unauthorized - Invalid OTP:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Invalid OTP\",\n  \"error\": \"OTP is incorrect or expired\",\n  \"statusCode\": 401\n}\n\n ```\n\n**404 Not Found - User Not Found:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"User not found\",\n  \"error\": \"User with provided email/phone does not exist\",\n  \"statusCode\": 404\n}\n\n ```\n\n**409 Conflict - User Already Exists:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"User already exists\",\n  \"error\": \"User with this email/phone already registered\",\n  \"statusCode\": 409\n}\n\n ```\n\n---\n\n## Best Practices\n\n1. **Use Strong Passwords**: Enforce password complexity requirements\n    \n2. **OTP Expiration**: OTPs expire after 10 minutes for security\n    \n3. **Rate Limiting**: Implement rate limiting on authentication endpoints\n    \n4. **Token Storage**: Store JWT tokens securely (httpOnly cookies or secure storage)\n    \n5. **Password Hashing**: Always use bcrypt with appropriate salt rounds\n    \n6. **Email/Phone Validation**: Validate format before processing\n    \n7. **Error Messages**: Don't reveal if email/phone exists in system\n    \n8. **Master OTP**: Use master OTP only in development/staging environments\n    \n\n---\n\n**Last Updated**: January 2025",
			"auth": {
				"type": "bearer",
				"bearer": [
					{
						"key": "token",
						"value": "{{access_token}}",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							""
						],
						"id": "6d7fa04a-76a1-4c3b-ad25-8e74a87ff814"
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"packages": {},
						"requests": {},
						"exec": [
							"const response = pm.response.json();",
							"",
							"// Check if the response succeeded",
							"if (response.success && response.data) {",
							"    if (response.data.access_token) {",
							"        pm.environment.set(\"access_token\", response.data.access_token);",
							"        console.log(\"Access token updated:\", response.data.access_token);",
							"    }",
							"",
							"    if (response.data.refresh_token) {",
							"        pm.environment.set(\"refresh_token\", response.data.refresh_token);",
							"        console.log(\"Refresh token updated:\", response.data.refresh_token);",
							"    }",
							"} else {",
							"    console.log(\"No token found in response:\", response);",
							"}",
							""
						],
						"id": "82ee709b-ae6f-46c2-aafc-8db063620cd1"
					}
				}
			]
		},
		{
			"name": "Profile & Settings",
			"item": [
				{
					"name": "profile",
					"id": "50285861-5747096c-e93b-4314-8b4f-d1409a6d3169",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/settings/profile",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"settings",
								"profile"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-96fb4862-e6a9-4f3b-84a8-530a89a90e9e",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "get-user-profile",
					"id": "50285861-82210a87-07d9-496b-a601-47f770a0c14f",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/settings/profile/169ba70d-b3d8-413b-b07c-7413b9539c4b?page=1&page_size=1",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"settings",
								"profile",
								"169ba70d-b3d8-413b-b07c-7413b9539c4b"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "get-user-profile Copy",
					"id": "50285861-956ca3cf-6fb9-4cfa-a135-e36e5740c031",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/activity/users/169ba70d-b3d8-413b-b07c-7413b9539c4b/logs?limit=50&offset=0",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"activity",
								"users",
								"169ba70d-b3d8-413b-b07c-7413b9539c4b",
								"logs"
							],
							"query": [
								{
									"key": "limit",
									"value": "50"
								},
								{
									"key": "offset",
									"value": "0"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "get-settings",
					"id": "50285861-09503e96-d833-4b97-b4aa-ff37a4b5f545",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/settings/profile/9c93cc19-7325-45e4-8f03-7ea80850170d?page=1&page_size=1",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"settings",
								"profile",
								"9c93cc19-7325-45e4-8f03-7ea80850170d"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "page_size",
									"value": "1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "update-profile",
					"id": "50285861-3c4b8181-f10d-4fc9-9d26-873086422f18",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"first_name\": \"MR\",\n  \"last_name\": \"DAS\",\n  \"country\": \"Nepal\",\n  \"bio\": \"Full Stack Developer\",\n  \"email\": \"demo@gmail.com\",\n  \"language\": \"en\",\n  \"gender\":\"Male\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/settings/update-profile",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"settings",
								"update-profile"
							]
						}
					},
					"response": []
				},
				{
					"name": "update-profile-picture",
					"id": "50285861-1f89c3be-2784-4d6f-b594-52d0968af879",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "/home/mrdas/Downloads/Rameshkumardas.jpg"
								}
							]
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/settings/update-profile-picture",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"settings",
								"update-profile-picture"
							]
						}
					},
					"response": []
				},
				{
					"name": "change-email",
					"id": "50285861-531081ea-fb4c-4474-95b1-f3c488bf0d5d",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"new_email\": \"mrdasdeveloper@gmail.com\",\n  \"otp\": \"123456\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/settings/change-email",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"settings",
								"change-email"
							]
						}
					},
					"response": []
				},
				{
					"name": "change-phone",
					"id": "50285861-182286c4-3312-4ce9-a273-47386847e7e9",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"new_email\": \"mrdasdeveloper@gmail.com\",\n  \"otp\": \"123456\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/settings/change-email",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"settings",
								"change-email"
							]
						}
					},
					"response": []
				},
				{
					"name": "profile-accessibility",
					"id": "50285861-85bdc599-0965-4d3a-b423-2648c5620ed4",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"profile_accessibility\": \"private\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/settings/profile-accessibility",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"settings",
								"profile-accessibility"
							]
						}
					},
					"response": []
				},
				{
					"name": "update-theme",
					"id": "50285861-d1062077-2128-45cf-a0af-ec75ccee9c9b",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"theme\": \"light\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/settings/update-theme",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"settings",
								"update-theme"
							]
						}
					},
					"response": []
				},
				{
					"name": "profile-language",
					"id": "50285861-7e6a6314-9722-4fe4-ac13-cb673b6a154a",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"language\": \"en\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/settings/profile-language",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"settings",
								"profile-language"
							]
						}
					},
					"response": []
				},
				{
					"name": "update-timezone",
					"id": "50285861-2e5a3b25-c6f0-4025-9395-34b668d0eaec",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"timezone\": \"America/New_York\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/settings/update-timezone",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"settings",
								"update-timezone"
							]
						}
					},
					"response": []
				},
				{
					"name": "deactivate-account",
					"id": "50285861-0a4c8715-6e83-447b-ba66-f4be21fb3b39",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"language\": \"en\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/settings/profile-language",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"settings",
								"profile-language"
							]
						}
					},
					"response": []
				},
				{
					"name": "delete-account",
					"id": "50285861-7f8fdb19-787b-44ac-a01d-59a743fdc773",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"language\": \"en\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/settings/profile-language",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"settings",
								"profile-language"
							]
						}
					},
					"response": []
				}
			],
			"id": "50285861-235545eb-2047-4d51-98e9-5ec94089e6f6",
			"description": "# Profile Management Router\n\n> **Complete Documentation for User Profile and Settings Endpoints** \n  \n\nThis router handles all user profile management operations including profile retrieval, updates, email/phone changes, theme/language preferences, and account management.\n\n## ğŸ“‹ Table of Contents\n\n- [Overview](#overview)\n    \n- [Endpoints](#endpoints)\n    - [Get Profile](#get-profile)\n        \n    - [Update Profile Picture](#update-profile-picture)\n        \n    - [Update Profile](#update-profile)\n        \n    - [Update Profile Accessibility](#update-profile-accessibility)\n        \n    - [Update Profile Language](#update-profile-language)\n        \n    - [Change Email](#change-email)\n        \n    - [Change Phone](#change-phone)\n        \n    - [Send Phone OTP](#send-phone-otp)\n        \n    - [Update Theme](#update-theme)\n        \n    - [Deactivate Account](#deactivate-account)\n        \n    - [Delete Account](#delete-account)\n        \n    - [Get Settings](#get-settings)\n        \n    - [Update Timezone](#update-timezone)\n        \n- [Workflows](#workflows)\n    \n- [Error Handling](#error-handling)\n    \n\n## Overview\n\nThe Profile Management router provides comprehensive user profile and settings management including:\n\n- **Profile Information**: Retrieve and update user profile data\n    \n- **Media Management**: Upload and manage profile pictures\n    \n- **Contact Information**: Change email and phone numbers with verification\n    \n- **Preferences**: Manage theme, language, timezone, and accessibility settings\n    \n- **Account Management**: Deactivate or delete user accounts\n    \n\n**Base Path:** `/{MODE}/settings`\n\n**Authentication:** All endpoints require authentication\n\n**Permissions:** Most endpoints require `edit_profile` or `view_profile` permission\n\n## Endpoints\n\n### Get Profile\n\n**Endpoint:** `GET /{MODE}/settings/profile` or `GET /{MODE}/settings/profile/:user_id`\n\n**Description:** Get current authenticated user's profile or a specific user's profile by ID.\n\n**Authentication:** Required  \n**Permission:** `view_profile` (own profile) or `view_user` (other users)\n\n**Request:**\n\n``` http\nGET /dev/v1/settings/profile HTTP/1.1\nAuthorization: Bearer <token>\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User profile fetched successfully\",\n  \"data\": {\n    \"user_id\": \"uuid\",\n    \"email\": \"user@example.com\",\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\",\n    \"profile_picture_url\": \"https://storage.googleapis.com/...\",\n    \"bio\": \"User bio\",\n    \"country\": \"US\",\n    \"status\": \"ACTIVE\",\n    \"is_active\": true,\n    \"is_verified\": true,\n    \"is_email_verified\": true,\n    \"is_phone_verified\": true\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission\n   â”‚   â”œâ”€â–º Own profile â†’ view_profile\n   â”‚   â””â”€â–º Other user â†’ view_user\n   â”‚\n   â”œâ”€â–º Get User Data\n   â”‚   â””â”€â–º getUserByUserId(userId)\n   â”‚\n   â”œâ”€â–º Serialize Data\n   â”‚   â””â”€â–º Remove sensitive fields\n   â”‚\n   â””â”€â–º Return Profile Data\n\n ```\n\n---\n\n### Update Profile Picture\n\n**Endpoint:** `POST /{MODE}/settings/update-profile-picture`\n\n**Description:** Update user's profile picture. Uploads image to Google Cloud Storage.\n\n**Authentication:** Required  \n**Permission:** `edit_profile`\n\n**Request:** Multipart form data\n\n- `file`: Image file (max 15MB)\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Profile picture updated successfully\",\n  \"data\": {\n    \"profile_picture_url\": \"https://storage.googleapis.com/bucket-name/media/users/user-uuid-file.jpg\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_profile)\n   â”‚\n   â”œâ”€â–º Validate File Upload\n   â”‚   â””â”€â–º Check file exists\n   â”‚\n   â”œâ”€â–º Process File\n   â”‚   â”œâ”€â–º Extract file buffer\n   â”‚   â”œâ”€â–º Get file extension\n   â”‚   â””â”€â–º Get content type\n   â”‚\n   â”œâ”€â–º Generate Object Key\n   â”‚   â””â”€â–º {username}-user_id_{userId}-|-{uuid}.{ext}\n   â”‚\n   â”œâ”€â–º Upload to Google Cloud Storage\n   â”‚   â”œâ”€â–º Folder: media/users\n   â”‚   â””â”€â–º uploadToGoogleStorageFromString()\n   â”‚\n   â”œâ”€â–º Update Database\n   â”‚   â””â”€â–º Update profile_picture_url\n   â”‚\n   â””â”€â–º Return Public URL\n\n ```\n\n**Supported Formats:**\n\n- Images: jpg, jpeg, png, gif, webp\n    \n- Max Size: 15MB\n    \n\n---\n\n### Update Profile\n\n**Endpoint:** `POST /{MODE}/settings/update-profile`\n\n**Description:** Partially update user profile fields. Protected fields (user_id, email, phone) cannot be updated.\n\n**Authentication:** Required  \n**Permission:** `edit_profile`\n\n**Request Body:**\n\n``` json\n{\n  \"first_name\": \"John\",\n  \"last_name\": \"Doe\",\n  \"bio\": \"Updated bio\",\n  \"country\": \"US\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User profile update successfully\",\n  \"data\": {\n    \"user_id\": \"uuid\",\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\",\n    \"bio\": \"Updated bio\",\n    \"country\": \"US\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_profile)\n   â”‚\n   â”œâ”€â–º Remove Protected Fields\n   â”‚   â”œâ”€â–º user_id\n   â”‚   â”œâ”€â–º email (if exists)\n   â”‚   â””â”€â–º phone (if exists)\n   â”‚\n   â”œâ”€â–º Validate Update Data\n   â”‚   â””â”€â–º Check at least one field to update\n   â”‚\n   â”œâ”€â–º Update User in Database\n   â”‚   â””â”€â–º prisma.user.update()\n   â”‚\n   â”œâ”€â–º Fetch Updated User Data\n   â”‚   â””â”€â–º getUserByUserId()\n   â”‚\n   â””â”€â–º Return Updated Profile\n\n ```\n\n**Updatable Fields:**\n\n- `first_name`\n    \n- `last_name`\n    \n- `bio`\n    \n- `country`\n    \n- `profile_picture_url` (use update-profile-picture endpoint)\n    \n\n**Protected Fields:**\n\n- `user_id`\n    \n- `email` (use change-email endpoint)\n    \n- `phone_number` (use change-phone endpoint)\n    \n\n---\n\n### Update Profile Accessibility\n\n**Endpoint:** `POST /{MODE}/settings/profile-accessibility`\n\n**Description:** Update user's profile accessibility settings (public/private).\n\n**Authentication:** Required  \n**Permission:** `edit_profile`\n\n**Request Body:**\n\n``` json\n{\n  \"profile_accessibility\": \"public\"\n}\n\n ```\n\n**Options:** `public`, `private`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Profile accessibility updated successfully\",\n  \"data\": { ... }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_profile)\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â””â”€â–º profile_accessibility: public | private\n   â”‚\n   â”œâ”€â–º Update Database\n   â”‚   â””â”€â–º prisma.user.update()\n   â”‚\n   â”œâ”€â–º Fetch Updated User Data\n   â”‚\n   â””â”€â–º Return Updated Profile\n\n ```\n\n---\n\n### Update Profile Language\n\n**Endpoint:** `POST /{MODE}/settings/profile-language`\n\n**Description:** Update user's language preference.\n\n**Authentication:** Required  \n**Permission:** `edit_profile`\n\n**Request Body:**\n\n``` json\n{\n  \"language\": \"en\"\n}\n\n ```\n\n**Options:** `en`, `ar` (and other supported languages)\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Profile language updated successfully\",\n  \"data\": { ... }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_profile)\n   â”‚\n   â”œâ”€â–º Validate Language Code\n   â”‚   â””â”€â–º Must be valid language enum\n   â”‚\n   â”œâ”€â–º Update Database\n   â”‚   â””â”€â–º prisma.user.update()\n   â”‚\n   â””â”€â–º Return Updated Profile\n\n ```\n\n---\n\n### Change Email\n\n**Endpoint:** `POST /{MODE}/settings/change-email`\n\n**Description:** Change user's email address. Requires OTP verification.\n\n**Authentication:** Required  \n**Permission:** `edit_profile`\n\n**Request Body:**\n\n``` json\n{\n  \"new_email\": \"newemail@example.com\",\n  \"otp\": \"123456\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Email updated and verified successfully\",\n  \"data\": {\n    \"user\": {\n      \"id\": \"uuid\",\n      \"email\": \"newemail@example.com\",\n      \"is_email_verified\": true,\n      \"email_verified_at\": \"2025-01-01T00:00:00.000Z\"\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_profile)\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â”œâ”€â–º new_email required\n   â”‚   â””â”€â–º otp required\n   â”‚\n   â”œâ”€â–º Verify OTP\n   â”‚   â””â”€â–º verifyOtp(new_email, otp)\n   â”‚\n   â”œâ”€â–º Check Email Availability\n   â”‚   â””â”€â–º Ensure email not used by another user\n   â”‚\n   â”œâ”€â–º Update Email\n   â”‚   â”œâ”€â–º Update email field\n   â”‚   â”œâ”€â–º Set is_email_verified: true\n   â”‚   â””â”€â–º Set email_verified_at: now\n   â”‚\n   â”œâ”€â–º Delete OTP\n   â”‚   â””â”€â–º verifyOtp(consume=true)\n   â”‚\n   â””â”€â–º Return Updated User Data\n\n ```\n\n**Note:** User must request OTP to new email first using `/auth/send-one-time-password` endpoint.\n\n---\n\n### Change Phone\n\n**Endpoint:** `POST /{MODE}/settings/change-phone`\n\n**Description:** Change user's phone number. Requires OTP verification.\n\n**Authentication:** Required  \n**Permission:** `edit_profile`\n\n**Request Body:**\n\n``` json\n{\n  \"new_phone\": \"+1234567890\",\n  \"otp\": \"123456\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Phone number updated and verified successfully\",\n  \"data\": {\n    \"user\": {\n      \"id\": \"uuid\",\n      \"phone_number\": { \"phone\": \"1234567890\" },\n      \"is_phone_verified\": true,\n      \"phone_number_verified_at\": \"2025-01-01T00:00:00.000Z\"\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_profile)\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â”œâ”€â–º new_phone required\n   â”‚   â”œâ”€â–º otp required\n   â”‚   â””â”€â–º Validate phone format\n   â”‚\n   â”œâ”€â–º Verify OTP\n   â”‚   â””â”€â–º verifyOtp(new_phone, otp)\n   â”‚\n   â”œâ”€â–º Check Phone Availability\n   â”‚   â””â”€â–º Ensure phone not used by another user\n   â”‚\n   â”œâ”€â–º Clean Phone Number\n   â”‚   â””â”€â–º Remove + prefix\n   â”‚\n   â”œâ”€â–º Update Phone\n   â”‚   â”œâ”€â–º Update phone_number JSONB field\n   â”‚   â”œâ”€â–º Set is_phone_verified: true\n   â”‚   â””â”€â–º Set phone_number_verified_at: now\n   â”‚\n   â”œâ”€â–º Delete OTP\n   â”‚   â””â”€â–º verifyOtp(consume=true)\n   â”‚\n   â””â”€â–º Return Updated User Data\n\n ```\n\n**Note:** User must request OTP to new phone first using `/settings/send-phone-otp` endpoint.\n\n---\n\n### Send Phone OTP\n\n**Endpoint:** `POST /{MODE}/settings/send-phone-otp`\n\n**Description:** Send OTP to a phone number for verification (e.g., for changing phone).\n\n**Authentication:** Required  \n**Permission:** `edit_profile`\n\n**Request Body:**\n\n``` json\n{\n  \"phone\": \"+1234567890\",\n  \"channel\": \"sms\"\n}\n\n ```\n\n**Channel Options:** `sms`, `whatsapp`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"OTP sent successfully\",\n  \"data\": {\n    \"message\": \"OTP sent successfully\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_profile)\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â”œâ”€â–º phone required\n   â”‚   â”œâ”€â–º channel required (sms/whatsapp)\n   â”‚   â””â”€â–º Validate phone format\n   â”‚\n   â”œâ”€â–º Generate OTP\n   â”‚   â””â”€â–º setOtp(phone, 600 seconds)\n   â”‚\n   â”œâ”€â–º Send OTP\n   â”‚   â”œâ”€â–º sms â†’ Send SMS via Twilio\n   â”‚   â””â”€â–º whatsapp â†’ Send WhatsApp via Twilio\n   â”‚\n   â””â”€â–º Return Success Response\n\n ```\n\n---\n\n### Update Theme\n\n**Endpoint:** `POST /{MODE}/settings/update-theme`\n\n**Description:** Update user's theme preference.\n\n**Authentication:** Required  \n**Permission:** `edit_profile`\n\n**Request Body:**\n\n``` json\n{\n  \"theme\": \"dark\"\n}\n\n ```\n\n**Options:** `light`, `dark`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Theme updated successfully\",\n  \"data\": { ... }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_profile)\n   â”‚\n   â”œâ”€â–º Validate Theme\n   â”‚   â””â”€â–º Must be \"light\" or \"dark\"\n   â”‚\n   â”œâ”€â–º Update Database\n   â”‚   â””â”€â–º prisma.user.update()\n   â”‚\n   â”œâ”€â–º Fetch Updated User Data\n   â”‚\n   â””â”€â–º Return Updated Profile\n\n ```\n\n---\n\n### Deactivate Account\n\n**Endpoint:** `POST /{MODE}/settings/deactivate-account`\n\n**Description:** Deactivate user account (sets is_active to false and status to INACTIVE).\n\n**Authentication:** Required  \n**Permission:** `edit_profile`\n\n**Request Body:** None\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Account deactivated successfully\",\n  \"data\": {\n    \"user_id\": \"uuid\",\n    \"is_active\": false,\n    \"status\": \"INACTIVE\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_profile)\n   â”‚\n   â”œâ”€â–º Update User Status\n   â”‚   â”œâ”€â–º Set is_active: false\n   â”‚   â””â”€â–º Set status: INACTIVE\n   â”‚\n   â””â”€â–º Return Success Response\n\n ```\n\n**Note:** Deactivated accounts cannot login. Account can be reactivated by admin.\n\n---\n\n### Delete Account\n\n**Endpoint:** `POST /{MODE}/settings/delete-account`\n\n**Description:** Delete user account (requires confirmation). Sets is_active to false and status to INACTIVE.\n\n**Authentication:** Required  \n**Permission:** `edit_profile`\n\n**Request Body:**\n\n``` json\n{\n  \"confirm\": true\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Account deactivated successfully\",\n  \"data\": {\n    \"user_id\": \"uuid\",\n    \"is_active\": false\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_profile)\n   â”‚\n   â”œâ”€â–º Validate Confirmation\n   â”‚   â””â”€â–º confirm must be true\n   â”‚\n   â”œâ”€â–º Update User Status\n   â”‚   â”œâ”€â–º Set is_active: false\n   â”‚   â””â”€â–º Set status: INACTIVE\n   â”‚\n   â””â”€â–º Return Success Response\n\n ```\n\n**Note:** This is a soft delete. Account data is preserved but marked as inactive.\n\n---\n\n### Get Settings\n\n**Endpoint:** `GET /{MODE}/settings/get-settings`\n\n**Description:** Get all user settings and preferences.\n\n**Authentication:** Required  \n**Permission:** `view_profile`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User settings retrieved successfully\",\n  \"data\": {\n    \"user_id\": \"uuid\",\n    \"theme\": \"dark\",\n    \"language\": \"en\",\n    \"profile_accessibility\": \"public\",\n    \"timezone\": \"America/New_York\",\n    \"country\": \"US\",\n    \"bio\": \"User bio\",\n    \"is_email_verified\": true,\n    \"is_phone_verified\": true,\n    \"is_active\": true,\n    \"is_verified\": true,\n    \"status\": \"ACTIVE\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_profile)\n   â”‚\n   â”œâ”€â–º Get User Settings\n   â”‚   â””â”€â–º prisma.user.findUnique()\n   â”‚       â””â”€â–º Select settings fields\n   â”‚\n   â”œâ”€â–º Serialize Data\n   â”‚\n   â””â”€â–º Return Settings\n\n ```\n\n---\n\n### Update Timezone\n\n**Endpoint:** `POST /{MODE}/settings/update-timezone`\n\n**Description:** Update user's timezone preference.\n\n**Authentication:** Required  \n**Permission:** `edit_profile`\n\n**Request Body:**\n\n``` json\n{\n  \"timezone\": \"America/New_York\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Timezone updated successfully\",\n  \"data\": { ... }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_profile)\n   â”‚\n   â”œâ”€â–º Validate Timezone\n   â”‚   â””â”€â–º Must be valid IANA timezone\n   â”‚\n   â”œâ”€â–º Update Database\n   â”‚   â””â”€â–º prisma.user.update()\n   â”‚\n   â”œâ”€â–º Fetch Updated User Data\n   â”‚\n   â””â”€â–º Return Updated Profile\n\n ```\n\n**Valid Timezones:** IANA timezone database (e.g., \"America/New_York\", \"Europe/London\", \"Asia/Tokyo\")\n\n---\n\n## Workflows\n\n### Complete Profile Update Flow\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚              Profile Management Flow                         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                              â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚  Get Profile?   â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                â”‚                         â”‚\n                â–¼                         â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚  View Profile â”‚         â”‚ Update Profile â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                         â”‚\n                â–¼                         â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚ Return Data   â”‚         â”‚ Validate Data â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                                           â”‚\n                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                           â”‚               â”‚               â”‚\n                           â–¼               â–¼               â–¼\n                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                  â”‚ Update DB   â”‚ â”‚ Upload File  â”‚ â”‚ Verify OTP  â”‚\n                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\n                         â”‚               â”‚               â”‚\n                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                         â”‚\n                                         â–¼\n                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                                 â”‚ Return Data â”‚\n                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n ```\n\n### Email/Phone Change Flow\n\n```\n1. User Requests Email/Phone Change\n   â”‚\n   â”œâ”€â–º POST /settings/send-phone-otp (for phone)\n   â”‚   â””â”€â–º OTP sent to new phone\n   â”‚\n   â”œâ”€â–º POST /auth/send-one-time-password (for email)\n   â”‚   â””â”€â–º OTP sent to new email\n   â”‚\n   â”œâ”€â–º User Receives OTP\n   â”‚\n   â”œâ”€â–º POST /settings/change-email or /settings/change-phone\n   â”‚   â”œâ”€â–º Verify OTP\n   â”‚   â”œâ”€â–º Check availability\n   â”‚   â”œâ”€â–º Update contact info\n   â”‚   â””â”€â–º Mark as verified\n   â”‚\n   â””â”€â–º Email/Phone Changed Successfully\n\n ```\n\n## Error Handling\n\n### Common Error Responses\n\n**400 Bad Request - Invalid Payload:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Invalid request payload\",\n  \"error\": \"Validation error details\",\n  \"statusCode\": 400\n}\n\n ```\n\n**401 Unauthorized - Invalid OTP:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Invalid OTP\",\n  \"error\": \"OTP is incorrect or expired\",\n  \"statusCode\": 401\n}\n\n ```\n\n**403 Forbidden - Permission Denied:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Permission denied\",\n  \"error\": \"Insufficient permissions\",\n  \"statusCode\": 403\n}\n\n ```\n\n**404 Not Found - Profile Not Found:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Profile not found\",\n  \"error\": \"User profile does not exist\",\n  \"statusCode\": 404\n}\n\n ```\n\n**409 Conflict - Email/Phone Already Exists:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Email already exists\",\n  \"error\": \"Email is already registered to another user\",\n  \"statusCode\": 409\n}\n\n ```\n\n---\n\n## Best Practices\n\n1. **Profile Picture**: Use appropriate image formats and sizes (max 15MB)\n    \n2. **Email/Phone Changes**: Always verify with OTP before updating\n    \n3. **Protected Fields**: Never allow direct updates to user_id, email, or phone\n    \n4. **Data Validation**: Validate all input data before updating\n    \n5. **Error Messages**: Provide clear error messages for validation failures\n    \n6. **Account Deletion**: Require explicit confirmation for account deletion\n    \n7. **Timezone Format**: Use IANA timezone database format\n    \n8. **Language Codes**: Use ISO 639-1 language codes (en, ar, etc.)\n    \n\n---\n\n**Last Updated**: January 2025"
		},
		{
			"name": "User & Activity",
			"item": [
				{
					"name": "Create activity log",
					"id": "50285861-8628675b-80c6-4646-aed2-493fd96aa107",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"level\": \"info\",\n    \"message\": \"User logged in successfully\",\n    \"action\": \"login\",\n    \"module\": \"authentication\",\n    \"ip_address\": \"127.0.0.1\",\n    \"user_agent\": \"PostmanRuntime/7.49.1\",\n    \"device\": \"Desktop\",\n    \"browser\": null,\n    \"os\": null,\n    \"platform\": \"web\",\n    \"endpoint\": \"/dev/v1/activity/logs\",\n    \"method\": \"POST\",\n    \"status_code\": null,\n    \"request_id\": null,\n    \"session_id\": null,\n    \"metadata\": null,\n    \"error_details\": null,\n    \"duration_ms\": null\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/activity/logs",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"activity",
								"logs"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get specific log",
					"id": "50285861-38dfe179-81b1-4649-8454-bb5a64454339",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/activity/logs/:log_id",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"activity",
								"logs",
								":log_id"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							],
							"variable": [
								{
									"key": "log_id",
									"value": "265df286-d4e2-45d0-a1d9-a4561baded93"
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-8060d8ff-66c8-4445-88a7-3a2b75bc457c",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "Get all logs (with filters)",
					"id": "50285861-564273f3-685b-473c-ac87-54a203028a61",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/activity/logs",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"activity",
								"logs"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-0c63fc05-4acf-43b0-b959-89532eea76f8",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "Get current user logs",
					"id": "50285861-2d4e1b95-241c-44ca-9cf9-f722a3d66239",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/activity/me/logs",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"activity",
								"me",
								"logs"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-c3ca7ee4-8e17-4deb-8f1f-b5c9e7daa61f",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "Get statistics",
					"id": "50285861-007bda0c-0bae-4d61-beba-442755d33971",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/activity/statistics",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"activity",
								"statistics"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-38210bdd-6b85-4c5b-b75a-62f2aefb6683",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "Delete old logs",
					"id": "50285861-45354586-bcf3-478b-b16d-2012f841c80e",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/activity/logs/cleanup",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"activity",
								"logs",
								"cleanup"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-e647f3d8-58f3-4bf0-86a0-c02843d5befe",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				}
			],
			"id": "50285861-7898828e-7847-4acb-b028-a4d5c7a2d640",
			"description": "# Activity Logging Router\n\n> **Complete Documentation for Activity Logging and Audit Trail Endpoints** \n  \n\nThis router handles all activity logging operations including creating log entries, retrieving logs with filters, getting statistics, and managing log cleanup.\n\n## ğŸ“‹ Table of Contents\n\n- [Overview](#overview)\n    \n- [Endpoints](#endpoints)\n    - [Create Activity Log](#create-activity-log)\n        \n    - [Get Activity Logs](#get-activity-logs)\n        \n    - [Get Activity Log by ID](#get-activity-log-by-id)\n        \n    - [Get User Activity Logs](#get-user-activity-logs)\n        \n    - [Get My Activity Logs](#get-my-activity-logs)\n        \n    - [Get Activity Statistics](#get-activity-statistics)\n        \n    - [Delete Old Activity Logs](#delete-old-activity-logs)\n        \n- [Workflows](#workflows)\n    \n- [Error Handling](#error-handling)\n    \n\n## Overview\n\nThe Activity Logging router provides comprehensive audit trail and activity tracking functionality including:\n\n- **Activity Logging**: Create detailed activity log entries\n    \n- **Log Retrieval**: Query logs with advanced filters\n    \n- **User Activity Tracking**: Track user-specific activities\n    \n- **Statistics**: Get activity statistics and analytics\n    \n- **Log Management**: Clean up old logs\n    \n\n**Base Path:** `/{MODE}/activity`\n\n**Authentication:** All endpoints require authentication\n\n**Permissions:** Various permissions required (see each endpoint)\n\n## Endpoints\n\n### Create Activity Log\n\n**Endpoint:** `POST /{MODE}/activity/logs`\n\n**Description:** Create a new activity log entry with comprehensive metadata.\n\n**Authentication:** Required  \n**Permission:** `edit_profile`\n\n**Request Body:**\n\n``` json\n{\n  \"level\": \"info\",\n  \"message\": \"User performed action\",\n  \"action\": \"login\",\n  \"module\": \"authentication\",\n  \"ip_address\": \"192.168.1.1\",\n  \"user_agent\": \"Mozilla/5.0...\",\n  \"endpoint\": \"/api/token\",\n  \"method\": \"POST\",\n  \"status_code\": 200,\n  \"metadata\": {\n    \"key\": \"value\"\n  }\n}\n\n ```\n\n**Level Options:** `info`, `warn`, `error`, `debug`, `audit`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Activity log created successfully\",\n  \"data\": {\n    \"activity_log\": {\n      \"log_id\": \"uuid\",\n      \"user_id\": \"uuid\",\n      \"level\": \"info\",\n      \"message\": \"User performed action\",\n      \"action\": \"login\",\n      \"module\": \"authentication\",\n      \"ip_address\": \"192.168.1.1\",\n      \"created_at\": \"2025-01-01T00:00:00.000Z\"\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_profile)\n   â”‚\n   â”œâ”€â–º Extract Request Metadata\n   â”‚   â”œâ”€â–º IP Address (req.ip or req.connection.remoteAddress)\n   â”‚   â”œâ”€â–º User Agent (req.get('user-agent'))\n   â”‚   â””â”€â–º Parse User Agent (device, browser, OS)\n   â”‚\n   â”œâ”€â–º Build Log Data\n   â”‚   â”œâ”€â–º user_id (from token or request body)\n   â”‚   â”œâ”€â–º level (default: 'info')\n   â”‚   â”œâ”€â–º message (required)\n   â”‚   â”œâ”€â–º action, module, endpoint, method\n   â”‚   â”œâ”€â–º ip_address, user_agent, device, browser, os\n   â”‚   â”œâ”€â–º request_id, session_id\n   â”‚   â”œâ”€â–º metadata (JSONB)\n   â”‚   â””â”€â–º error_details (JSONB, if error)\n   â”‚\n   â”œâ”€â–º Create Activity Log\n   â”‚   â””â”€â–º createActivityLog(logData)\n   â”‚\n   â””â”€â–º Return Created Log Entry\n\n ```\n\n**Auto-Extracted Fields:**\n\n- `user_id`: From JWT token if not provided\n    \n- `ip_address`: From request if not provided\n    \n- `user_agent`: From request headers if not provided\n    \n- `device`, `browser`, `os`: Parsed from user agent\n    \n- `endpoint`: From request URL if not provided\n    \n- `method`: From request method if not provided\n    \n\n---\n\n### Get Activity Logs\n\n**Endpoint:** `GET /{MODE}/activity/logs`\n\n**Description:** Retrieve activity logs with advanced filtering options.\n\n**Authentication:** Required  \n**Permission:** `view_activity_log`\n\n**Query Parameters:**\n\n- `user_id` (optional): Filter by user ID\n    \n- `level` (optional): Filter by log level (`info`, `warn`, `error`, `debug`, `audit`)\n    \n- `action` (optional): Filter by action\n    \n- `module` (optional): Filter by module\n    \n- `ip_address` (optional): Filter by IP address\n    \n- `start_date` (optional): Start date (ISO format)\n    \n- `end_date` (optional): End date (ISO format)\n    \n- `limit` (optional): Number of results (default: 100)\n    \n- `offset` (optional): Pagination offset (default: 0)\n    \n- `order_by` (optional): Sort field (default: `created_at`)\n    \n- `order` (optional): Sort order (`asc`, `desc`, default: `desc`)\n    \n\n**Request:**\n\n``` http\nGET /dev/v1/activity/logs?user_id=uuid&level=error&limit=50&offset=0 HTTP/1.1\nAuthorization: Bearer <token>\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Activity logs retrieved successfully\",\n  \"data\": {\n    \"activity_logs\": [\n      {\n        \"log_id\": \"uuid\",\n        \"user_id\": \"uuid\",\n        \"level\": \"error\",\n        \"message\": \"Error occurred\",\n        \"action\": \"api_call\",\n        \"module\": \"api\",\n        \"ip_address\": \"192.168.1.1\",\n        \"created_at\": \"2025-01-01T00:00:00.000Z\"\n      }\n    ],\n    \"count\": 50\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_activity_log)\n   â”‚\n   â”œâ”€â–º Extract Query Parameters\n   â”‚   â”œâ”€â–º Filters (user_id, level, action, module, ip_address)\n   â”‚   â”œâ”€â–º Date Range (start_date, end_date)\n   â”‚   â”œâ”€â–º Pagination (limit, offset)\n   â”‚   â””â”€â–º Sorting (order_by, order)\n   â”‚\n   â”œâ”€â–º Build Query Filters\n   â”‚   â””â”€â–º Construct Prisma where clause\n   â”‚\n   â”œâ”€â–º Execute Query\n   â”‚   â””â”€â–º getActivityLogs(filters)\n   â”‚\n   â””â”€â–º Return Filtered Logs\n\n ```\n\n---\n\n### Get Activity Log by ID\n\n**Endpoint:** `GET /{MODE}/activity/logs/:log_id`\n\n**Description:** Get a specific activity log by ID.\n\n**Authentication:** Required  \n**Permission:** `view_activity_log`\n\n**Parameters:**\n\n- `log_id` (path): Log UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Activity log retrieved successfully\",\n  \"data\": {\n    \"activity_log\": {\n      \"log_id\": \"uuid\",\n      \"user_id\": \"uuid\",\n      \"level\": \"info\",\n      \"message\": \"User performed action\",\n      \"action\": \"login\",\n      \"module\": \"authentication\",\n      \"ip_address\": \"192.168.1.1\",\n      \"user_agent\": \"Mozilla/5.0...\",\n      \"device\": \"Desktop\",\n      \"browser\": \"Chrome\",\n      \"os\": \"Windows\",\n      \"endpoint\": \"/api/token\",\n      \"method\": \"POST\",\n      \"status_code\": 200,\n      \"metadata\": { ... },\n      \"created_at\": \"2025-01-01T00:00:00.000Z\"\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_activity_log)\n   â”‚\n   â”œâ”€â–º Get Activity Log by ID\n   â”‚   â””â”€â–º getActivityLogById(log_id)\n   â”‚\n   â”œâ”€â–º Check if Log Exists\n   â”‚   â””â”€â–º Return 404 if not found\n   â”‚\n   â””â”€â–º Return Activity Log\n\n ```\n\n---\n\n### Get User Activity Logs\n\n**Endpoint:** `GET /{MODE}/activity/users/:user_id/logs`\n\n**Description:** Get activity logs for a specific user.\n\n**Authentication:** Required  \n**Permission:** `view_activity_log`\n\n**Parameters:**\n\n- `user_id` (path): User UUID\n    \n\n**Query Parameters:**\n\n- `start_date` (optional): Start date (ISO format)\n    \n- `end_date` (optional): End date (ISO format)\n    \n- `limit` (optional): Number of results (default: 100)\n    \n- `offset` (optional): Pagination offset (default: 0)\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User activity logs retrieved successfully\",\n  \"data\": {\n    \"user_id\": \"uuid\",\n    \"activity_logs\": [ ... ],\n    \"count\": 25\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_activity_log)\n   â”‚\n   â”œâ”€â–º Extract Query Parameters\n   â”‚   â”œâ”€â–º Date Range (start_date, end_date)\n   â”‚   â””â”€â–º Pagination (limit, offset)\n   â”‚\n   â”œâ”€â–º Get User Activity Logs\n   â”‚   â””â”€â–º getUserActivityLogs(user_id, filters)\n   â”‚\n   â””â”€â–º Return User Activity Logs\n\n ```\n\n---\n\n### Get My Activity Logs\n\n**Endpoint:** `GET /{MODE}/activity/me/logs`\n\n**Description:** Get activity logs for the current authenticated user.\n\n**Authentication:** Required  \n**Permission:** `view_profile`\n\n**Query Parameters:**\n\n- `start_date` (optional): Start date (ISO format)\n    \n- `end_date` (optional): End date (ISO format)\n    \n- `limit` (optional): Number of results (default: 100)\n    \n- `offset` (optional): Pagination offset (default: 0)\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Your activity logs retrieved successfully\",\n  \"data\": {\n    \"activity_logs\": [ ... ],\n    \"count\": 10\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_profile)\n   â”‚\n   â”œâ”€â–º Get Current User ID\n   â”‚   â””â”€â–º From JWT token\n   â”‚\n   â”œâ”€â–º Extract Query Parameters\n   â”‚   â””â”€â–º Date range and pagination\n   â”‚\n   â”œâ”€â–º Get User Activity Logs\n   â”‚   â””â”€â–º getUserActivityLogs(userId, filters)\n   â”‚\n   â””â”€â–º Return Activity Logs\n\n ```\n\n---\n\n### Get Activity Statistics\n\n**Endpoint:** `GET /{MODE}/activity/statistics`\n\n**Description:** Get activity log statistics including counts by level, action, and module.\n\n**Authentication:** Required  \n**Permission:** `view_activity_log`\n\n**Query Parameters:**\n\n- `user_id` (optional): Filter by user ID\n    \n- `start_date` (optional): Start date (ISO format)\n    \n- `end_date` (optional): End date (ISO format)\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Activity statistics retrieved successfully\",\n  \"data\": {\n    \"statistics\": {\n      \"total_logs\": 1000,\n      \"by_level\": {\n        \"info\": 800,\n        \"warn\": 100,\n        \"error\": 80,\n        \"debug\": 15,\n        \"audit\": 5\n      },\n      \"by_action\": {\n        \"login\": 200,\n        \"logout\": 150,\n        \"api_call\": 500\n      },\n      \"by_module\": {\n        \"authentication\": 350,\n        \"api\": 500,\n        \"profile\": 150\n      }\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_activity_log)\n   â”‚\n   â”œâ”€â–º Extract Query Parameters\n   â”‚   â”œâ”€â–º user_id (optional)\n   â”‚   â””â”€â–º Date range (optional)\n   â”‚\n   â”œâ”€â–º Build Query Filters\n   â”‚\n   â”œâ”€â–º Calculate Statistics\n   â”‚   â”œâ”€â–º Total logs count\n   â”‚   â”œâ”€â–º Count by level (groupBy)\n   â”‚   â”œâ”€â–º Count by action (groupBy)\n   â”‚   â””â”€â–º Count by module (groupBy)\n   â”‚\n   â””â”€â–º Return Statistics\n\n ```\n\n---\n\n### Delete Old Activity Logs\n\n**Endpoint:** `DELETE /{MODE}/activity/logs/cleanup`\n\n**Description:** Delete activity logs older than specified days.\n\n**Authentication:** Required  \n**Permission:** `delete_activity_log`\n\n**Query Parameters:**\n\n- `days` (optional): Days old (default: 90)\n    \n\n**Request:**\n\n``` http\nDELETE /dev/v1/activity/logs/cleanup?days=90 HTTP/1.1\nAuthorization: Bearer <token>\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Old activity logs deleted successfully\",\n  \"data\": {\n    \"deleted_count\": 500,\n    \"days_old\": 90\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (delete_activity_log)\n   â”‚\n   â”œâ”€â–º Extract Query Parameters\n   â”‚   â””â”€â–º days (default: 90)\n   â”‚\n   â”œâ”€â–º Calculate Cutoff Date\n   â”‚   â””â”€â–º Current date - days\n   â”‚\n   â”œâ”€â–º Delete Old Logs\n   â”‚   â””â”€â–º deleteOldActivityLogs(daysOld)\n   â”‚       â””â”€â–º prisma.activityLog.deleteMany()\n   â”‚\n   â””â”€â–º Return Deletion Count\n\n ```\n\n**Use Cases:**\n\n- Database maintenance\n    \n- Storage optimization\n    \n- Compliance (GDPR data retention)\n    \n- Performance optimization\n    \n\n---\n\n## Workflows\n\n### Complete Activity Logging Flow\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚              Activity Logging Flow                          â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                â”‚                           â”‚\n                â–¼                           â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚  Create Log   â”‚         â”‚  Query Logs   â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                           â”‚\n                â–¼                           â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚ Extract Meta  â”‚         â”‚ Apply Filters â”‚\n        â”‚   Data        â”‚         â”‚   & Paginationâ”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                           â”‚\n                â–¼                           â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚ Parse User    â”‚         â”‚ Execute Query â”‚\n        â”‚   Agent       â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚\n                â”‚                         â”‚\n                â–¼                         â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚ Store in DB   â”‚         â”‚ Return Resultsâ”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n ```\n\n### Activity Log Creation Flow\n\n```\n1. User Action Occurs\n   â”‚\n   â”œâ”€â–º Extract Request Context\n   â”‚   â”œâ”€â–º IP Address\n   â”‚   â”œâ”€â–º User Agent\n   â”‚   â”œâ”€â–º Endpoint\n   â”‚   â””â”€â–º Method\n   â”‚\n   â”œâ”€â–º Parse User Agent\n   â”‚   â”œâ”€â–º Device Type\n   â”‚   â”œâ”€â–º Browser\n   â”‚   â””â”€â–º Operating System\n   â”‚\n   â”œâ”€â–º Build Log Entry\n   â”‚   â”œâ”€â–º User ID\n   â”‚   â”œâ”€â–º Level\n   â”‚   â”œâ”€â–º Message\n   â”‚   â”œâ”€â–º Action & Module\n   â”‚   â”œâ”€â–º Request Metadata\n   â”‚   â””â”€â–º Custom Metadata\n   â”‚\n   â”œâ”€â–º Store in Database\n   â”‚   â””â”€â–º ActivityLog table\n   â”‚\n   â””â”€â–º Return Log Entry\n\n ```\n\n## Error Handling\n\n### Common Error Responses\n\n**400 Bad Request - Invalid Payload:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Invalid request payload\",\n  \"error\": \"message is required\",\n  \"statusCode\": 400\n}\n\n ```\n\n**403 Forbidden - Permission Denied:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Permission denied\",\n  \"error\": \"Insufficient permissions. Requires view_activity_log permission\",\n  \"statusCode\": 403\n}\n\n ```\n\n**404 Not Found - Log Not Found:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Activity log not found\",\n  \"error\": \"Log with provided ID does not exist\",\n  \"statusCode\": 404\n}\n\n ```\n\n**500 Internal Server Error:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Activity log creation failed\",\n  \"error\": \"Error details\",\n  \"statusCode\": 500\n}\n\n ```\n\n---\n\n## Best Practices\n\n1. **Log Levels**: Use appropriate log levels (info, warn, error, debug, audit)\n    \n2. **Metadata**: Include relevant metadata for debugging and auditing\n    \n3. **User Agent Parsing**: Automatically parse user agent for device/browser/OS info\n    \n4. **Pagination**: Always use pagination for log queries to avoid performance issues\n    \n5. **Date Filtering**: Use date filters to limit query scope\n    \n6. **Log Cleanup**: Regularly clean up old logs to maintain database performance\n    \n7. **Sensitive Data**: Don't log sensitive information (passwords, tokens, etc.)\n    \n8. **Performance**: Index frequently queried fields (user_id, level, action, created_at)\n    \n\n---\n\n## Log Levels\n\n- **info**: General informational messages\n    \n- **warn**: Warning messages for potential issues\n    \n- **error**: Error messages for failures\n    \n- **debug**: Debug messages for development\n    \n- **audit**: Audit trail messages for compliance\n    \n\n---\n\n## Database Schema\n\n**ActivityLog Model:**\n\n- `log_id`: UUID (Primary Key)\n    \n- `user_id`: UUID (Foreign Key, nullable)\n    \n- `level`: String (info, warn, error, debug, audit)\n    \n- `message`: String\n    \n- `action`: String (nullable)\n    \n- `module`: String (nullable)\n    \n- `ip_address`: String\n    \n- `user_agent`: String\n    \n- `device`: String (nullable)\n    \n- `browser`: String (nullable)\n    \n- `os`: String (nullable)\n    \n- `platform`: String (default: 'web')\n    \n- `endpoint`: String (nullable)\n    \n- `method`: String (nullable)\n    \n- `status_code`: Integer (nullable)\n    \n- `request_id`: String (nullable)\n    \n- `session_id`: String (nullable)\n    \n- `metadata`: JSONB (nullable)\n    \n- `error_details`: JSONB (nullable)\n    \n- `duration_ms`: Integer (nullable)\n    \n- `created_at`: Timestamp\n    \n\n---\n\n**Last Updated**: January 2025"
		},
		{
			"name": "Groups & Permissions",
			"item": [
				{
					"name": "Permissions",
					"item": [
						{
							"name": "permissions",
							"id": "50285861-85db6e02-54a5-43b9-a789-0221bb9e093d",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/permissions",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"permissions"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"response": [
								{
									"id": "50285861-a3677652-b687-4b06-8339-2f050a72b08c",
									"name": "profile",
									"originalRequest": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{domain.com}}/{{mode}}/settings/profile",
											"host": [
												"{{domain.com}}"
											],
											"path": [
												"{{mode}}",
												"settings",
												"profile"
											],
											"query": [
												{
													"key": "page",
													"value": "1",
													"disabled": true
												},
												{
													"key": "page_size",
													"value": "1",
													"disabled": true
												}
											]
										}
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Server",
											"value": "openresty"
										},
										{
											"key": "Date",
											"value": "Sun, 16 Nov 2025 07:46:55 GMT"
										},
										{
											"key": "Content-Type",
											"value": "application/json",
											"description": "",
											"type": "text"
										},
										{
											"key": "Content-Length",
											"value": "994"
										},
										{
											"key": "Connection",
											"value": "keep-alive"
										},
										{
											"key": "X-XSS-Protection",
											"value": "1; mode=block"
										},
										{
											"key": "X-Content-Type-Options",
											"value": "nosniff"
										},
										{
											"key": "X-Frame-Options",
											"value": "DENY"
										},
										{
											"key": "Referrer-Policy",
											"value": "strict-origin-when-cross-origin"
										},
										{
											"key": "Permissions-Policy",
											"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
										},
										{
											"key": "X-Permitted-Cross-Domain-Policies",
											"value": "none"
										},
										{
											"key": "Content-Security-Policy",
											"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
										},
										{
											"key": "X-Served-By",
											"value": "v3.staging.winsta.pro"
										}
									],
									"cookie": [],
									"responseTime": null,
									"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
								}
							]
						},
						{
							"name": "get-permissions",
							"id": "50285861-3ad53119-ba5f-4375-93fa-3c18ba2a5f76",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/permissions/59bcc480-e972-46db-8b7f-804af5102e42?page=1&page_size=1",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"permissions",
										"59bcc480-e972-46db-8b7f-804af5102e42"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "page_size",
											"value": "1"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "create-permissions",
							"id": "50285861-c86266a0-21ba-462e-8954-e8b5fc711553",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"first_name\": \"MR\",\n  \"last_name\": \"DAS\",\n  \"country\": \"Nepal\",\n  \"bio\": \"Full Stack Developer\",\n  \"email\": \"demo@gmail.com\",\n  \"language\": \"en\",\n  \"gender\":\"Male\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/permissions",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"permissions"
									]
								}
							},
							"response": []
						},
						{
							"name": "update-permissions",
							"id": "50285861-03b628f1-f46a-421e-8b23-294053157a83",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "file",
											"type": "file",
											"src": "/home/mrdas/Downloads/Rameshkumardas.jpg"
										}
									]
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/permissions/permission_id",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"permissions",
										"permission_id"
									]
								}
							},
							"response": []
						},
						{
							"name": "delete-permissions",
							"id": "50285861-efefb9c8-3a06-4932-a89c-8dc7394fa525",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"new_email\": \"mrdasdeveloper@gmail.com\",\n  \"otp\": \"123456\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/permissions/permission_id",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"permissions",
										"permission_id"
									]
								}
							},
							"response": []
						}
					],
					"id": "50285861-491ec91e-f680-4cb7-9c42-c69634f1187e",
					"description": "# Permissions & Groups Router\n\n> **Complete Documentation for Permission and Group Management Endpoints** \n  \n\nThis router handles all permission and group management operations including CRUD operations for permissions and groups, assigning permissions to groups, and managing user-group relationships.\n\n## ğŸ“‹ Table of Contents\n\n- [Overview](#overview)\n    \n- [Endpoints](#endpoints)\n    \n    - [Permissions](#permissions)\n        \n    - [Groups](#groups)\n        \n    - [User Permissions &amp; Groups](#user-permissions--groups)\n        \n- [Workflows](#workflows)\n    \n- [Error Handling](#error-handling)\n    \n\n## Overview\n\nThe Permissions & Groups router provides comprehensive role-based access control (RBAC) functionality including:\n\n- **Permission Management**: Create, read, update, and delete permissions\n    \n- **Group Management**: Create, read, update, and delete groups\n    \n- **Permission Assignment**: Assign permissions to groups\n    \n- **User-Group Assignment**: Assign groups to users\n    \n- **Permission Queries**: Get user permissions and groups\n    \n\n**Base Path:** `/{MODE}/permissions`, `/{MODE}/groups`, `/{MODE}/users`\n\n**Authentication:** All endpoints require authentication\n\n**Permissions:** Various permissions required (see each endpoint)\n\n## Endpoints\n\n### Permissions\n\n#### Get All Permissions\n\n**Endpoint:** `GET /{MODE}/permissions`\n\n**Description:** Get list of all permissions in the system.\n\n**Authentication:** Required  \n**Permission:** `view_permission`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permissions retrieved successfully\",\n  \"data\": {\n    \"permissions\": [\n      {\n        \"permission_id\": \"uuid\",\n        \"name\": \"View Dashboard\",\n        \"codename\": \"view_dashboard\",\n        \"description\": \"Permission to view dashboard\",\n        \"category\": \"dashboard\"\n      }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_permission)\n   â”‚\n   â”œâ”€â–º Get All Permissions\n   â”‚   â””â”€â–º prisma.permission.findMany()\n   â”‚\n   â””â”€â–º Return Permissions List\n\n ```\n\n---\n\n#### Get Permission by ID\n\n**Endpoint:** `GET /{MODE}/permissions/:permission_id`\n\n**Description:** Get a specific permission by ID.\n\n**Authentication:** Required  \n**Permission:** `view_permission`\n\n**Parameters:**\n\n- `permission_id` (path): Permission UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permission retrieved successfully\",\n  \"data\": {\n    \"permission\": {\n      \"permission_id\": \"uuid\",\n      \"name\": \"View Dashboard\",\n      \"codename\": \"view_dashboard\",\n      \"description\": \"Permission to view dashboard\",\n      \"category\": \"dashboard\"\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_permission)\n   â”‚\n   â”œâ”€â–º Get Permission by ID\n   â”‚   â””â”€â–º prisma.permission.findUnique()\n   â”‚\n   â””â”€â–º Return Permission Data\n\n ```\n\n---\n\n#### Create Permission\n\n**Endpoint:** `POST /{MODE}/permissions`\n\n**Description:** Create a new permission.\n\n**Authentication:** Required  \n**Permission:** `add_permission`\n\n**Request Body:**\n\n``` json\n{\n  \"name\": \"View Dashboard\",\n  \"codename\": \"view_dashboard\",\n  \"description\": \"Permission to view dashboard\",\n  \"category\": \"dashboard\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permission created successfully\",\n  \"data\": {\n    \"permission\": {\n      \"permission_id\": \"uuid\",\n      \"name\": \"View Dashboard\",\n      \"codename\": \"view_dashboard\",\n      \"description\": \"Permission to view dashboard\",\n      \"category\": \"dashboard\"\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (add_permission)\n   â”‚\n   â”œâ”€â–º Validate Request Data\n   â”‚   â”œâ”€â–º name required\n   â”‚   â”œâ”€â–º codename required\n   â”‚   â””â”€â–º codename must be unique\n   â”‚\n   â”œâ”€â–º Create Permission\n   â”‚   â””â”€â–º prisma.permission.create()\n   â”‚\n   â””â”€â–º Return Created Permission\n\n ```\n\n---\n\n#### Update Permission\n\n**Endpoint:** `PUT /{MODE}/permissions/:permission_id`\n\n**Description:** Update an existing permission.\n\n**Authentication:** Required  \n**Permission:** `edit_permission`\n\n**Parameters:**\n\n- `permission_id` (path): Permission UUID\n    \n\n**Request Body:**\n\n``` json\n{\n  \"name\": \"View Dashboard Updated\",\n  \"description\": \"Updated description\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permission updated successfully\",\n  \"data\": {\n    \"permission\": { ... }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_permission)\n   â”‚\n   â”œâ”€â–º Update Permission\n   â”‚   â””â”€â–º prisma.permission.update()\n   â”‚\n   â””â”€â–º Return Updated Permission\n\n ```\n\n---\n\n#### Delete Permission\n\n**Endpoint:** `DELETE /{MODE}/permissions/:permission_id`\n\n**Description:** Delete a permission. Removes permission from all groups.\n\n**Authentication:** Required  \n**Permission:** `delete_permission`\n\n**Parameters:**\n\n- `permission_id` (path): Permission UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permission deleted successfully\",\n  \"data\": { ... }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (delete_permission)\n   â”‚\n   â”œâ”€â–º Delete Permission\n   â”‚   â””â”€â–º prisma.permission.delete()\n   â”‚       â””â”€â–º Cascade deletes GroupPermission entries\n   â”‚\n   â””â”€â–º Return Success Response\n\n ```\n\n---\n\n### Groups\n\n#### Get All Groups\n\n**Endpoint:** `GET /{MODE}/groups`\n\n**Description:** Get list of all groups with their permissions.\n\n**Authentication:** Required  \n**Permission:** `view_group`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Groups retrieved successfully\",\n  \"data\": {\n    \"groups\": [\n      {\n        \"group_id\": \"uuid\",\n        \"name\": \"Admin\",\n        \"codename\": \"admin\",\n        \"description\": \"Administrator group\",\n        \"is_system\": true,\n        \"is_active\": true,\n        \"permissions\": [\n          {\n            \"permission_id\": \"uuid\",\n            \"name\": \"View Dashboard\",\n            \"codename\": \"view_dashboard\"\n          }\n        ]\n      }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_group)\n   â”‚\n   â”œâ”€â–º Get All Groups with Permissions\n   â”‚   â””â”€â–º prisma.group.findMany({ include: { permissions } })\n   â”‚\n   â””â”€â–º Return Groups List\n\n ```\n\n---\n\n#### Get Group by ID\n\n**Endpoint:** `GET /{MODE}/groups/:group_id`\n\n**Description:** Get a specific group with its permissions.\n\n**Authentication:** Required  \n**Permission:** `view_group`\n\n**Parameters:**\n\n- `group_id` (path): Group UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Group retrieved successfully\",\n  \"data\": {\n    \"group\": {\n      \"group_id\": \"uuid\",\n      \"name\": \"Admin\",\n      \"codename\": \"admin\",\n      \"permissions\": [ ... ]\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_group)\n   â”‚\n   â”œâ”€â–º Get Group by ID with Permissions\n   â”‚   â””â”€â–º prisma.group.findUnique({ include: { permissions } })\n   â”‚\n   â””â”€â–º Return Group Data\n\n ```\n\n---\n\n#### Create Group\n\n**Endpoint:** `POST /{MODE}/groups`\n\n**Description:** Create a new group.\n\n**Authentication:** Required  \n**Permission:** `add_group`\n\n**Request Body:**\n\n``` json\n{\n  \"name\": \"Moderator\",\n  \"codename\": \"moderator\",\n  \"description\": \"Moderator group\",\n  \"is_system\": false,\n  \"is_active\": true\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Group created successfully\",\n  \"data\": {\n    \"group\": { ... }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (add_group)\n   â”‚\n   â”œâ”€â–º Validate Request Data\n   â”‚   â”œâ”€â–º name required\n   â”‚   â”œâ”€â–º codename required\n   â”‚   â””â”€â–º codename must be unique\n   â”‚\n   â”œâ”€â–º Create Group\n   â”‚   â””â”€â–º prisma.group.create()\n   â”‚\n   â””â”€â–º Return Created Group\n\n ```\n\n---\n\n#### Update Group\n\n**Endpoint:** `PUT /{MODE}/groups/:group_id`\n\n**Description:** Update an existing group.\n\n**Authentication:** Required  \n**Permission:** `edit_group`\n\n**Parameters:**\n\n- `group_id` (path): Group UUID\n    \n\n**Request Body:**\n\n``` json\n{\n  \"name\": \"Moderator Updated\",\n  \"description\": \"Updated description\",\n  \"is_active\": true\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Group updated successfully\",\n  \"data\": {\n    \"group\": { ... }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_group)\n   â”‚\n   â”œâ”€â–º Update Group\n   â”‚   â””â”€â–º prisma.group.update()\n   â”‚\n   â””â”€â–º Return Updated Group\n\n ```\n\n---\n\n#### Delete Group\n\n**Endpoint:** `DELETE /{MODE}/groups/:group_id`\n\n**Description:** Delete a group. System groups cannot be deleted.\n\n**Authentication:** Required  \n**Permission:** `delete_group`\n\n**Parameters:**\n\n- `group_id` (path): Group UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Group deleted successfully\",\n  \"data\": {\n    \"group_id\": \"uuid\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (delete_group)\n   â”‚\n   â”œâ”€â–º Check if System Group\n   â”‚   â””â”€â–º If is_system = true, reject deletion\n   â”‚\n   â”œâ”€â–º Delete Group\n   â”‚   â””â”€â–º prisma.group.delete()\n   â”‚       â””â”€â–º Cascade deletes GroupPermission and UserGroup entries\n   â”‚\n   â””â”€â–º Return Success Response\n\n ```\n\n**Note:** System groups (is_system = true) cannot be deleted.\n\n---\n\n#### Assign Permissions to Group\n\n**Endpoint:** `POST /{MODE}/groups/:group_id/permissions`\n\n**Description:** Assign permissions to a group. Replaces existing permissions.\n\n**Authentication:** Required  \n**Permission:** `edit_group`\n\n**Parameters:**\n\n- `group_id` (path): Group UUID\n    \n\n**Request Body:**\n\n``` json\n{\n  \"permission_ids\": [\"uuid1\", \"uuid2\", \"uuid3\"]\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permissions assigned successfully\",\n  \"data\": {\n    \"group\": {\n      \"group_id\": \"uuid\",\n      \"permissions\": [ ... ]\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_group)\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â””â”€â–º permission_ids must be array\n   â”‚\n   â”œâ”€â–º Delete Existing Permissions\n   â”‚   â””â”€â–º prisma.groupPermission.deleteMany()\n   â”‚\n   â”œâ”€â–º Create New Permission Assignments\n   â”‚   â””â”€â–º prisma.groupPermission.createMany()\n   â”‚\n   â”œâ”€â–º Get Updated Group with Permissions\n   â”‚\n   â””â”€â–º Return Updated Group\n\n ```\n\n---\n\n### User Permissions & Groups\n\n#### Get User Groups\n\n**Endpoint:** `GET /{MODE}/users/:user_id/groups`\n\n**Description:** Get all groups assigned to a user.\n\n**Authentication:** Required  \n**Permission:** `view_user`\n\n**Parameters:**\n\n- `user_id` (path): User UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User groups retrieved successfully\",\n  \"data\": {\n    \"user_id\": \"uuid\",\n    \"groups\": [\n      {\n        \"group_id\": \"uuid\",\n        \"name\": \"Admin\",\n        \"codename\": \"admin\"\n      }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_user)\n   â”‚\n   â”œâ”€â–º Get User Groups\n   â”‚   â””â”€â–º getUserGroups(user_id)\n   â”‚\n   â””â”€â–º Return User Groups\n\n ```\n\n---\n\n#### Get User Permissions\n\n**Endpoint:** `GET /{MODE}/users/:user_id/permissions`\n\n**Description:** Get all permissions for a user (from all groups).\n\n**Authentication:** Required  \n**Permission:** `view_user`\n\n**Parameters:**\n\n- `user_id` (path): User UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User permissions retrieved successfully\",\n  \"data\": {\n    \"user_id\": \"uuid\",\n    \"permissions\": [\n      {\n        \"permission_id\": \"uuid\",\n        \"name\": \"View Dashboard\",\n        \"codename\": \"view_dashboard\"\n      }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_user)\n   â”‚\n   â”œâ”€â–º Get User Permissions\n   â”‚   â””â”€â–º getUserPermissions(user_id)\n   â”‚       â””â”€â–º Aggregates permissions from all user groups\n   â”‚\n   â””â”€â–º Return User Permissions\n\n ```\n\n---\n\n#### Assign Groups to User\n\n**Endpoint:** `POST /{MODE}/users/:user_id/groups`\n\n**Description:** Assign groups to a user. Uses group codenames. Updates user role flags.\n\n**Authentication:** Required  \n**Permission:** `assign_groups`\n\n**Parameters:**\n\n- `user_id` (path): User UUID\n    \n\n**Request Body:**\n\n``` json\n{\n  \"group_codenames\": [\"admin\", \"user\"]\n}\n\n ```\n\n**Valid Codenames:** `super_admin`, `admin`, `developer`, `business`, `accountant`, `user`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Groups assigned successfully (user role flags updated)\",\n  \"data\": {\n    \"user_id\": \"uuid\",\n    \"groups\": [ ... ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (assign_groups)\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â”œâ”€â–º group_codenames must be array\n   â”‚   â””â”€â–º Validate codenames (must be valid)\n   â”‚\n   â”œâ”€â–º Get Assigned By User ID\n   â”‚   â””â”€â–º From JWT token\n   â”‚\n   â”œâ”€â–º Assign Groups to User\n   â”‚   â”œâ”€â–º Delete existing UserGroup entries\n   â”‚   â”œâ”€â–º Create new UserGroup entries\n   â”‚   â””â”€â–º Update user role flags (is_superuser, is_admin, etc.)\n   â”‚\n   â”œâ”€â–º Get Updated User Groups\n   â”‚\n   â””â”€â–º Return User Groups\n\n ```\n\n**Note:** This endpoint updates user role flags (is_superuser, is_admin, etc.) based on assigned groups.\n\n---\n\n#### Get My Groups\n\n**Endpoint:** `GET /{MODE}/users/me/groups`\n\n**Description:** Get all groups for the current authenticated user.\n\n**Authentication:** Required  \n**Permission:** `view_profile`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User groups retrieved successfully\",\n  \"data\": {\n    \"groups\": [ ... ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_profile)\n   â”‚\n   â”œâ”€â–º Get Current User ID\n   â”‚   â””â”€â–º From JWT token\n   â”‚\n   â”œâ”€â–º Get User Groups\n   â”‚   â””â”€â–º getUserGroups(userId)\n   â”‚\n   â””â”€â–º Return User Groups\n\n ```\n\n---\n\n#### Get My Permissions\n\n**Endpoint:** `GET /{MODE}/users/me/permissions`\n\n**Description:** Get all permissions for the current authenticated user.\n\n**Authentication:** Required  \n**Permission:** `view_profile`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User permissions retrieved successfully\",\n  \"data\": {\n    \"permissions\": [ ... ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_profile)\n   â”‚\n   â”œâ”€â–º Get Current User ID\n   â”‚   â””â”€â–º From JWT token\n   â”‚\n   â”œâ”€â–º Get User Permissions\n   â”‚   â””â”€â–º getUserPermissions(userId)\n   â”‚\n   â””â”€â–º Return User Permissions\n\n ```\n\n---\n\n## Workflows\n\n### Complete Permission Management Flow\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚          Permission & Group Management Flow                 â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                â”‚                           â”‚\n                â–¼                           â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚  Permissions  â”‚         â”‚    Groups     â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                           â”‚\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚               â”‚         â”‚               â”‚\n        â–¼               â–¼         â–¼               â–¼\n    Create/Read    Update/Delete  Create/Read  Update/Delete\n        â”‚               â”‚         â”‚               â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                         â”‚\n                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                              â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ Assign Permissionsâ”‚\n                    â”‚   to Groups       â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ Assign Groups   â”‚\n                    â”‚   to Users      â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ User Permissionsâ”‚\n                    â”‚   (Aggregated)  â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n ```\n\n### User Permission Resolution Flow\n\n```\n1. User Makes Request\n   â”‚\n   â”œâ”€â–º Extract JWT Token\n   â”‚\n   â”œâ”€â–º Get User ID from Token\n   â”‚\n   â”œâ”€â–º Get User Groups\n   â”‚   â””â”€â–º Query UserGroup table\n   â”‚\n   â”œâ”€â–º Get Group Permissions\n   â”‚   â””â”€â–º Query GroupPermission for each group\n   â”‚\n   â”œâ”€â–º Aggregate Permissions\n   â”‚   â””â”€â–º Combine all permissions from all groups\n   â”‚\n   â””â”€â–º Check Required Permission\n       â””â”€â–º Verify permission exists in aggregated list\n\n ```\n\n## Error Handling\n\n### Common Error Responses\n\n**400 Bad Request - Invalid Payload:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Invalid request payload\",\n  \"error\": \"name and codename are required\",\n  \"statusCode\": 400\n}\n\n ```\n\n**403 Forbidden - Permission Denied:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Permission denied\",\n  \"error\": \"Insufficient permissions\",\n  \"statusCode\": 403\n}\n\n ```\n\n**404 Not Found:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Group not found\",\n  \"error\": \"Group with provided ID does not exist\",\n  \"statusCode\": 404\n}\n\n ```\n\n**409 Conflict - Duplicate Entry:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Duplicate entry\",\n  \"error\": \"Group with this name or codename already exists\",\n  \"statusCode\": 409\n}\n\n ```\n\n---\n\n## Best Practices\n\n1. **Permission Codenames**: Use lowercase with underscores (e.g., `view_dashboard`)\n    \n2. **Group Codenames**: Use lowercase (e.g., `admin`, `user`)\n    \n3. **System Groups**: Don't delete system groups (is_system = true)\n    \n4. **Permission Assignment**: Assign permissions to groups, not directly to users\n    \n5. **Group Assignment**: Assign groups to users, not permissions directly\n    \n6. **Permission Aggregation**: User permissions are aggregated from all assigned groups\n    \n7. **Role Flags**: User role flags are automatically updated when groups are assigned\n    \n8. **Validation**: Always validate permission/group codenames before assignment\n    \n\n---\n\n**Last Updated**: January 2025"
				},
				{
					"name": "Groups",
					"item": [
						{
							"name": "groups",
							"id": "50285861-57d40f0b-f33b-4c13-8211-0bb8b521819c",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/groups",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"groups"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"response": [
								{
									"id": "50285861-aba6b144-02a2-4c21-ba94-898aaca2da69",
									"name": "profile",
									"originalRequest": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "{{domain.com}}/{{mode}}/settings/profile",
											"host": [
												"{{domain.com}}"
											],
											"path": [
												"{{mode}}",
												"settings",
												"profile"
											],
											"query": [
												{
													"key": "page",
													"value": "1",
													"disabled": true
												},
												{
													"key": "page_size",
													"value": "1",
													"disabled": true
												}
											]
										}
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Server",
											"value": "openresty"
										},
										{
											"key": "Date",
											"value": "Sun, 16 Nov 2025 07:46:55 GMT"
										},
										{
											"key": "Content-Type",
											"value": "application/json",
											"description": "",
											"type": "text"
										},
										{
											"key": "Content-Length",
											"value": "994"
										},
										{
											"key": "Connection",
											"value": "keep-alive"
										},
										{
											"key": "X-XSS-Protection",
											"value": "1; mode=block"
										},
										{
											"key": "X-Content-Type-Options",
											"value": "nosniff"
										},
										{
											"key": "X-Frame-Options",
											"value": "DENY"
										},
										{
											"key": "Referrer-Policy",
											"value": "strict-origin-when-cross-origin"
										},
										{
											"key": "Permissions-Policy",
											"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
										},
										{
											"key": "X-Permitted-Cross-Domain-Policies",
											"value": "none"
										},
										{
											"key": "Content-Security-Policy",
											"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
										},
										{
											"key": "X-Served-By",
											"value": "v3.staging.winsta.pro"
										}
									],
									"cookie": [],
									"responseTime": null,
									"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
								}
							]
						},
						{
							"name": "get-groups",
							"id": "50285861-70017596-36c8-451c-9cd8-48b875802e26",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/groups/9c93cc19-7325-45e4-8f03-7ea80850170d?page=1&page_size=1",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"groups",
										"9c93cc19-7325-45e4-8f03-7ea80850170d"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "page_size",
											"value": "1"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "create",
							"id": "50285861-c342fe27-18e5-4943-8bd9-bc2d9cb72b10",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"first_name\": \"MR\",\n  \"last_name\": \"DAS\",\n  \"country\": \"Nepal\",\n  \"bio\": \"Full Stack Developer\",\n  \"email\": \"demo@gmail.com\",\n  \"language\": \"en\",\n  \"gender\":\"Male\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/permissions",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"permissions"
									]
								}
							},
							"response": []
						},
						{
							"name": "Assign permissions to group",
							"id": "50285861-58abefa3-c401-44fa-a732-13d2fa2a9b47",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"first_name\": \"MR\",\n  \"last_name\": \"DAS\",\n  \"country\": \"Nepal\",\n  \"bio\": \"Full Stack Developer\",\n  \"email\": \"demo@gmail.com\",\n  \"language\": \"en\",\n  \"gender\":\"Male\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/groups/:group_id/permissions",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"groups",
										":group_id",
										"permissions"
									],
									"variable": [
										{
											"key": "group_id",
											"value": ""
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "update",
							"id": "50285861-2e9fa2b7-cf72-4135-9647-ea37479efa4b",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "PUT",
								"header": [],
								"body": {
									"mode": "formdata",
									"formdata": [
										{
											"key": "file",
											"type": "file",
											"src": "/home/mrdas/Downloads/Rameshkumardas.jpg"
										}
									]
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/groups/groups_id",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"groups",
										"groups_id"
									]
								}
							},
							"response": []
						},
						{
							"name": "delete-groups",
							"id": "50285861-bdc18525-782f-4b51-a9f4-d2aa744b7767",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": [
										{
											"key": "token",
											"value": "{{access_token}}",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"new_email\": \"mrdasdeveloper@gmail.com\",\n  \"otp\": \"123456\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{domain.com}}/{{mode}}/groups/permission_id",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"groups",
										"permission_id"
									]
								}
							},
							"response": []
						}
					],
					"id": "50285861-04904baf-c2dd-4c05-bf85-441c9f9bb2e1",
					"description": "# Permissions & Groups Router\n\n> **Complete Documentation for Permission and Group Management Endpoints** \n  \n\nThis router handles all permission and group management operations including CRUD operations for permissions and groups, assigning permissions to groups, and managing user-group relationships.\n\n## ğŸ“‹ Table of Contents\n\n- [Overview](#overview)\n    \n- [Endpoints](#endpoints)\n    \n    - [Permissions](#permissions)\n        \n    - [Groups](#groups)\n        \n    - [User Permissions &amp; Groups](#user-permissions--groups)\n        \n- [Workflows](#workflows)\n    \n- [Error Handling](#error-handling)\n    \n\n## Overview\n\nThe Permissions & Groups router provides comprehensive role-based access control (RBAC) functionality including:\n\n- **Permission Management**: Create, read, update, and delete permissions\n    \n- **Group Management**: Create, read, update, and delete groups\n    \n- **Permission Assignment**: Assign permissions to groups\n    \n- **User-Group Assignment**: Assign groups to users\n    \n- **Permission Queries**: Get user permissions and groups\n    \n\n**Base Path:** `/{MODE}/permissions`, `/{MODE}/groups`, `/{MODE}/users`\n\n**Authentication:** All endpoints require authentication\n\n**Permissions:** Various permissions required (see each endpoint)\n\n## Endpoints\n\n### Permissions\n\n#### Get All Permissions\n\n**Endpoint:** `GET /{MODE}/permissions`\n\n**Description:** Get list of all permissions in the system.\n\n**Authentication:** Required  \n**Permission:** `view_permission`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permissions retrieved successfully\",\n  \"data\": {\n    \"permissions\": [\n      {\n        \"permission_id\": \"uuid\",\n        \"name\": \"View Dashboard\",\n        \"codename\": \"view_dashboard\",\n        \"description\": \"Permission to view dashboard\",\n        \"category\": \"dashboard\"\n      }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_permission)\n   â”‚\n   â”œâ”€â–º Get All Permissions\n   â”‚   â””â”€â–º prisma.permission.findMany()\n   â”‚\n   â””â”€â–º Return Permissions List\n\n ```\n\n---\n\n#### Get Permission by ID\n\n**Endpoint:** `GET /{MODE}/permissions/:permission_id`\n\n**Description:** Get a specific permission by ID.\n\n**Authentication:** Required  \n**Permission:** `view_permission`\n\n**Parameters:**\n\n- `permission_id` (path): Permission UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permission retrieved successfully\",\n  \"data\": {\n    \"permission\": {\n      \"permission_id\": \"uuid\",\n      \"name\": \"View Dashboard\",\n      \"codename\": \"view_dashboard\",\n      \"description\": \"Permission to view dashboard\",\n      \"category\": \"dashboard\"\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_permission)\n   â”‚\n   â”œâ”€â–º Get Permission by ID\n   â”‚   â””â”€â–º prisma.permission.findUnique()\n   â”‚\n   â””â”€â–º Return Permission Data\n\n ```\n\n---\n\n#### Create Permission\n\n**Endpoint:** `POST /{MODE}/permissions`\n\n**Description:** Create a new permission.\n\n**Authentication:** Required  \n**Permission:** `add_permission`\n\n**Request Body:**\n\n``` json\n{\n  \"name\": \"View Dashboard\",\n  \"codename\": \"view_dashboard\",\n  \"description\": \"Permission to view dashboard\",\n  \"category\": \"dashboard\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permission created successfully\",\n  \"data\": {\n    \"permission\": {\n      \"permission_id\": \"uuid\",\n      \"name\": \"View Dashboard\",\n      \"codename\": \"view_dashboard\",\n      \"description\": \"Permission to view dashboard\",\n      \"category\": \"dashboard\"\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (add_permission)\n   â”‚\n   â”œâ”€â–º Validate Request Data\n   â”‚   â”œâ”€â–º name required\n   â”‚   â”œâ”€â–º codename required\n   â”‚   â””â”€â–º codename must be unique\n   â”‚\n   â”œâ”€â–º Create Permission\n   â”‚   â””â”€â–º prisma.permission.create()\n   â”‚\n   â””â”€â–º Return Created Permission\n\n ```\n\n---\n\n#### Update Permission\n\n**Endpoint:** `PUT /{MODE}/permissions/:permission_id`\n\n**Description:** Update an existing permission.\n\n**Authentication:** Required  \n**Permission:** `edit_permission`\n\n**Parameters:**\n\n- `permission_id` (path): Permission UUID\n    \n\n**Request Body:**\n\n``` json\n{\n  \"name\": \"View Dashboard Updated\",\n  \"description\": \"Updated description\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permission updated successfully\",\n  \"data\": {\n    \"permission\": { ... }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_permission)\n   â”‚\n   â”œâ”€â–º Update Permission\n   â”‚   â””â”€â–º prisma.permission.update()\n   â”‚\n   â””â”€â–º Return Updated Permission\n\n ```\n\n---\n\n#### Delete Permission\n\n**Endpoint:** `DELETE /{MODE}/permissions/:permission_id`\n\n**Description:** Delete a permission. Removes permission from all groups.\n\n**Authentication:** Required  \n**Permission:** `delete_permission`\n\n**Parameters:**\n\n- `permission_id` (path): Permission UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permission deleted successfully\",\n  \"data\": { ... }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (delete_permission)\n   â”‚\n   â”œâ”€â–º Delete Permission\n   â”‚   â””â”€â–º prisma.permission.delete()\n   â”‚       â””â”€â–º Cascade deletes GroupPermission entries\n   â”‚\n   â””â”€â–º Return Success Response\n\n ```\n\n---\n\n### Groups\n\n#### Get All Groups\n\n**Endpoint:** `GET /{MODE}/groups`\n\n**Description:** Get list of all groups with their permissions.\n\n**Authentication:** Required  \n**Permission:** `view_group`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Groups retrieved successfully\",\n  \"data\": {\n    \"groups\": [\n      {\n        \"group_id\": \"uuid\",\n        \"name\": \"Admin\",\n        \"codename\": \"admin\",\n        \"description\": \"Administrator group\",\n        \"is_system\": true,\n        \"is_active\": true,\n        \"permissions\": [\n          {\n            \"permission_id\": \"uuid\",\n            \"name\": \"View Dashboard\",\n            \"codename\": \"view_dashboard\"\n          }\n        ]\n      }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_group)\n   â”‚\n   â”œâ”€â–º Get All Groups with Permissions\n   â”‚   â””â”€â–º prisma.group.findMany({ include: { permissions } })\n   â”‚\n   â””â”€â–º Return Groups List\n\n ```\n\n---\n\n#### Get Group by ID\n\n**Endpoint:** `GET /{MODE}/groups/:group_id`\n\n**Description:** Get a specific group with its permissions.\n\n**Authentication:** Required  \n**Permission:** `view_group`\n\n**Parameters:**\n\n- `group_id` (path): Group UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Group retrieved successfully\",\n  \"data\": {\n    \"group\": {\n      \"group_id\": \"uuid\",\n      \"name\": \"Admin\",\n      \"codename\": \"admin\",\n      \"permissions\": [ ... ]\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_group)\n   â”‚\n   â”œâ”€â–º Get Group by ID with Permissions\n   â”‚   â””â”€â–º prisma.group.findUnique({ include: { permissions } })\n   â”‚\n   â””â”€â–º Return Group Data\n\n ```\n\n---\n\n#### Create Group\n\n**Endpoint:** `POST /{MODE}/groups`\n\n**Description:** Create a new group.\n\n**Authentication:** Required  \n**Permission:** `add_group`\n\n**Request Body:**\n\n``` json\n{\n  \"name\": \"Moderator\",\n  \"codename\": \"moderator\",\n  \"description\": \"Moderator group\",\n  \"is_system\": false,\n  \"is_active\": true\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Group created successfully\",\n  \"data\": {\n    \"group\": { ... }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (add_group)\n   â”‚\n   â”œâ”€â–º Validate Request Data\n   â”‚   â”œâ”€â–º name required\n   â”‚   â”œâ”€â–º codename required\n   â”‚   â””â”€â–º codename must be unique\n   â”‚\n   â”œâ”€â–º Create Group\n   â”‚   â””â”€â–º prisma.group.create()\n   â”‚\n   â””â”€â–º Return Created Group\n\n ```\n\n---\n\n#### Update Group\n\n**Endpoint:** `PUT /{MODE}/groups/:group_id`\n\n**Description:** Update an existing group.\n\n**Authentication:** Required  \n**Permission:** `edit_group`\n\n**Parameters:**\n\n- `group_id` (path): Group UUID\n    \n\n**Request Body:**\n\n``` json\n{\n  \"name\": \"Moderator Updated\",\n  \"description\": \"Updated description\",\n  \"is_active\": true\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Group updated successfully\",\n  \"data\": {\n    \"group\": { ... }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_group)\n   â”‚\n   â”œâ”€â–º Update Group\n   â”‚   â””â”€â–º prisma.group.update()\n   â”‚\n   â””â”€â–º Return Updated Group\n\n ```\n\n---\n\n#### Delete Group\n\n**Endpoint:** `DELETE /{MODE}/groups/:group_id`\n\n**Description:** Delete a group. System groups cannot be deleted.\n\n**Authentication:** Required  \n**Permission:** `delete_group`\n\n**Parameters:**\n\n- `group_id` (path): Group UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Group deleted successfully\",\n  \"data\": {\n    \"group_id\": \"uuid\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (delete_group)\n   â”‚\n   â”œâ”€â–º Check if System Group\n   â”‚   â””â”€â–º If is_system = true, reject deletion\n   â”‚\n   â”œâ”€â–º Delete Group\n   â”‚   â””â”€â–º prisma.group.delete()\n   â”‚       â””â”€â–º Cascade deletes GroupPermission and UserGroup entries\n   â”‚\n   â””â”€â–º Return Success Response\n\n ```\n\n**Note:** System groups (is_system = true) cannot be deleted.\n\n---\n\n#### Assign Permissions to Group\n\n**Endpoint:** `POST /{MODE}/groups/:group_id/permissions`\n\n**Description:** Assign permissions to a group. Replaces existing permissions.\n\n**Authentication:** Required  \n**Permission:** `edit_group`\n\n**Parameters:**\n\n- `group_id` (path): Group UUID\n    \n\n**Request Body:**\n\n``` json\n{\n  \"permission_ids\": [\"uuid1\", \"uuid2\", \"uuid3\"]\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permissions assigned successfully\",\n  \"data\": {\n    \"group\": {\n      \"group_id\": \"uuid\",\n      \"permissions\": [ ... ]\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_group)\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â””â”€â–º permission_ids must be array\n   â”‚\n   â”œâ”€â–º Delete Existing Permissions\n   â”‚   â””â”€â–º prisma.groupPermission.deleteMany()\n   â”‚\n   â”œâ”€â–º Create New Permission Assignments\n   â”‚   â””â”€â–º prisma.groupPermission.createMany()\n   â”‚\n   â”œâ”€â–º Get Updated Group with Permissions\n   â”‚\n   â””â”€â–º Return Updated Group\n\n ```\n\n---\n\n### User Permissions & Groups\n\n#### Get User Groups\n\n**Endpoint:** `GET /{MODE}/users/:user_id/groups`\n\n**Description:** Get all groups assigned to a user.\n\n**Authentication:** Required  \n**Permission:** `view_user`\n\n**Parameters:**\n\n- `user_id` (path): User UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User groups retrieved successfully\",\n  \"data\": {\n    \"user_id\": \"uuid\",\n    \"groups\": [\n      {\n        \"group_id\": \"uuid\",\n        \"name\": \"Admin\",\n        \"codename\": \"admin\"\n      }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_user)\n   â”‚\n   â”œâ”€â–º Get User Groups\n   â”‚   â””â”€â–º getUserGroups(user_id)\n   â”‚\n   â””â”€â–º Return User Groups\n\n ```\n\n---\n\n#### Get User Permissions\n\n**Endpoint:** `GET /{MODE}/users/:user_id/permissions`\n\n**Description:** Get all permissions for a user (from all groups).\n\n**Authentication:** Required  \n**Permission:** `view_user`\n\n**Parameters:**\n\n- `user_id` (path): User UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User permissions retrieved successfully\",\n  \"data\": {\n    \"user_id\": \"uuid\",\n    \"permissions\": [\n      {\n        \"permission_id\": \"uuid\",\n        \"name\": \"View Dashboard\",\n        \"codename\": \"view_dashboard\"\n      }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_user)\n   â”‚\n   â”œâ”€â–º Get User Permissions\n   â”‚   â””â”€â–º getUserPermissions(user_id)\n   â”‚       â””â”€â–º Aggregates permissions from all user groups\n   â”‚\n   â””â”€â–º Return User Permissions\n\n ```\n\n---\n\n#### Assign Groups to User\n\n**Endpoint:** `POST /{MODE}/users/:user_id/groups`\n\n**Description:** Assign groups to a user. Uses group codenames. Updates user role flags.\n\n**Authentication:** Required  \n**Permission:** `assign_groups`\n\n**Parameters:**\n\n- `user_id` (path): User UUID\n    \n\n**Request Body:**\n\n``` json\n{\n  \"group_codenames\": [\"admin\", \"user\"]\n}\n\n ```\n\n**Valid Codenames:** `super_admin`, `admin`, `developer`, `business`, `accountant`, `user`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Groups assigned successfully (user role flags updated)\",\n  \"data\": {\n    \"user_id\": \"uuid\",\n    \"groups\": [ ... ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (assign_groups)\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â”œâ”€â–º group_codenames must be array\n   â”‚   â””â”€â–º Validate codenames (must be valid)\n   â”‚\n   â”œâ”€â–º Get Assigned By User ID\n   â”‚   â””â”€â–º From JWT token\n   â”‚\n   â”œâ”€â–º Assign Groups to User\n   â”‚   â”œâ”€â–º Delete existing UserGroup entries\n   â”‚   â”œâ”€â–º Create new UserGroup entries\n   â”‚   â””â”€â–º Update user role flags (is_superuser, is_admin, etc.)\n   â”‚\n   â”œâ”€â–º Get Updated User Groups\n   â”‚\n   â””â”€â–º Return User Groups\n\n ```\n\n**Note:** This endpoint updates user role flags (is_superuser, is_admin, etc.) based on assigned groups.\n\n---\n\n#### Get My Groups\n\n**Endpoint:** `GET /{MODE}/users/me/groups`\n\n**Description:** Get all groups for the current authenticated user.\n\n**Authentication:** Required  \n**Permission:** `view_profile`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User groups retrieved successfully\",\n  \"data\": {\n    \"groups\": [ ... ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_profile)\n   â”‚\n   â”œâ”€â–º Get Current User ID\n   â”‚   â””â”€â–º From JWT token\n   â”‚\n   â”œâ”€â–º Get User Groups\n   â”‚   â””â”€â–º getUserGroups(userId)\n   â”‚\n   â””â”€â–º Return User Groups\n\n ```\n\n---\n\n#### Get My Permissions\n\n**Endpoint:** `GET /{MODE}/users/me/permissions`\n\n**Description:** Get all permissions for the current authenticated user.\n\n**Authentication:** Required  \n**Permission:** `view_profile`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User permissions retrieved successfully\",\n  \"data\": {\n    \"permissions\": [ ... ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_profile)\n   â”‚\n   â”œâ”€â–º Get Current User ID\n   â”‚   â””â”€â–º From JWT token\n   â”‚\n   â”œâ”€â–º Get User Permissions\n   â”‚   â””â”€â–º getUserPermissions(userId)\n   â”‚\n   â””â”€â–º Return User Permissions\n\n ```\n\n---\n\n## Workflows\n\n### Complete Permission Management Flow\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚          Permission & Group Management Flow                 â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                â”‚                           â”‚\n                â–¼                           â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚  Permissions  â”‚         â”‚    Groups     â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                           â”‚\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚               â”‚         â”‚               â”‚\n        â–¼               â–¼         â–¼               â–¼\n    Create/Read    Update/Delete  Create/Read  Update/Delete\n        â”‚               â”‚         â”‚               â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                         â”‚\n                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                              â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ Assign Permissionsâ”‚\n                    â”‚   to Groups       â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ Assign Groups   â”‚\n                    â”‚   to Users      â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ User Permissionsâ”‚\n                    â”‚   (Aggregated)  â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n ```\n\n### User Permission Resolution Flow\n\n```\n1. User Makes Request\n   â”‚\n   â”œâ”€â–º Extract JWT Token\n   â”‚\n   â”œâ”€â–º Get User ID from Token\n   â”‚\n   â”œâ”€â–º Get User Groups\n   â”‚   â””â”€â–º Query UserGroup table\n   â”‚\n   â”œâ”€â–º Get Group Permissions\n   â”‚   â””â”€â–º Query GroupPermission for each group\n   â”‚\n   â”œâ”€â–º Aggregate Permissions\n   â”‚   â””â”€â–º Combine all permissions from all groups\n   â”‚\n   â””â”€â–º Check Required Permission\n       â””â”€â–º Verify permission exists in aggregated list\n\n ```\n\n## Error Handling\n\n### Common Error Responses\n\n**400 Bad Request - Invalid Payload:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Invalid request payload\",\n  \"error\": \"name and codename are required\",\n  \"statusCode\": 400\n}\n\n ```\n\n**403 Forbidden - Permission Denied:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Permission denied\",\n  \"error\": \"Insufficient permissions\",\n  \"statusCode\": 403\n}\n\n ```\n\n**404 Not Found:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Group not found\",\n  \"error\": \"Group with provided ID does not exist\",\n  \"statusCode\": 404\n}\n\n ```\n\n**409 Conflict - Duplicate Entry:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Duplicate entry\",\n  \"error\": \"Group with this name or codename already exists\",\n  \"statusCode\": 409\n}\n\n ```\n\n---\n\n## Best Practices\n\n1. **Permission Codenames**: Use lowercase with underscores (e.g., `view_dashboard`)\n    \n2. **Group Codenames**: Use lowercase (e.g., `admin`, `user`)\n    \n3. **System Groups**: Don't delete system groups (is_system = true)\n    \n4. **Permission Assignment**: Assign permissions to groups, not directly to users\n    \n5. **Group Assignment**: Assign groups to users, not permissions directly\n    \n6. **Permission Aggregation**: User permissions are aggregated from all assigned groups\n    \n7. **Role Flags**: User role flags are automatically updated when groups are assigned\n    \n8. **Validation**: Always validate permission/group codenames before assignment\n    \n\n---\n\n**Last Updated**: January 2025"
				},
				{
					"name": "Get user's groups",
					"id": "50285861-b6135432-1bd0-4068-8786-f23faa7b7bb5",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/groups",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"groups"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-eb280aec-e53b-4994-ae54-db273b1eb330",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "Get user's permissions",
					"id": "50285861-f5fdc3a7-df17-4a7b-8cc3-ce64a31b0728",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/users/:user_id/permissions",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"users",
								":user_id",
								"permissions"
							],
							"variable": [
								{
									"key": "user_id",
									"value": ""
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Assign groups to user",
					"id": "50285861-b377f374-5c51-49c7-ab5a-922ec005a3c9",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"first_name\": \"MR\",\n  \"last_name\": \"DAS\",\n  \"country\": \"Nepal\",\n  \"bio\": \"Full Stack Developer\",\n  \"email\": \"demo@gmail.com\",\n  \"language\": \"en\",\n  \"gender\":\"Male\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/api/users/:user_id/groups",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"api",
								"users",
								":user_id",
								"groups"
							],
							"variable": [
								{
									"key": "user_id",
									"value": ""
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get current user's groups",
					"id": "50285861-a7b2d388-096b-4ff1-9ce3-68708e86b0eb",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"first_name\": \"MR\",\n  \"last_name\": \"DAS\",\n  \"country\": \"Nepal\",\n  \"bio\": \"Full Stack Developer\",\n  \"email\": \"demo@gmail.com\",\n  \"language\": \"en\",\n  \"gender\":\"Male\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/users/me/groups",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"users",
								"me",
								"groups"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get current user's permissions",
					"id": "50285861-3e304cf2-2a70-48ea-a125-df06aa43cdd3",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/users/me/permissions",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"users",
								"me",
								"permissions"
							]
						}
					},
					"response": []
				}
			],
			"id": "50285861-f81d3f2c-7527-47cf-be70-012fd526b923",
			"description": "# Permissions & Groups Router\n\n> **Complete Documentation for Permission and Group Management Endpoints** \n  \n\nThis router handles all permission and group management operations including CRUD operations for permissions and groups, assigning permissions to groups, and managing user-group relationships.\n\n## ğŸ“‹ Table of Contents\n\n- [Overview](#overview)\n    \n- [Endpoints](#endpoints)\n    \n    - [Permissions](#permissions)\n        \n    - [Groups](#groups)\n        \n    - [User Permissions &amp; Groups](#user-permissions--groups)\n        \n- [Workflows](#workflows)\n    \n- [Error Handling](#error-handling)\n    \n\n## Overview\n\nThe Permissions & Groups router provides comprehensive role-based access control (RBAC) functionality including:\n\n- **Permission Management**: Create, read, update, and delete permissions\n    \n- **Group Management**: Create, read, update, and delete groups\n    \n- **Permission Assignment**: Assign permissions to groups\n    \n- **User-Group Assignment**: Assign groups to users\n    \n- **Permission Queries**: Get user permissions and groups\n    \n\n**Base Path:** `/{MODE}/permissions`, `/{MODE}/groups`, `/{MODE}/users`\n\n**Authentication:** All endpoints require authentication\n\n**Permissions:** Various permissions required (see each endpoint)\n\n## Endpoints\n\n### Permissions\n\n#### Get All Permissions\n\n**Endpoint:** `GET /{MODE}/permissions`\n\n**Description:** Get list of all permissions in the system.\n\n**Authentication:** Required  \n**Permission:** `view_permission`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permissions retrieved successfully\",\n  \"data\": {\n    \"permissions\": [\n      {\n        \"permission_id\": \"uuid\",\n        \"name\": \"View Dashboard\",\n        \"codename\": \"view_dashboard\",\n        \"description\": \"Permission to view dashboard\",\n        \"category\": \"dashboard\"\n      }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_permission)\n   â”‚\n   â”œâ”€â–º Get All Permissions\n   â”‚   â””â”€â–º prisma.permission.findMany()\n   â”‚\n   â””â”€â–º Return Permissions List\n\n ```\n\n---\n\n#### Get Permission by ID\n\n**Endpoint:** `GET /{MODE}/permissions/:permission_id`\n\n**Description:** Get a specific permission by ID.\n\n**Authentication:** Required  \n**Permission:** `view_permission`\n\n**Parameters:**\n\n- `permission_id` (path): Permission UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permission retrieved successfully\",\n  \"data\": {\n    \"permission\": {\n      \"permission_id\": \"uuid\",\n      \"name\": \"View Dashboard\",\n      \"codename\": \"view_dashboard\",\n      \"description\": \"Permission to view dashboard\",\n      \"category\": \"dashboard\"\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_permission)\n   â”‚\n   â”œâ”€â–º Get Permission by ID\n   â”‚   â””â”€â–º prisma.permission.findUnique()\n   â”‚\n   â””â”€â–º Return Permission Data\n\n ```\n\n---\n\n#### Create Permission\n\n**Endpoint:** `POST /{MODE}/permissions`\n\n**Description:** Create a new permission.\n\n**Authentication:** Required  \n**Permission:** `add_permission`\n\n**Request Body:**\n\n``` json\n{\n  \"name\": \"View Dashboard\",\n  \"codename\": \"view_dashboard\",\n  \"description\": \"Permission to view dashboard\",\n  \"category\": \"dashboard\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permission created successfully\",\n  \"data\": {\n    \"permission\": {\n      \"permission_id\": \"uuid\",\n      \"name\": \"View Dashboard\",\n      \"codename\": \"view_dashboard\",\n      \"description\": \"Permission to view dashboard\",\n      \"category\": \"dashboard\"\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (add_permission)\n   â”‚\n   â”œâ”€â–º Validate Request Data\n   â”‚   â”œâ”€â–º name required\n   â”‚   â”œâ”€â–º codename required\n   â”‚   â””â”€â–º codename must be unique\n   â”‚\n   â”œâ”€â–º Create Permission\n   â”‚   â””â”€â–º prisma.permission.create()\n   â”‚\n   â””â”€â–º Return Created Permission\n\n ```\n\n---\n\n#### Update Permission\n\n**Endpoint:** `PUT /{MODE}/permissions/:permission_id`\n\n**Description:** Update an existing permission.\n\n**Authentication:** Required  \n**Permission:** `edit_permission`\n\n**Parameters:**\n\n- `permission_id` (path): Permission UUID\n    \n\n**Request Body:**\n\n``` json\n{\n  \"name\": \"View Dashboard Updated\",\n  \"description\": \"Updated description\"\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permission updated successfully\",\n  \"data\": {\n    \"permission\": { ... }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_permission)\n   â”‚\n   â”œâ”€â–º Update Permission\n   â”‚   â””â”€â–º prisma.permission.update()\n   â”‚\n   â””â”€â–º Return Updated Permission\n\n ```\n\n---\n\n#### Delete Permission\n\n**Endpoint:** `DELETE /{MODE}/permissions/:permission_id`\n\n**Description:** Delete a permission. Removes permission from all groups.\n\n**Authentication:** Required  \n**Permission:** `delete_permission`\n\n**Parameters:**\n\n- `permission_id` (path): Permission UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permission deleted successfully\",\n  \"data\": { ... }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (delete_permission)\n   â”‚\n   â”œâ”€â–º Delete Permission\n   â”‚   â””â”€â–º prisma.permission.delete()\n   â”‚       â””â”€â–º Cascade deletes GroupPermission entries\n   â”‚\n   â””â”€â–º Return Success Response\n\n ```\n\n---\n\n### Groups\n\n#### Get All Groups\n\n**Endpoint:** `GET /{MODE}/groups`\n\n**Description:** Get list of all groups with their permissions.\n\n**Authentication:** Required  \n**Permission:** `view_group`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Groups retrieved successfully\",\n  \"data\": {\n    \"groups\": [\n      {\n        \"group_id\": \"uuid\",\n        \"name\": \"Admin\",\n        \"codename\": \"admin\",\n        \"description\": \"Administrator group\",\n        \"is_system\": true,\n        \"is_active\": true,\n        \"permissions\": [\n          {\n            \"permission_id\": \"uuid\",\n            \"name\": \"View Dashboard\",\n            \"codename\": \"view_dashboard\"\n          }\n        ]\n      }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_group)\n   â”‚\n   â”œâ”€â–º Get All Groups with Permissions\n   â”‚   â””â”€â–º prisma.group.findMany({ include: { permissions } })\n   â”‚\n   â””â”€â–º Return Groups List\n\n ```\n\n---\n\n#### Get Group by ID\n\n**Endpoint:** `GET /{MODE}/groups/:group_id`\n\n**Description:** Get a specific group with its permissions.\n\n**Authentication:** Required  \n**Permission:** `view_group`\n\n**Parameters:**\n\n- `group_id` (path): Group UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Group retrieved successfully\",\n  \"data\": {\n    \"group\": {\n      \"group_id\": \"uuid\",\n      \"name\": \"Admin\",\n      \"codename\": \"admin\",\n      \"permissions\": [ ... ]\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_group)\n   â”‚\n   â”œâ”€â–º Get Group by ID with Permissions\n   â”‚   â””â”€â–º prisma.group.findUnique({ include: { permissions } })\n   â”‚\n   â””â”€â–º Return Group Data\n\n ```\n\n---\n\n#### Create Group\n\n**Endpoint:** `POST /{MODE}/groups`\n\n**Description:** Create a new group.\n\n**Authentication:** Required  \n**Permission:** `add_group`\n\n**Request Body:**\n\n``` json\n{\n  \"name\": \"Moderator\",\n  \"codename\": \"moderator\",\n  \"description\": \"Moderator group\",\n  \"is_system\": false,\n  \"is_active\": true\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Group created successfully\",\n  \"data\": {\n    \"group\": { ... }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (add_group)\n   â”‚\n   â”œâ”€â–º Validate Request Data\n   â”‚   â”œâ”€â–º name required\n   â”‚   â”œâ”€â–º codename required\n   â”‚   â””â”€â–º codename must be unique\n   â”‚\n   â”œâ”€â–º Create Group\n   â”‚   â””â”€â–º prisma.group.create()\n   â”‚\n   â””â”€â–º Return Created Group\n\n ```\n\n---\n\n#### Update Group\n\n**Endpoint:** `PUT /{MODE}/groups/:group_id`\n\n**Description:** Update an existing group.\n\n**Authentication:** Required  \n**Permission:** `edit_group`\n\n**Parameters:**\n\n- `group_id` (path): Group UUID\n    \n\n**Request Body:**\n\n``` json\n{\n  \"name\": \"Moderator Updated\",\n  \"description\": \"Updated description\",\n  \"is_active\": true\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Group updated successfully\",\n  \"data\": {\n    \"group\": { ... }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_group)\n   â”‚\n   â”œâ”€â–º Update Group\n   â”‚   â””â”€â–º prisma.group.update()\n   â”‚\n   â””â”€â–º Return Updated Group\n\n ```\n\n---\n\n#### Delete Group\n\n**Endpoint:** `DELETE /{MODE}/groups/:group_id`\n\n**Description:** Delete a group. System groups cannot be deleted.\n\n**Authentication:** Required  \n**Permission:** `delete_group`\n\n**Parameters:**\n\n- `group_id` (path): Group UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Group deleted successfully\",\n  \"data\": {\n    \"group_id\": \"uuid\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (delete_group)\n   â”‚\n   â”œâ”€â–º Check if System Group\n   â”‚   â””â”€â–º If is_system = true, reject deletion\n   â”‚\n   â”œâ”€â–º Delete Group\n   â”‚   â””â”€â–º prisma.group.delete()\n   â”‚       â””â”€â–º Cascade deletes GroupPermission and UserGroup entries\n   â”‚\n   â””â”€â–º Return Success Response\n\n ```\n\n**Note:** System groups (is_system = true) cannot be deleted.\n\n---\n\n#### Assign Permissions to Group\n\n**Endpoint:** `POST /{MODE}/groups/:group_id/permissions`\n\n**Description:** Assign permissions to a group. Replaces existing permissions.\n\n**Authentication:** Required  \n**Permission:** `edit_group`\n\n**Parameters:**\n\n- `group_id` (path): Group UUID\n    \n\n**Request Body:**\n\n``` json\n{\n  \"permission_ids\": [\"uuid1\", \"uuid2\", \"uuid3\"]\n}\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Permissions assigned successfully\",\n  \"data\": {\n    \"group\": {\n      \"group_id\": \"uuid\",\n      \"permissions\": [ ... ]\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (edit_group)\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â””â”€â–º permission_ids must be array\n   â”‚\n   â”œâ”€â–º Delete Existing Permissions\n   â”‚   â””â”€â–º prisma.groupPermission.deleteMany()\n   â”‚\n   â”œâ”€â–º Create New Permission Assignments\n   â”‚   â””â”€â–º prisma.groupPermission.createMany()\n   â”‚\n   â”œâ”€â–º Get Updated Group with Permissions\n   â”‚\n   â””â”€â–º Return Updated Group\n\n ```\n\n---\n\n### User Permissions & Groups\n\n#### Get User Groups\n\n**Endpoint:** `GET /{MODE}/users/:user_id/groups`\n\n**Description:** Get all groups assigned to a user.\n\n**Authentication:** Required  \n**Permission:** `view_user`\n\n**Parameters:**\n\n- `user_id` (path): User UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User groups retrieved successfully\",\n  \"data\": {\n    \"user_id\": \"uuid\",\n    \"groups\": [\n      {\n        \"group_id\": \"uuid\",\n        \"name\": \"Admin\",\n        \"codename\": \"admin\"\n      }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_user)\n   â”‚\n   â”œâ”€â–º Get User Groups\n   â”‚   â””â”€â–º getUserGroups(user_id)\n   â”‚\n   â””â”€â–º Return User Groups\n\n ```\n\n---\n\n#### Get User Permissions\n\n**Endpoint:** `GET /{MODE}/users/:user_id/permissions`\n\n**Description:** Get all permissions for a user (from all groups).\n\n**Authentication:** Required  \n**Permission:** `view_user`\n\n**Parameters:**\n\n- `user_id` (path): User UUID\n    \n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User permissions retrieved successfully\",\n  \"data\": {\n    \"user_id\": \"uuid\",\n    \"permissions\": [\n      {\n        \"permission_id\": \"uuid\",\n        \"name\": \"View Dashboard\",\n        \"codename\": \"view_dashboard\"\n      }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_user)\n   â”‚\n   â”œâ”€â–º Get User Permissions\n   â”‚   â””â”€â–º getUserPermissions(user_id)\n   â”‚       â””â”€â–º Aggregates permissions from all user groups\n   â”‚\n   â””â”€â–º Return User Permissions\n\n ```\n\n---\n\n#### Assign Groups to User\n\n**Endpoint:** `POST /{MODE}/users/:user_id/groups`\n\n**Description:** Assign groups to a user. Uses group codenames. Updates user role flags.\n\n**Authentication:** Required  \n**Permission:** `assign_groups`\n\n**Parameters:**\n\n- `user_id` (path): User UUID\n    \n\n**Request Body:**\n\n``` json\n{\n  \"group_codenames\": [\"admin\", \"user\"]\n}\n\n ```\n\n**Valid Codenames:** `super_admin`, `admin`, `developer`, `business`, `accountant`, `user`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Groups assigned successfully (user role flags updated)\",\n  \"data\": {\n    \"user_id\": \"uuid\",\n    \"groups\": [ ... ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (assign_groups)\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â”œâ”€â–º group_codenames must be array\n   â”‚   â””â”€â–º Validate codenames (must be valid)\n   â”‚\n   â”œâ”€â–º Get Assigned By User ID\n   â”‚   â””â”€â–º From JWT token\n   â”‚\n   â”œâ”€â–º Assign Groups to User\n   â”‚   â”œâ”€â–º Delete existing UserGroup entries\n   â”‚   â”œâ”€â–º Create new UserGroup entries\n   â”‚   â””â”€â–º Update user role flags (is_superuser, is_admin, etc.)\n   â”‚\n   â”œâ”€â–º Get Updated User Groups\n   â”‚\n   â””â”€â–º Return User Groups\n\n ```\n\n**Note:** This endpoint updates user role flags (is_superuser, is_admin, etc.) based on assigned groups.\n\n---\n\n#### Get My Groups\n\n**Endpoint:** `GET /{MODE}/users/me/groups`\n\n**Description:** Get all groups for the current authenticated user.\n\n**Authentication:** Required  \n**Permission:** `view_profile`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User groups retrieved successfully\",\n  \"data\": {\n    \"groups\": [ ... ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_profile)\n   â”‚\n   â”œâ”€â–º Get Current User ID\n   â”‚   â””â”€â–º From JWT token\n   â”‚\n   â”œâ”€â–º Get User Groups\n   â”‚   â””â”€â–º getUserGroups(userId)\n   â”‚\n   â””â”€â–º Return User Groups\n\n ```\n\n---\n\n#### Get My Permissions\n\n**Endpoint:** `GET /{MODE}/users/me/permissions`\n\n**Description:** Get all permissions for the current authenticated user.\n\n**Authentication:** Required  \n**Permission:** `view_profile`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User permissions retrieved successfully\",\n  \"data\": {\n    \"permissions\": [ ... ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_profile)\n   â”‚\n   â”œâ”€â–º Get Current User ID\n   â”‚   â””â”€â–º From JWT token\n   â”‚\n   â”œâ”€â–º Get User Permissions\n   â”‚   â””â”€â–º getUserPermissions(userId)\n   â”‚\n   â””â”€â–º Return User Permissions\n\n ```\n\n---\n\n## Workflows\n\n### Complete Permission Management Flow\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚          Permission & Group Management Flow                 â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                â”‚                           â”‚\n                â–¼                           â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚  Permissions  â”‚         â”‚    Groups     â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                           â”‚\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚               â”‚         â”‚               â”‚\n        â–¼               â–¼         â–¼               â–¼\n    Create/Read    Update/Delete  Create/Read  Update/Delete\n        â”‚               â”‚         â”‚               â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                         â”‚\n                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                              â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ Assign Permissionsâ”‚\n                    â”‚   to Groups       â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ Assign Groups   â”‚\n                    â”‚   to Users      â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ User Permissionsâ”‚\n                    â”‚   (Aggregated)  â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n ```\n\n### User Permission Resolution Flow\n\n```\n1. User Makes Request\n   â”‚\n   â”œâ”€â–º Extract JWT Token\n   â”‚\n   â”œâ”€â–º Get User ID from Token\n   â”‚\n   â”œâ”€â–º Get User Groups\n   â”‚   â””â”€â–º Query UserGroup table\n   â”‚\n   â”œâ”€â–º Get Group Permissions\n   â”‚   â””â”€â–º Query GroupPermission for each group\n   â”‚\n   â”œâ”€â–º Aggregate Permissions\n   â”‚   â””â”€â–º Combine all permissions from all groups\n   â”‚\n   â””â”€â–º Check Required Permission\n       â””â”€â–º Verify permission exists in aggregated list\n\n ```\n\n## Error Handling\n\n### Common Error Responses\n\n**400 Bad Request - Invalid Payload:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Invalid request payload\",\n  \"error\": \"name and codename are required\",\n  \"statusCode\": 400\n}\n\n ```\n\n**403 Forbidden - Permission Denied:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Permission denied\",\n  \"error\": \"Insufficient permissions\",\n  \"statusCode\": 403\n}\n\n ```\n\n**404 Not Found:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Group not found\",\n  \"error\": \"Group with provided ID does not exist\",\n  \"statusCode\": 404\n}\n\n ```\n\n**409 Conflict - Duplicate Entry:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Duplicate entry\",\n  \"error\": \"Group with this name or codename already exists\",\n  \"statusCode\": 409\n}\n\n ```\n\n---\n\n## Best Practices\n\n1. **Permission Codenames**: Use lowercase with underscores (e.g., `view_dashboard`)\n    \n2. **Group Codenames**: Use lowercase (e.g., `admin`, `user`)\n    \n3. **System Groups**: Don't delete system groups (is_system = true)\n    \n4. **Permission Assignment**: Assign permissions to groups, not directly to users\n    \n5. **Group Assignment**: Assign groups to users, not permissions directly\n    \n6. **Permission Aggregation**: User permissions are aggregated from all assigned groups\n    \n7. **Role Flags**: User role flags are automatically updated when groups are assigned\n    \n8. **Validation**: Always validate permission/group codenames before assignment\n    \n\n---\n\n**Last Updated**: January 2025"
		},
		{
			"name": "Dashboard & Analytics",
			"item": [
				{
					"name": "overview",
					"id": "50285861-cc5e8472-97d5-43d5-a6c5-28bb9b9c74a4",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/dashboard/overview",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"dashboard",
								"overview"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-a8a60883-5aaa-4dda-9b24-f9eae98df868",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "users-by-status",
					"id": "50285861-7cbf87e2-3a94-4925-a3c0-a5386e7fbfb7",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/dashboard/overview",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"dashboard",
								"overview"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-75d97e21-230c-4b3f-852f-747304f42cef",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "users-by-type",
					"id": "50285861-de4c6970-4553-4d51-9195-24408cf26b4d",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/dashboard/users-by-type",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"dashboard",
								"users-by-type"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-843f8d4d-53b4-4ff7-8cec-872563e4c019",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "users-by-auth-type",
					"id": "50285861-7b781d43-4797-4b12-ad95-64f0b7313771",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/dashboard/users-by-auth-type",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"dashboard",
								"users-by-auth-type"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-49c1bf52-38ef-4667-8074-d43b3003af1c",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "users-by-country",
					"id": "50285861-eb72129f-57ee-4e84-9940-10d845c5b3b8",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/dashboard/users-by-auth-type",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"dashboard",
								"users-by-auth-type"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-6106f2fd-b29e-44ca-9a20-b932876de91a",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "users-by-language",
					"id": "50285861-ce5bfadc-10e7-49e2-8e91-8d08230fc159",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/dashboard/users-by-auth-type",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"dashboard",
								"users-by-auth-type"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-cf266f34-52f0-49cd-b254-b6ce1e74eae5",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "user-growth",
					"id": "50285861-a8c0cb22-1edb-4f9b-9071-c77d9ad18483",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/dashboard/users-by-auth-type",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"dashboard",
								"users-by-auth-type"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-71766b17-7412-4008-9fa8-96beb18f77e7",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "role-statistics",
					"id": "50285861-8664bde7-dfd0-4292-90ae-571e977a2c8b",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/dashboard/role-statistics",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"dashboard",
								"role-statistics"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-f0f57713-afbd-4ffe-939a-2b80e9185a67",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "recent-sign-ins",
					"id": "50285861-78f31f16-97bf-4e96-aa58-f1a0dc1b954a",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/dashboard/users-by-auth-type",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"dashboard",
								"users-by-auth-type"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-7d799640-7d0e-49dc-98ba-98a4ccb07198",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "all-statistics",
					"id": "50285861-3b4f2a04-0ad6-4b95-b432-8bd164937da7",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/dashboard/all-statistics",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"dashboard",
								"all-statistics"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-97e0aed5-2649-425f-9690-8022a0da0c45",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "activity-statistics",
					"id": "50285861-218dc01d-4069-42de-9fb0-c16a61c71205",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/activity/statistics",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"activity",
								"statistics"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-4292cb5c-04a5-45a8-a704-2ded795febe1",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				}
			],
			"id": "50285861-2bae48ec-9229-45fb-8631-74ecc18858aa",
			"description": "# Dashboard Router\n\n> **Complete Documentation for Dashboard Analytics and Statistics Endpoints** \n  \n\nThis router provides comprehensive dashboard statistics and analytics for user management, including user counts, growth metrics, role statistics, and sign-in analytics.\n\n## ğŸ“‹ Table of Contents\n\n- [Overview](#overview)\n    \n- [Endpoints](#endpoints)\n    - [Dashboard Overview](#dashboard-overview)\n        \n    - [Users by Status](#users-by-status)\n        \n    - [Users by Type](#users-by-type)\n        \n    - [Users by Auth Type](#users-by-auth-type)\n        \n    - [Users by Country](#users-by-country)\n        \n    - [Users by Language](#users-by-language)\n        \n    - [User Growth](#user-growth)\n        \n    - [Role Statistics](#role-statistics)\n        \n    - [Recent Sign-ins](#recent-sign-ins)\n        \n    - [All Statistics](#all-statistics)\n        \n- [Workflows](#workflows)\n    \n- [Error Handling](#error-handling)\n    \n\n## Overview\n\nThe Dashboard router provides analytics and statistics endpoints for monitoring user data, growth metrics, and system health. These endpoints are essential for:\n\n- **Administrative Dashboards**: Display key metrics and KPIs\n    \n- **User Analytics**: Track user growth and demographics\n    \n- **System Monitoring**: Monitor user activity and engagement\n    \n- **Reporting**: Generate reports for stakeholders\n    \n\n**Base Path:** `/{MODE}/dashboard`\n\n**Authentication:** All endpoints require authentication\n\n**Permissions:** All endpoints require `view_dashboard` permission\n\n## Endpoints\n\n### Dashboard Overview\n\n**Endpoint:** `GET /{MODE}/dashboard/overview`\n\n**Description:** Returns comprehensive dashboard overview statistics including total users, active users, verified users, and new user counts.\n\n**Authentication:** Required  \n**Permission:** `view_dashboard`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Dashboard overview retrieved successfully\",\n  \"data\": {\n    \"overview\": {\n      \"total_users\": 1000,\n      \"active_users\": 850,\n      \"verified_users\": 800,\n      \"email_verified\": 750,\n      \"phone_verified\": 700,\n      \"new_users\": {\n        \"today\": 10,\n        \"this_week\": 50,\n        \"this_month\": 200\n      },\n      \"users_with_sign_in\": 600\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_dashboard)\n   â”‚\n   â”œâ”€â–º Calculate Date Boundaries\n   â”‚   â”œâ”€â–º Today (00:00:00)\n   â”‚   â”œâ”€â–º Tomorrow (00:00:00)\n   â”‚   â”œâ”€â–º Week Ago (7 days)\n   â”‚   â””â”€â–º Month Start (1st of month)\n   â”‚\n   â”œâ”€â–º Execute Parallel Queries\n   â”‚   â”œâ”€â–º Total Users Count\n   â”‚   â”œâ”€â–º Active Users Count (is_active = true)\n   â”‚   â”œâ”€â–º Verified Users Count (is_verified = true)\n   â”‚   â”œâ”€â–º Email Verified Count\n   â”‚   â”œâ”€â–º Phone Verified Count\n   â”‚   â”œâ”€â–º New Users Today\n   â”‚   â”œâ”€â–º New Users This Week\n   â”‚   â”œâ”€â–º New Users This Month\n   â”‚   â””â”€â–º Users With Sign-in (last_sign_in_at not null)\n   â”‚\n   â””â”€â–º Return Aggregated Statistics\n\n ```\n\n**Metrics Explained:**\n\n- `total_users`: Total number of registered users\n    \n- `active_users`: Users with `is_active = true`\n    \n- `verified_users`: Users with `is_verified = true`\n    \n- `email_verified`: Users with verified email addresses\n    \n- `phone_verified`: Users with verified phone numbers\n    \n- `new_users.today`: Users created today\n    \n- `new_users.this_week`: Users created in last 7 days\n    \n- `new_users.this_month`: Users created this month\n    \n- `users_with_sign_in`: Users who have signed in at least once\n    \n\n---\n\n### Users by Status\n\n**Endpoint:** `GET /{MODE}/dashboard/users-by-status`\n\n**Description:** Returns count of users grouped by status (ACTIVE, INACTIVE, etc.).\n\n**Authentication:** Required  \n**Permission:** `view_dashboard`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User statistics by status retrieved successfully\",\n  \"data\": {\n    \"users_by_status\": [\n      { \"status\": \"ACTIVE\", \"count\": 850 },\n      { \"status\": \"INACTIVE\", \"count\": 150 }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_dashboard)\n   â”‚\n   â”œâ”€â–º Group Users by Status\n   â”‚   â””â”€â–º prisma.user.groupBy({ by: ['status'] })\n   â”‚\n   â”œâ”€â–º Count Users per Status\n   â”‚   â””â”€â–º Order by count (descending)\n   â”‚\n   â””â”€â–º Return Status Statistics\n\n ```\n\n**Status Values:**\n\n- `ACTIVE`: Active users\n    \n- `INACTIVE`: Inactive users\n    \n- Other custom statuses as defined in the system\n    \n\n---\n\n### Users by Type\n\n**Endpoint:** `GET /{MODE}/dashboard/users-by-type`\n\n**Description:** Returns count of users grouped by user_type (customer, business, etc.).\n\n**Authentication:** Required  \n**Permission:** `view_dashboard`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User statistics by type retrieved successfully\",\n  \"data\": {\n    \"users_by_type\": [\n      { \"user_type\": \"customer\", \"count\": 800 },\n      { \"user_type\": \"business\", \"count\": 200 }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_dashboard)\n   â”‚\n   â”œâ”€â–º Group Users by Type\n   â”‚   â””â”€â–º prisma.user.groupBy({ by: ['user_type'] })\n   â”‚\n   â”œâ”€â–º Count Users per Type\n   â”‚   â””â”€â–º Order by count (descending)\n   â”‚\n   â””â”€â–º Return Type Statistics\n\n ```\n\n**User Types:**\n\n- `customer`: Regular customers\n    \n- `business`: Business accounts\n    \n- Other custom types as defined in the system\n    \n\n---\n\n### Users by Auth Type\n\n**Endpoint:** `GET /{MODE}/dashboard/users-by-auth-type`\n\n**Description:** Returns count of users grouped by authentication type (email, phone, etc.).\n\n**Authentication:** Required  \n**Permission:** `view_dashboard`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User statistics by auth type retrieved successfully\",\n  \"data\": {\n    \"users_by_auth_type\": [\n      { \"auth_type\": \"email\", \"count\": 600 },\n      { \"auth_type\": \"phone\", \"count\": 400 }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_dashboard)\n   â”‚\n   â”œâ”€â–º Group Users by Auth Type\n   â”‚   â””â”€â–º prisma.user.groupBy({ by: ['auth_type'] })\n   â”‚\n   â”œâ”€â–º Count Users per Auth Type\n   â”‚   â””â”€â–º Order by count (descending)\n   â”‚\n   â””â”€â–º Return Auth Type Statistics\n\n ```\n\n**Auth Types:**\n\n- `email`: Email-based authentication\n    \n- `phone`: Phone-based authentication\n    \n\n---\n\n### Users by Country\n\n**Endpoint:** `GET /{MODE}/dashboard/users-by-country`\n\n**Description:** Returns count of users grouped by country (top 20 countries).\n\n**Authentication:** Required  \n**Permission:** `view_dashboard`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User statistics by country retrieved successfully\",\n  \"data\": {\n    \"users_by_country\": [\n      { \"country\": \"US\", \"count\": 300 },\n      { \"country\": \"UK\", \"count\": 200 },\n      { \"country\": \"CA\", \"count\": 150 }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_dashboard)\n   â”‚\n   â”œâ”€â–º Group Users by Country\n   â”‚   â””â”€â–º prisma.user.groupBy({ by: ['country'], take: 20 })\n   â”‚\n   â”œâ”€â–º Count Users per Country\n   â”‚   â””â”€â–º Order by count (descending)\n   â”‚\n   â””â”€â–º Return Top 20 Countries\n\n ```\n\n**Note:** Returns top 20 countries by user count.\n\n---\n\n### Users by Language\n\n**Endpoint:** `GET /{MODE}/dashboard/users-by-language`\n\n**Description:** Returns count of users grouped by language preference.\n\n**Authentication:** Required  \n**Permission:** `view_dashboard`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User statistics by language retrieved successfully\",\n  \"data\": {\n    \"users_by_language\": [\n      { \"language\": \"en\", \"count\": 700 },\n      { \"language\": \"ar\", \"count\": 300 }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_dashboard)\n   â”‚\n   â”œâ”€â–º Group Users by Language\n   â”‚   â””â”€â–º prisma.user.groupBy({ by: ['language'] })\n   â”‚\n   â”œâ”€â–º Count Users per Language\n   â”‚   â””â”€â–º Order by count (descending)\n   â”‚\n   â””â”€â–º Return Language Statistics\n\n ```\n\n**Language Codes:** ISO 639-1 codes (en, ar, etc.)\n\n---\n\n### User Growth\n\n**Endpoint:** `GET /{MODE}/dashboard/user-growth`\n\n**Description:** Returns user sign-up statistics over time (daily, weekly, monthly).\n\n**Authentication:** Required  \n**Permission:** `view_dashboard`\n\n**Query Parameters:**\n\n- `period` (optional): Time period for growth statistics\n    - `daily` (default): Daily growth\n        \n    - `weekly`: Weekly growth\n        \n    - `monthly`: Monthly growth\n        \n- `days` (optional): Number of days to look back (for daily period, default: 30, max: 365)\n    \n\n**Request:**\n\n``` http\nGET /dev/v1/dashboard/user-growth?period=daily&days=30 HTTP/1.1\nAuthorization: Bearer <token>\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"User growth statistics retrieved successfully\",\n  \"data\": {\n    \"period\": \"daily\",\n    \"growth\": [\n      { \"period\": \"2025-01-01\", \"count\": 10 },\n      { \"period\": \"2025-01-02\", \"count\": 15 },\n      { \"period\": \"2025-01-03\", \"count\": 12 }\n    ]\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_dashboard)\n   â”‚\n   â”œâ”€â–º Extract Query Parameters\n   â”‚   â”œâ”€â–º period: daily/weekly/monthly (default: daily)\n   â”‚   â””â”€â–º days: number (default: 30, max: 365)\n   â”‚\n   â”œâ”€â–º Execute Raw SQL Query\n   â”‚   â”œâ”€â–º Daily: DATE(created_at) with last N days\n   â”‚   â”œâ”€â–º Weekly: DATE_TRUNC('week', created_at) with last 12 weeks\n   â”‚   â””â”€â–º Monthly: DATE_TRUNC('month', created_at) with last 12 months\n   â”‚\n   â”œâ”€â–º Format Results\n   â”‚   â””â”€â–º Map to period and count\n   â”‚\n   â””â”€â–º Return Growth Statistics\n\n ```\n\n**Use Cases:**\n\n- Growth trend analysis\n    \n- User acquisition metrics\n    \n- Time-series visualization\n    \n- Reporting\n    \n\n---\n\n### Role Statistics\n\n**Endpoint:** `GET /{MODE}/dashboard/role-statistics`\n\n**Description:** Returns count of users by role (admin, business, developer, etc.).\n\n**Authentication:** Required  \n**Permission:** `view_dashboard`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Role statistics retrieved successfully\",\n  \"data\": {\n    \"role_statistics\": {\n      \"superusers\": 5,\n      \"admins\": 10,\n      \"business\": 50,\n      \"developers\": 20,\n      \"accountants\": 15,\n      \"regular_users\": 900\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_dashboard)\n   â”‚\n   â”œâ”€â–º Get All Users\n   â”‚   â””â”€â–º prisma.user.findMany({ select: { user_id: true } })\n   â”‚\n   â”œâ”€â–º For Each User\n   â”‚   â”œâ”€â–º Get User Groups\n   â”‚   â”‚   â””â”€â–º getUserGroups(user_id)\n   â”‚   â”‚\n   â”‚   â””â”€â–º Count by Group Codename\n   â”‚       â”œâ”€â–º super_admin\n   â”‚       â”œâ”€â–º admin\n   â”‚       â”œâ”€â–º business\n   â”‚       â”œâ”€â–º developer\n   â”‚       â”œâ”€â–º accountant\n   â”‚       â””â”€â–º user\n   â”‚\n   â””â”€â–º Return Role Statistics\n\n ```\n\n**Note:** This endpoint iterates through all users to count roles. For large user bases, consider caching or optimization.\n\n**Roles:**\n\n- `superusers`: Users with super_admin group\n    \n- `admins`: Users with admin group\n    \n- `business`: Users with business group\n    \n- `developers`: Users with developer group\n    \n- `accountants`: Users with accountant group\n    \n- `regular_users`: Users with user group\n    \n\n---\n\n### Recent Sign-ins\n\n**Endpoint:** `GET /{MODE}/dashboard/recent-sign-ins`\n\n**Description:** Returns users who signed in recently within specified hours.\n\n**Authentication:** Required  \n**Permission:** `view_dashboard`\n\n**Query Parameters:**\n\n- `hours` (optional): Number of hours to look back (default: 24, max: 168)\n    \n\n**Request:**\n\n``` http\nGET /dev/v1/dashboard/recent-sign-ins?hours=24 HTTP/1.1\nAuthorization: Bearer <token>\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Recent sign-in statistics retrieved successfully\",\n  \"data\": {\n    \"recent_sign_ins\": {\n      \"total_with_sign_in\": 600,\n      \"last_hour\": 10,\n      \"last_24_hours\": 100,\n      \"today\": 150\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_dashboard)\n   â”‚\n   â”œâ”€â–º Extract Query Parameters\n   â”‚   â””â”€â–º hours: number (default: 24, max: 168)\n   â”‚\n   â”œâ”€â–º Calculate Date Boundaries\n   â”‚   â”œâ”€â–º One Hour Ago\n   â”‚   â”œâ”€â–º N Hours Ago (from query)\n   â”‚   â””â”€â–º Today (00:00:00)\n   â”‚\n   â”œâ”€â–º Execute Parallel Queries\n   â”‚   â”œâ”€â–º Total Users With Sign-in (last_sign_in_at not null)\n   â”‚   â”œâ”€â–º Sign-ins Last Hour\n   â”‚   â”œâ”€â–º Sign-ins Last N Hours\n   â”‚   â””â”€â–º Sign-ins Today\n   â”‚\n   â””â”€â–º Return Sign-in Statistics\n\n ```\n\n**Metrics:**\n\n- `total_with_sign_in`: Total users who have signed in at least once\n    \n- `last_hour`: Users who signed in within last hour\n    \n- `last_{N}_hours`: Users who signed in within last N hours\n    \n- `today`: Users who signed in today\n    \n\n---\n\n### All Statistics\n\n**Endpoint:** `GET /{MODE}/dashboard/all-statistics`\n\n**Description:** Returns comprehensive dashboard statistics including all metrics from other endpoints.\n\n**Authentication:** Required  \n**Permission:** `view_dashboard`\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"All dashboard statistics retrieved successfully\",\n  \"data\": {\n    \"overview\": {\n      \"total_users\": 1000,\n      \"active_users\": 850,\n      \"verified_users\": 800,\n      \"email_verified\": 750,\n      \"phone_verified\": 700,\n      \"new_users\": {\n        \"today\": 10,\n        \"this_week\": 50,\n        \"this_month\": 200\n      }\n    },\n    \"by_status\": [\n      { \"status\": \"ACTIVE\", \"count\": 850 },\n      { \"status\": \"INACTIVE\", \"count\": 150 }\n    ],\n    \"by_type\": [\n      { \"user_type\": \"customer\", \"count\": 800 },\n      { \"user_type\": \"business\", \"count\": 200 }\n    ],\n    \"by_auth_type\": [\n      { \"auth_type\": \"email\", \"count\": 600 },\n      { \"auth_type\": \"phone\", \"count\": 400 }\n    ],\n    \"roles\": {\n      \"superusers\": 5,\n      \"admins\": 10,\n      \"business\": 50,\n      \"developers\": 20,\n      \"accountants\": 15,\n      \"regular_users\": 900\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (view_dashboard)\n   â”‚\n   â”œâ”€â–º Calculate Date Boundaries\n   â”‚   â”œâ”€â–º Today, Tomorrow, Week Ago, Month Start\n   â”‚\n   â”œâ”€â–º Execute All Queries in Parallel\n   â”‚   â”œâ”€â–º Overview Statistics (9 queries)\n   â”‚   â”œâ”€â–º Users by Status (groupBy)\n   â”‚   â”œâ”€â–º Users by Type (groupBy)\n   â”‚   â”œâ”€â–º Users by Auth Type (groupBy)\n   â”‚   â””â”€â–º Role Statistics (iterate users)\n   â”‚\n   â”œâ”€â–º Aggregate All Results\n   â”‚\n   â””â”€â–º Return Comprehensive Statistics\n\n ```\n\n**Use Cases:**\n\n- Dashboard initialization\n    \n- Comprehensive reporting\n    \n- Single API call for all metrics\n    \n- Admin panel data loading\n    \n\n---\n\n## Workflows\n\n### Complete Dashboard Data Flow\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚              Dashboard Statistics Request                   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                              â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚  Validate Auth  â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ Check Permissionâ”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                â”‚                         â”‚\n                â–¼                         â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚ Single Metric â”‚         â”‚ All Metrics   â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                         â”‚\n                â–¼                         â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚ Execute Query â”‚         â”‚Parallel Queriesâ”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                         â”‚\n                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ Format Results  â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ Return Response â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n ```\n\n## Error Handling\n\n### Common Error Responses\n\n**401 Unauthorized:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Authentication required\",\n  \"error\": \"Invalid or missing token\",\n  \"statusCode\": 401\n}\n\n ```\n\n**403 Forbidden:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Permission denied\",\n  \"error\": \"Insufficient permissions. Requires view_dashboard permission\",\n  \"statusCode\": 403\n}\n\n ```\n\n**500 Internal Server Error:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Dashboard error\",\n  \"error\": \"Error details\",\n  \"statusCode\": 500\n}\n\n ```\n\n### Error Handling Workflow\n\n```\n1. Error Occurs\n   â”‚\n   â”œâ”€â–º Log Error\n   â”‚   â””â”€â–º Winston Logger with module: 'Dashboard'\n   â”‚\n   â”œâ”€â–º Format Error Response\n   â”‚   â””â”€â–º ERROR.fromMap('DASHBOARD_ERROR')\n   â”‚\n   â””â”€â–º Return Error Response\n       â””â”€â–º Appropriate Status Code\n\n ```\n\n---\n\n## Best Practices\n\n1. **Caching**: Consider caching dashboard statistics for better performance\n    \n2. **Pagination**: For large datasets, implement pagination\n    \n3. **Optimization**: Role statistics endpoint may be slow for large user bases - consider optimization\n    \n4. **Rate Limiting**: Implement rate limiting for dashboard endpoints\n    \n5. **Data Aggregation**: Use database aggregation functions for better performance\n    \n6. **Date Boundaries**: Always use proper date boundaries for time-based queries\n    \n7. **Parallel Queries**: Use Promise.all() for parallel queries when possible\n    \n8. **Error Handling**: Handle database errors gracefully\n    \n\n---\n\n## Performance Considerations\n\n1. **Role Statistics**: This endpoint iterates through all users - consider caching or background jobs\n    \n2. **User Growth**: Raw SQL queries are used for date aggregations - ensure proper indexing\n    \n3. **All Statistics**: Combines multiple queries - may be slower, consider caching\n    \n4. **Database Indexing**: Ensure proper indexes on:\n    - `created_at` (for growth queries)\n        \n    - `last_sign_in_at` (for sign-in queries)\n        \n    - `status`, `user_type`, `auth_type`, `country`, `language` (for groupBy queries)\n        \n\n---\n\n**Last Updated**: January 2025"
		},
		{
			"name": "Health",
			"item": [
				{
					"name": "health",
					"id": "50285861-113efe27-f8a1-41d5-84dc-42ec1e015ddd",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/dashboard/overview",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"dashboard",
								"overview"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-763a5ad7-d829-40c3-bf92-b803b39df7fe",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "health & system",
					"id": "50285861-41468e5f-84cf-4bf8-9cf8-d0efd3b4d51b",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/auth/dashboard/overview",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"auth",
								"dashboard",
								"overview"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-5405706a-412b-4162-873d-35419325f672",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				},
				{
					"name": "test-sentry",
					"id": "50285861-81252658-be8f-4df4-bec9-636cc9985f66",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/test-sentry",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"test-sentry"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"disabled": true
								},
								{
									"key": "page_size",
									"value": "1",
									"disabled": true
								}
							]
						}
					},
					"response": [
						{
							"id": "50285861-e0e09580-eea9-4e93-9484-3f02b68fac19",
							"name": "profile",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{domain.com}}/{{mode}}/settings/profile",
									"host": [
										"{{domain.com}}"
									],
									"path": [
										"{{mode}}",
										"settings",
										"profile"
									],
									"query": [
										{
											"key": "page",
											"value": "1",
											"disabled": true
										},
										{
											"key": "page_size",
											"value": "1",
											"disabled": true
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Server",
									"value": "openresty"
								},
								{
									"key": "Date",
									"value": "Sun, 16 Nov 2025 07:46:55 GMT"
								},
								{
									"key": "Content-Type",
									"value": "application/json",
									"description": "",
									"type": "text"
								},
								{
									"key": "Content-Length",
									"value": "994"
								},
								{
									"key": "Connection",
									"value": "keep-alive"
								},
								{
									"key": "X-XSS-Protection",
									"value": "1; mode=block"
								},
								{
									"key": "X-Content-Type-Options",
									"value": "nosniff"
								},
								{
									"key": "X-Frame-Options",
									"value": "DENY"
								},
								{
									"key": "Referrer-Policy",
									"value": "strict-origin-when-cross-origin"
								},
								{
									"key": "Permissions-Policy",
									"value": "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), fullscreen=(self)"
								},
								{
									"key": "X-Permitted-Cross-Domain-Policies",
									"value": "none"
								},
								{
									"key": "Content-Security-Policy",
									"value": "default-src 'self' https://storage.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://cdn.tailwindcss.com https://code.jquery.com https://unpkg.com https://storage.googleapis.com https://*.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://cdn.jsdelivr.net https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com https://storage.googleapis.com https://*.googleapis.com data:; img-src 'self' data: https: blob: https://storage.googleapis.com https://*.googleapis.com https://ui-avatars.com https://upload.wikimedia.org; media-src 'self' https: blob: https://storage.googleapis.com https://*.googleapis.com; connect-src 'self' https://api.tap.company https://storage.googleapis.com https://*.googleapis.com https://cdn.jsdelivr.net wss: ws:; frame-ancestors 'none'; base-uri 'self' https://storage.googleapis.com; form-action 'self'; upgrade-insecure-requests;"
								},
								{
									"key": "X-Served-By",
									"value": "v3.staging.winsta.pro"
								}
							],
							"cookie": [],
							"responseTime": null,
							"body": "{\n    \"success\": true,\n    \"id\": \"565beb6b-7b12-4a08-a775-2e8423677d1b\",\n    \"message\": \"User profile fetched successfully\",\n    \"data\": {\n        \"user_id\": \"a713d948-a6ff-4e19-b397-55a835445198\",\n        \"first_name\": \"MR\",\n        \"last_name\": \"DAS\",\n        \"email\": \"mrsuper300@gmail.com\",\n        \"phone_number\": {\n            \"phone\": \"+96598379785\"\n        },\n        \"country\": \"Nepal\",\n        \"gender\": \"Male\",\n        \"bio\": \"Full Stack Developer\",\n        \"user_name\": \"96598379785\",\n        \"show_kliky_watermark\": true,\n        \"ads_show_type\": \"public\",\n        \"auth_type\": \"phone\",\n        \"theme\": \"light\",\n        \"profile_accessibility\": \"public\",\n        \"user_type\": \"customer\",\n        \"language\": \"en\",\n        \"is_draft\": false,\n        \"is_active\": true,\n        \"is_verified\": true,\n        \"is_deleted\": false,\n        \"status\": \"Active\",\n        \"is_protected\": false,\n        \"is_trashed\": false,\n        \"last_sign_in_at\": \"2025-11-16T07:39:22.173870+00:00\",\n        \"created_at\": \"2025-11-16T06:45:02.043820+00:00\",\n        \"last_updated\": \"2025-11-16T07:40:12.063407+00:00\",\n        \"is_user\": true,\n        \"is_superuser\": false,\n        \"is_admin\": false,\n        \"is_business\": false,\n        \"is_accountant\": false,\n        \"is_developer\": false,\n        \"posts\": []\n    },\n    \"meta\": {\n        \"type\": \"dict\"\n    },\n    \"timestamp\": \"2025-11-16T07:46:55.781175Z\"\n}"
						}
					]
				}
			],
			"id": "50285861-ed47cae7-9b3c-466b-8ad9-06477003f0fa",
			"description": "# Health & Monitoring Router\n\n> **Complete Documentation for Health Check and System Monitoring Endpoints** \n  \n\nThis router provides endpoints for checking API health status, system information, and testing error tracking integration.\n\n## ğŸ“‹ Table of Contents\n\n- [Overview](#overview)\n    \n- [Endpoints](#endpoints)\n    \n    - [Health Check](#health-check)\n        \n    - [System Health Check](#system-health-check)\n        \n    - [Test Sentry](#test-sentry)\n        \n- [Workflows](#workflows)\n    \n- [Error Handling](#error-handling)\n    \n\n## Overview\n\nThe Health router provides monitoring and diagnostic endpoints that help track the API's operational status. These endpoints are essential for:\n\n- **Load Balancer Health Checks**: Verify service availability\n    \n- **System Monitoring**: Track resource usage and system metrics\n    \n- **Error Tracking Testing**: Validate Sentry integration\n    \n\n**Base Path:** `/{MODE}/health` or `/health` (for basic health check)\n\n**Authentication:** Most endpoints do not require authentication (except `/test-sentry`)\n\n## Endpoints\n\n### Health Check\n\n**Endpoint:** `GET /health` or `GET /{MODE}/health`\n\n**Description:** Returns the health status of the API service with environment information. This endpoint is typically used by load balancers and monitoring systems.\n\n**Authentication:** Not required\n\n**Request:**\n\n``` http\nGET /health HTTP/1.1\nHost: api.example.com\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Service is healthy\",\n  \"data\": {\n    \"status\": \"ok\"\n  },\n  \"meta\": {\n    \"service\": \"nodejs-backend-with-postgresql-api\",\n    \"status\": \"ok\",\n    \"env\": {\n      \"API_VERSION\": \"1.0.0\",\n      \"API_MODE\": \"development\",\n      \"MODE\": \"dev/v1\",\n      \"UTC\": \"UTC\",\n      \"DEBUG_MODE\": \"false\",\n      \"TIMEZONE\": \"UTC\",\n      \"LOG_LEVEL\": \"info\"\n    }\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Client Request\n   â”‚\n   â”œâ”€â–º Extract Environment Variables\n   â”‚   â”œâ”€â–º API_VERSION\n   â”‚   â”œâ”€â–º API_MODE\n   â”‚   â”œâ”€â–º MODE\n   â”‚   â”œâ”€â–º UTC\n   â”‚   â”œâ”€â–º DEBUG_MODE\n   â”‚   â”œâ”€â–º TIMEZONE\n   â”‚   â””â”€â–º LOG_LEVEL\n   â”‚\n   â”œâ”€â–º Build Response\n   â”‚   â”œâ”€â–º Status: \"ok\"\n   â”‚   â””â”€â–º Meta Information\n   â”‚\n   â””â”€â–º Return 200 OK\n\n ```\n\n**Use Cases:**\n\n- Load balancer health checks\n    \n- Container orchestration health probes\n    \n- Service discovery\n    \n- Monitoring dashboards\n    \n\n---\n\n### System Health Check\n\n**Endpoint:** `GET /{MODE}/health/system`\n\n**Description:** Returns detailed system information including CPU, memory, platform details, and environment configuration. Useful for system administrators and monitoring tools.\n\n**Authentication:** Not required\n\n**Request:**\n\n``` http\nGET /dev/v1/health/system HTTP/1.1\nHost: api.example.com\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"System health check completed\",\n  \"data\": {\n    \"status\": \"healthy\",\n    \"system_info\": {\n      \"platform\": \"linux\",\n      \"nodeVersion\": \"v18.0.0\",\n      \"cpuCount\": 4,\n      \"memoryTotal\": 8589934592,\n      \"memoryFree\": 4294967296,\n      \"memoryUsed\": 4294967296,\n      \"uptime\": 3600\n    },\n    \"environment\": {\n      \"API_VERSION\": \"1.0.0\",\n      \"API_MODE\": \"development\",\n      \"MODE\": \"dev/v1\",\n      \"DEBUG_MODE\": \"false\",\n      \"LOG_LEVEL\": \"info\"\n    },\n    \"timestamp\": 1704067200000\n  }\n}\n\n ```\n\n**Response Fields:**\n\n- `system_info.platform`: Operating system platform (linux, darwin, win32)\n    \n- `system_info.nodeVersion`: Node.js version\n    \n- `system_info.cpuCount`: Number of CPU cores\n    \n- `system_info.memoryTotal`: Total system memory in bytes\n    \n- `system_info.memoryFree`: Free memory in bytes\n    \n- `system_info.memoryUsed`: Used memory in bytes\n    \n- `system_info.uptime`: System uptime in seconds\n    \n- `environment`: Environment configuration variables\n    \n- `timestamp`: Unix timestamp of the check\n    \n\n**Workflow:**\n\n```\n1. Client Request\n   â”‚\n   â”œâ”€â–º Gather System Information\n   â”‚   â”œâ”€â–º Platform (process.platform)\n   â”‚   â”œâ”€â–º Node.js Version (process.version)\n   â”‚   â”œâ”€â–º CPU Count (os.cpus().length)\n   â”‚   â”œâ”€â–º Memory Stats (os.totalmem(), os.freemem())\n   â”‚   â””â”€â–º System Uptime (os.uptime())\n   â”‚\n   â”œâ”€â–º Gather Environment Info\n   â”‚   â”œâ”€â–º API_VERSION\n   â”‚   â”œâ”€â–º API_MODE\n   â”‚   â”œâ”€â–º MODE\n   â”‚   â”œâ”€â–º DEBUG_MODE\n   â”‚   â””â”€â–º LOG_LEVEL\n   â”‚\n   â”œâ”€â–º Calculate Memory Usage\n   â”‚   â””â”€â–º memoryUsed = totalmem - freemem\n   â”‚\n   â”œâ”€â–º Build Response\n   â”‚   â”œâ”€â–º Status: \"healthy\"\n   â”‚   â”œâ”€â–º System Information\n   â”‚   â”œâ”€â–º Environment Information\n   â”‚   â””â”€â–º Timestamp\n   â”‚\n   â””â”€â–º Return 200 OK\n\n ```\n\n**Use Cases:**\n\n- System resource monitoring\n    \n- Performance analysis\n    \n- Capacity planning\n    \n- Troubleshooting system issues\n    \n\n---\n\n### Test Sentry\n\n**Endpoint:** `GET /{MODE}/health/test-sentry`\n\n**Description:** Intentionally triggers different types of errors to test Sentry error tracking integration. Useful for validating error monitoring setup.\n\n**Authentication:** Required (Bearer token)\n\n**Query Parameters:**\n\n- `type` (optional): Type of error to test\n    \n    - `exception` (default): Manual exception capture\n        \n    - `message`: Manual message capture\n        \n    - `unhandled`: Unhandled error (caught by error handler)\n        \n    - `async`: Async error\n        \n\n**Request:**\n\n``` http\nGET /dev/v1/health/test-sentry?type=exception HTTP/1.1\nHost: api.example.com\nAuthorization: Bearer <token>\n\n ```\n\n**Response (Exception Type):**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Test exception sent to Sentry\",\n  \"data\": {\n    \"type\": \"exception\",\n    \"environment\": \"development\",\n    \"message\": \"Check your Sentry dashboard for the error\",\n    \"error\": \"Test Sentry Exception - This is a test error\"\n  }\n}\n\n ```\n\n**Response (Message Type):**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Test message sent to Sentry\",\n  \"data\": {\n    \"type\": \"message\",\n    \"environment\": \"development\",\n    \"message\": \"Check your Sentry dashboard for the message\"\n  }\n}\n\n ```\n\n**Response (Async Type):**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"Test async error scheduled\",\n  \"data\": {\n    \"type\": \"async\",\n    \"environment\": \"development\",\n    \"message\": \"Async error will be sent to Sentry in 100ms\"\n  }\n}\n\n ```\n\n**Workflow (Exception Type):**\n\n```\n1. Client Request with Authentication\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Extract Query Parameters\n   â”‚   â””â”€â–º type = \"exception\" (default)\n   â”‚\n   â”œâ”€â–º Set Sentry User Context\n   â”‚   â””â”€â–º If user available, set user info\n   â”‚\n   â”œâ”€â–º Add Breadcrumb\n   â”‚   â””â”€â–º Log test initiation\n   â”‚\n   â”œâ”€â–º Create Test Error\n   â”‚   â”œâ”€â–º Error Name: \"SentryTestError\"\n   â”‚   â””â”€â–º Error Message: \"Test Sentry Exception...\"\n   â”‚\n   â”œâ”€â–º Capture Exception in Sentry\n   â”‚   â”œâ”€â–º Add Tags (test_type, environment, endpoint)\n   â”‚   â””â”€â–º Add Extra Data (query, userAgent, IP)\n   â”‚\n   â””â”€â–º Return 200 OK with Success Message\n\n ```\n\n**Workflow (Unhandled Type):**\n\n```\n1. Client Request with Authentication\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Extract Query Parameters\n   â”‚   â””â”€â–º type = \"unhandled\"\n   â”‚\n   â”œâ”€â–º Throw Error\n   â”‚   â””â”€â–º \"Test Unhandled Error...\"\n   â”‚\n   â”œâ”€â–º Error Handler Catches\n   â”‚   â”œâ”€â–º Log Error\n   â”‚   â”œâ”€â–º Capture in Sentry\n   â”‚   â””â”€â–º Format Error Response\n   â”‚\n   â””â”€â–º Return 500 with Error Details\n\n ```\n\n**Workflow (Async Type):**\n\n```\n1. Client Request with Authentication\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Extract Query Parameters\n   â”‚   â””â”€â–º type = \"async\"\n   â”‚\n   â”œâ”€â–º Schedule Async Error\n   â”‚   â””â”€â–º setTimeout(() => {\n   â”‚       â””â”€â–º Capture Exception in Sentry\n   â”‚   }, 100)\n   â”‚\n   â””â”€â–º Return 200 OK Immediately\n       â””â”€â–º Error sent to Sentry after 100ms\n\n ```\n\n**Error Types:**\n\n1. **Exception**: Manually captures an exception with context\n    \n2. **Message**: Sends a warning message to Sentry\n    \n3. **Unhandled**: Throws an error that gets caught by the global error handler\n    \n4. **Async**: Schedules an async error to test async error tracking\n    \n\n**Use Cases:**\n\n- Testing Sentry integration\n    \n- Validating error tracking setup\n    \n- Debugging error monitoring\n    \n- Verifying error context capture\n    \n\n---\n\n## Workflows\n\n### Complete Health Check Flow\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    Health Check Request                     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                              â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚              Determine Endpoint Type                        â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚\nâ”‚  â”‚ Basic Health â”‚  â”‚ System Info  â”‚  â”‚ Test Sentry  â”‚       â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n          â”‚                  â”‚                  â”‚\n          â–¼                  â–¼                  â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Gather Env Vars â”‚ â”‚ Gather Sys Info â”‚ â”‚ Validate Auth   â”‚\nâ”‚ Return Status   â”‚ â”‚ Calculate Memoryâ”‚ â”‚ Test Error Type â”‚\nâ”‚                 â”‚ â”‚ Return Metrics  â”‚ â”‚ Capture Sentry  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n          â”‚                  â”‚                  â”‚\n          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    Return Response                          â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n ```\n\n## Error Handling\n\n### Health Check Errors\n\n**500 Internal Server Error:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Health check failed\",\n  \"error\": \"Error details\",\n  \"statusCode\": 500\n}\n\n ```\n\n**Common Error Scenarios:**\n\n- Environment variables not accessible\n    \n- System information gathering fails\n    \n- Sentry configuration issues (for test-sentry endpoint)\n    \n\n### Error Handling Workflow\n\n```\n1. Error Occurs\n   â”‚\n   â”œâ”€â–º Log Error\n   â”‚   â””â”€â–º Winston Logger\n   â”‚\n   â”œâ”€â–º Capture in Sentry (if applicable)\n   â”‚   â””â”€â–º captureException()\n   â”‚\n   â”œâ”€â–º Format Error Response\n   â”‚   â””â”€â–º ERROR.fromMap()\n   â”‚\n   â””â”€â–º Return Error Response\n       â””â”€â–º Appropriate Status Code\n\n ```\n\n---\n\n## Best Practices\n\n1. **Use Basic Health Check for Load Balancers**: The `/health` endpoint is lightweight and perfect for frequent health checks\n    \n2. **Use System Health for Monitoring**: The `/health/system` endpoint provides detailed metrics for monitoring dashboards\n    \n3. **Test Sentry Regularly**: Use `/test-sentry` to validate error tracking is working correctly\n    \n4. **Monitor Response Times**: Health checks should respond quickly (< 100ms)\n    \n5. **Cache System Info**: Consider caching system information if called frequently\n    \n6. **Secure Test Endpoint**: The test-sentry endpoint requires authentication to prevent abuse\n    \n\n---\n\n**Last Updated**: January 2025"
		},
		{
			"name": "Upload Media",
			"item": [
				{
					"name": "upload-media",
					"id": "50285861-0ff208a4-3a52-46af-9f4c-a5124799dd4e",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "/home/mrdas/Downloads/Rameshkumardas.jpg"
								},
								{
									"key": "url",
									"value": "",
									"type": "text",
									"disabled": true
								}
							]
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/upload-media",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"upload-media"
							]
						}
					},
					"response": []
				},
				{
					"name": "delete-media",
					"id": "50285861-6b7b0fdf-aafc-4084-8b5b-b32b4d9ae086",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "urlencoded",
							"urlencoded": []
						},
						"url": {
							"raw": "{{domain.com}}/{{mode}}/delete-media?url=https://storage.googleapis.com/klikyai-v3-bucket/UserProfile/mrdasdeveloper-d7232df3-cffd-4f9c-b8a8-6f5a3de5d304-%7C-d56522e9-5596-431f-876d-3d34f1e8293d.jpeg",
							"host": [
								"{{domain.com}}"
							],
							"path": [
								"{{mode}}",
								"delete-media"
							],
							"query": [
								{
									"key": "url",
									"value": "https://storage.googleapis.com/klikyai-v3-bucket/UserProfile/mrdasdeveloper-d7232df3-cffd-4f9c-b8a8-6f5a3de5d304-%7C-d56522e9-5596-431f-876d-3d34f1e8293d.jpeg"
								}
							]
						}
					},
					"response": []
				}
			],
			"id": "50285861-0e44ff0e-1496-4b2a-ab31-eef7c8a7b149",
			"description": "# File Upload Router\n\n> **Complete Documentation for Media File Upload and Management Endpoints** \n  \n\nThis router handles file upload operations including uploading files from URLs or direct file uploads to Google Cloud Storage, and deleting uploaded files.\n\n## ğŸ“‹ Table of Contents\n\n- [Overview](#overview)\n    \n- [Endpoints](#endpoints)\n    - [Upload Media](#upload-media)\n        \n    - [Delete Media](#delete-media)\n        \n- [Workflows](#workflows)\n    \n- [Error Handling](#error-handling)\n    \n\n## Overview\n\nThe File Upload router provides comprehensive media file management functionality including:\n\n- **File Upload**: Upload files directly or from URLs to Google Cloud Storage\n    \n- **File Deletion**: Delete files from Google Cloud Storage\n    \n- **Multiple Formats**: Support for images, documents, videos, and other file types\n    \n- **Size Limits**: 15MB maximum file size\n    \n- **Automatic Processing**: Automatic file type detection and content type handling\n    \n\n**Base Path:** `/{MODE}/upload-media`, `/{MODE}/delete-media`\n\n**Authentication:** All endpoints require authentication\n\n**Permissions:**\n\n- Upload: `add_upload` permission\n    \n- Delete: `delete_upload` permission\n    \n\n## Endpoints\n\n### Upload Media\n\n**Endpoint:** `POST /{MODE}/upload-media`\n\n**Description:** Upload a media file either from URL or direct file upload to Google Cloud Storage.\n\n**Authentication:** Required  \n**Permission:** `add_upload`\n\n**Request Options:**\n\n**Option 1: Direct File Upload (Multipart Form Data)**\n\n``` http\nPOST /dev/v1/upload-media HTTP/1.1\nAuthorization: Bearer <token>\nContent-Type: multipart/form-data\nfile: [binary file data]\n\n ```\n\n**Option 2: Upload from URL (Form Data)**\n\n``` http\nPOST /dev/v1/upload-media HTTP/1.1\nAuthorization: Bearer <token>\nContent-Type: application/x-www-form-urlencoded\nurl: https://example.com/image.jpg\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"File uploaded successfully\",\n  \"data\": {\n    \"url\": \"https://storage.googleapis.com/bucket-name/media/users/user-uuid-file.jpg\"\n  }\n}\n\n ```\n\n**Workflow (Direct File Upload):**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (add_upload)\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â””â”€â–º Check file or url exists\n   â”‚\n   â”œâ”€â–º Process File Upload\n   â”‚   â”œâ”€â–º Extract file buffer\n   â”‚   â”œâ”€â–º Get file extension from filename\n   â”‚   â””â”€â–º Get content type from mimetype\n   â”‚\n   â”œâ”€â–º Generate Object Key\n   â”‚   â””â”€â–º {userId}-|-{uuid}.{extension}\n   â”‚\n   â”œâ”€â–º Upload to Google Cloud Storage\n   â”‚   â”œâ”€â–º Folder: media/users\n   â”‚   â”œâ”€â–º Object Key: generated key\n   â”‚   â””â”€â–º uploadToGoogleStorageFromString()\n   â”‚\n   â””â”€â–º Return Public URL\n\n ```\n\n**Workflow (Upload from URL):**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (add_upload)\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â””â”€â–º Check url exists\n   â”‚\n   â”œâ”€â–º Download File from URL\n   â”‚   â”œâ”€â–º axios.get(url, { responseType: 'arraybuffer' })\n   â”‚   â”œâ”€â–º Max size: 15MB\n   â”‚   â””â”€â–º Convert to Buffer\n   â”‚\n   â”œâ”€â–º Extract File Information\n   â”‚   â”œâ”€â–º Extension from URL or Content-Type header\n   â”‚   â””â”€â–º Content type from response headers\n   â”‚\n   â”œâ”€â–º Generate Object Key\n   â”‚   â””â”€â–º {userId}-|-{uuid}.{extension}\n   â”‚\n   â”œâ”€â–º Upload to Google Cloud Storage\n   â”‚   â””â”€â–º uploadToGoogleStorageFromString()\n   â”‚\n   â””â”€â–º Return Public URL\n\n ```\n\n**Supported File Types:**\n\n- Images: jpg, jpeg, png, gif, webp, svg\n    \n- Documents: pdf, doc, docx, txt\n    \n- Videos: mp4, avi, mov, webm\n    \n- Other: Based on content type\n    \n\n**File Size Limit:** 15MB maximum\n\n**Storage Location:**\n\n- Folder: `media/users`\n    \n- Object Key Format: `{userId}-|-{uuid}.{extension}`\n    \n- Public URL: `https://storage.googleapis.com/{bucket-name}/media/users/{object-key}`\n    \n\n---\n\n### Delete Media\n\n**Endpoint:** `DELETE /{MODE}/delete-media`\n\n**Description:** Delete a media file from Google Cloud Storage.\n\n**Authentication:** Required  \n**Permission:** `delete_upload`\n\n**Query Parameters:**\n\n- `url` (required): GCS URL of the file to delete\n    \n\n**Request:**\n\n``` http\nDELETE /dev/v1/delete-media?url=https://storage.googleapis.com/bucket-name/media/users/user-uuid-file.jpg HTTP/1.1\nAuthorization: Bearer <token>\n\n ```\n\n**Response:**\n\n``` json\n{\n  \"success\": true,\n  \"message\": \"File deleted successfully from bucket 'bucket-name'\",\n  \"data\": {\n    \"bucket\": \"bucket-name\"\n  }\n}\n\n ```\n\n**Workflow:**\n\n```\n1. Authenticated Request\n   â”‚\n   â”œâ”€â–º Validate JWT Token\n   â”‚\n   â”œâ”€â–º Check Permission (delete_upload)\n   â”‚\n   â”œâ”€â–º Validate Request\n   â”‚   â””â”€â–º Check url parameter exists\n   â”‚\n   â”œâ”€â–º Validate Bucket Configuration\n   â”‚   â””â”€â–º Check GOOGLE_STORAGE_BUCKET_NAME exists\n   â”‚\n   â”œâ”€â–º Parse GCS URL\n   â”‚   â”œâ”€â–º Decode URL\n   â”‚   â”œâ”€â–º Validate domain (storage.googleapis.com)\n   â”‚   â””â”€â–º Extract bucket and object path\n   â”‚\n   â”œâ”€â–º Validate Bucket Match\n   â”‚   â””â”€â–º Ensure URL bucket matches configured bucket\n   â”‚\n   â”œâ”€â–º Extract Object Path\n   â”‚   â”œâ”€â–º Folder: media/users (or other)\n   â”‚   â””â”€â–º Object Key: file name\n   â”‚\n   â”œâ”€â–º Delete from Google Cloud Storage\n   â”‚   â””â”€â–º deleteFromGoogleStorage(folder, objectKey)\n   â”‚\n   â””â”€â–º Return Success Response\n\n ```\n\n**URL Format:**\n\n```\nhttps://storage.googleapis.com/{bucket-name}/{folder}/{object-key}\n\n ```\n\n**Example:**\n\n```\nhttps://storage.googleapis.com/my-bucket/media/users/user-123-file.jpg\n\n ```\n\n**Validation:**\n\n- URL must be from `storage.googleapis.com`\n    \n- Bucket in URL must match configured bucket\n    \n- URL must have valid path structure\n    \n\n---\n\n## Workflows\n\n### Complete File Upload Flow\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚              File Upload Flow                               â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                â”‚                           â”‚\n                â–¼                           â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚  Direct Upload â”‚         â”‚  Upload from â”‚\n        â”‚   (Multipart)  â”‚         â”‚     URL      â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                           â”‚\n                â–¼                           â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚ Extract File  â”‚         â”‚ Download File â”‚\n        â”‚   Buffer      â”‚         â”‚   from URL    â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                           â”‚\n                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                              â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ Get File Info   â”‚\n                    â”‚ (ext, type)     â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ Generate Key    â”‚\n                    â”‚ {userId}-uuid.extâ”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ Upload to GCS   â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ Return Public   â”‚\n                    â”‚      URL        â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n ```\n\n### File Deletion Flow\n\n```\n1. User Requests File Deletion\n   â”‚\n   â”œâ”€â–º Validate Authentication\n   â”‚   â””â”€â–º Check JWT token\n   â”‚\n   â”œâ”€â–º Check Permission\n   â”‚   â””â”€â–º delete_upload permission\n   â”‚\n   â”œâ”€â–º Validate URL Parameter\n   â”‚   â””â”€â–º URL must be provided\n   â”‚\n   â”œâ”€â–º Parse GCS URL\n   â”‚   â”œâ”€â–º Decode URL\n   â”‚   â”œâ”€â–º Validate domain\n   â”‚   â””â”€â–º Extract bucket and path\n   â”‚\n   â”œâ”€â–º Validate Bucket\n   â”‚   â””â”€â–º URL bucket must match config\n   â”‚\n   â”œâ”€â–º Extract Object Path\n   â”‚   â”œâ”€â–º Folder name\n   â”‚   â””â”€â–º Object key\n   â”‚\n   â”œâ”€â–º Delete from GCS\n   â”‚   â””â”€â–º deleteFromGoogleStorage()\n   â”‚\n   â””â”€â–º Return Success Response\n\n ```\n\n## Error Handling\n\n### Common Error Responses\n\n**400 Bad Request - No File or URL:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"File or URL required\",\n  \"error\": \"Either file or url must be provided\",\n  \"statusCode\": 400\n}\n\n ```\n\n**400 Bad Request - Invalid URL:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Invalid URL\",\n  \"error\": \"URL must be from storage.googleapis.com\",\n  \"statusCode\": 400\n}\n\n ```\n\n**401 Unauthorized:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Authentication required\",\n  \"error\": \"Invalid or missing token\",\n  \"statusCode\": 401\n}\n\n ```\n\n**403 Forbidden:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Permission denied\",\n  \"error\": \"Insufficient permissions. Requires add_upload permission\",\n  \"statusCode\": 403\n}\n\n ```\n\n**404 Not Found - File Not Found:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"File not found\",\n  \"error\": \"File not found in Google Cloud Storage\",\n  \"statusCode\": 404\n}\n\n ```\n\n**413 Payload Too Large:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"File too large\",\n  \"error\": \"File size exceeds 15MB limit\",\n  \"statusCode\": 413\n}\n\n ```\n\n**500 Internal Server Error - Download Error:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Download error\",\n  \"error\": \"Failed to download file from URL\",\n  \"statusCode\": 500\n}\n\n ```\n\n**500 Internal Server Error - Upload Error:**\n\n``` json\n{\n  \"success\": false,\n  \"message\": \"Upload processing error\",\n  \"error\": \"Failed to upload file to Google Cloud Storage\",\n  \"statusCode\": 500\n}\n\n ```\n\n---\n\n## Best Practices\n\n1. **File Size**: Always validate file size before upload (max 15MB)\n    \n2. **File Types**: Validate file types based on your application requirements\n    \n3. **Content Type**: Set appropriate content type for proper file handling\n    \n4. **URL Validation**: Validate URLs before downloading\n    \n5. **Error Handling**: Handle download and upload errors gracefully\n    \n6. **Security**: Only allow deletion of files from your configured bucket\n    \n7. **Object Keys**: Use unique object keys to prevent overwrites\n    \n8. **Cleanup**: Implement cleanup for failed uploads\n    \n9. **CORS**: Configure CORS on GCS bucket for web uploads\n    \n10. **Permissions**: Use IAM roles for GCS access, not service account keys in code\n    \n\n---\n\n## Google Cloud Storage Configuration\n\n**Required Environment Variables:**\n\n- `GOOGLE_STORAGE_BUCKET_NAME`: Name of the GCS bucket\n    \n\n**Required Credentials:**\n\n- Google Cloud Service Account JSON file\n    \n- Proper IAM permissions for bucket access\n    \n\n**Storage Structure:**\n\n```\nbucket-name/\n  â””â”€â”€ media/\n      â””â”€â”€ users/\n          â”œâ”€â”€ user-123-uuid1.jpg\n          â”œâ”€â”€ user-123-uuid2.png\n          â””â”€â”€ user-456-uuid3.pdf\n\n ```\n\n**Public URL Format:**\n\n```\nhttps://storage.googleapis.com/{bucket-name}/media/users/{object-key}\n\n ```\n\n---\n\n## Security Considerations\n\n1. **Authentication**: All endpoints require authentication\n    \n2. **Authorization**: Check permissions before allowing upload/delete\n    \n3. **Bucket Validation**: Ensure files are only deleted from your bucket\n    \n4. **URL Validation**: Validate URLs to prevent SSRF attacks\n    \n5. **File Type Validation**: Validate file types to prevent malicious uploads\n    \n6. **Size Limits**: Enforce size limits to prevent DoS attacks\n    \n7. **Content Scanning**: Consider scanning uploaded files for malware\n    \n8. **Access Control**: Use GCS IAM for fine-grained access control\n    \n\n---\n\n## Performance Considerations\n\n1. **File Size**: Large files may take time to upload/download\n    \n2. **Concurrent Uploads**: Handle multiple concurrent uploads efficiently\n    \n3. **Streaming**: For large files, consider streaming uploads\n    \n4. **Caching**: Cache public URLs if files don't change\n    \n5. **CDN**: Consider using CDN for frequently accessed files\n    \n6. **Compression**: Compress images before upload for better performance\n    \n\n---\n\n**Last Updated**: January 2025"
		},
		{
			"name": "health-checkup",
			"id": "50285861-7a79bb39-f7af-444a-ac83-75a769ef095f",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{access_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{domain.com}}/{{mode}}/health",
					"host": [
						"{{domain.com}}"
					],
					"path": [
						"{{mode}}",
						"health"
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{access_token}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"requests": {},
				"exec": [
					""
				],
				"id": "a9f636f3-de69-4e6b-9d57-cb1d42d9831e"
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"requests": {},
				"exec": [
					"const response = pm.response.json();",
					"",
					"// Check if the response succeeded",
					"if (response.success && response.data) {",
					"    if (response.data.access_token) {",
					"        pm.environment.set(\"access_token\", response.data.access_token);",
					"        console.log(\"Access token updated:\", response.data.access_token);",
					"    }",
					"",
					"    if (response.data.refresh_token) {",
					"        pm.environment.set(\"refresh_token\", response.data.refresh_token);",
					"        console.log(\"Refresh token updated:\", response.data.refresh_token);",
					"    }",
					"} else {",
					"    console.log(\"No token found in response:\", response);",
					"}",
					""
				],
				"id": "e3df0958-84cd-4a44-a6fb-c7c82305136d"
			}
		}
	],
	"variable": [
		{
			"key": "access_token",
			"value": ""
		},
		{
			"key": "refresh_token",
			"value": ""
		},
		{
			"key": "mode",
			"value": ""
		},
		{
			"key": "domain.com",
			"value": ""
		}
	]
}